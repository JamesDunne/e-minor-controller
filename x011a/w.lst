MP2COD 4.1, COFF to COD File Converter
Copyright (c) 2006 Microchip Technology Inc.
Listing File Generated: Tue Jun 05 13:56:59 2007


Address  Value    Disassembly              Source                                                                           File
-------  -------  -----------------------  -------------------------------------------------------------------------------  -----
                                           //*;###########################################################################  C:\fw\midicontroller\x011a\main.c
                                           //;#			Author: Joe Dunne											  #                                           C:\fw\midicontroller\x011a\main.c
                                           //;#			Date 4/06/07					      						  #                                          C:\fw\midicontroller\x011a\main.c
                                           //;#			Main arbitrator									  			  #                                          C:\fw\midicontroller\x011a\main.c
                                           //;#			File Name: main.c   										  #                                         C:\fw\midicontroller\x011a\main.c
                                           //;#																		  #                                                        C:\fw\midicontroller\x011a\main.c
                                           //;############################################################################  C:\fw\midicontroller\x011a\main.c
                                                                                                                            C:\fw\midicontroller\x011a\main.c
                                                                                                                            C:\fw\midicontroller\x011a\main.c
                                           #include "c_system.h"                                                            C:\fw\midicontroller\x011a\main.c
                                           #include "usb.h"                                                                 C:\fw\midicontroller\x011a\main.c
                                                                                                                            C:\fw\midicontroller\x011a\main.c
                                           unsigned char	ADC_CONVERSION(unsigned char Channel);                             C:\fw\midicontroller\x011a\main.c
                                           void	ServiceUSB(void);                                                           C:\fw\midicontroller\x011a\main.c
                                                                                                                            C:\fw\midicontroller\x011a\main.c
                                           //#define	RX_TRIS_BIT		TRISCbits.TRISC7		// Receive direction bit                C:\fw\midicontroller\x011a\main.c
                                           //#define	TX_TRIS_BIT		TRISCbits.TRISC6		// Transmit direction bit               C:\fw\midicontroller\x011a\main.c
                                                                                                                            C:\fw\midicontroller\x011a\main.c
                                           #pragma code	main_code=0xA2A                                                     C:\fw\midicontroller\x011a\main.c
                                                                                                                            C:\fw\midicontroller\x011a\main.c
000a2a   cfd9     MOVFF     0xfd9,0xfe6    void main() {                                                                    C:\fw\midicontroller\x011a\main.c
000a2c   ffe6                                                                                                               
000a2e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000a30   ffd9                                                                                                               
000a32   0e05     MOVLW     0x5                                                                                             
000a34   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	unsigned char chars[5];                                                         C:\fw\midicontroller\x011a\main.c
                                                                                                                            C:\fw\midicontroller\x011a\main.c
000a36   ec9e     CALL      0x353c,0x0     	init();                                                                         C:\fw\midicontroller\x011a\main.c
000a38   f01a                                                                                                               
                                           //	controllerinit();                                                             C:\fw\midicontroller\x011a\main.c
                                           	                                                                                C:\fw\midicontroller\x011a\main.c
000a3a   0e20     MOVLW     0x20           	chars[0] = ' ';                                                                 C:\fw\midicontroller\x011a\main.c
000a3c   6edf     MOVWF     0xdf,0x0                                                                                        
000a3e   52de     MOVF      0xde,0x1,0x0   	chars[1] = 'p';                                                                 C:\fw\midicontroller\x011a\main.c
000a40   0e70     MOVLW     0x70                                                                                            
000a42   6edd     MOVWF     0xdd,0x0                                                                                        
000a44   0e61     MOVLW     0x61           	chars[2] = 'a';                                                                 C:\fw\midicontroller\x011a\main.c
000a46   6ef3     MOVWF     0xf3,0x0                                                                                        
000a48   0e02     MOVLW     0x2                                                                                             
000a4a   cff3     MOVFF     0xff3,0xfdb                                                                                     
000a4c   ffdb                                                                                                               
000a4e   0e72     MOVLW     0x72           	chars[3] = 'r';                                                                 C:\fw\midicontroller\x011a\main.c
000a50   6ef3     MOVWF     0xf3,0x0                                                                                        
000a52   0e03     MOVLW     0x3                                                                                             
000a54   cff3     MOVFF     0xff3,0xfdb                                                                                     
000a56   ffdb                                                                                                               
000a58   0e63     MOVLW     0x63           	chars[4] = 'c';                                                                 C:\fw\midicontroller\x011a\main.c
000a5a   6ef3     MOVWF     0xf3,0x0                                                                                        
000a5c   0e04     MOVLW     0x4                                                                                             
000a5e   cff3     MOVFF     0xff3,0xfdb                                                                                     
000a60   ffdb                                                                                                               
000a62   cfd9     MOVFF     0xfd9,0xfe6    	SetDispAscii(chars);                                                            C:\fw\midicontroller\x011a\main.c
000a64   ffe6                                                                                                               
000a66   cfda     MOVFF     0xfda,0xfe6                                                                                     
000a68   ffe6                                                                                                               
000a6a   ec0a     CALL      0x2a14,0x0                                                                                      
000a6c   f015                                                                                                               
000a6e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000a70   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000a72   0eaa     MOVLW     0xaa           	SendDataToShiftReg(0xAA);                                                       C:\fw\midicontroller\x011a\main.c
000a74   6ee6     MOVWF     0xe6,0x0                                                                                        
000a76   ec88     CALL      0x2510,0x0                                                                                      
000a78   f012                                                                                                               
000a7a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                                                                                            C:\fw\midicontroller\x011a\main.c
                                                                                                                            C:\fw\midicontroller\x011a\main.c
000a7c   0e00     MOVLW     0x0            	chars[0] = ROM_SAVEDATA[0];                                                     C:\fw\midicontroller\x011a\main.c
000a7e   6ef6     MOVWF     0xf6,0x0                                                                                        
000a80   0e40     MOVLW     0x40                                                                                            
000a82   6ef7     MOVWF     0xf7,0x0                                                                                        
000a84   0008     TBLRD                                                                                                     
000a86   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000a88   6edf     MOVWF     0xdf,0x0                                                                                        
000a8a   0e01     MOVLW     0x1            	chars[1] = ROM_SAVEDATA[1];                                                     C:\fw\midicontroller\x011a\main.c
000a8c   6ef6     MOVWF     0xf6,0x0                                                                                        
000a8e   0e40     MOVLW     0x40                                                                                            
000a90   6ef7     MOVWF     0xf7,0x0                                                                                        
000a92   0008     TBLRD                                                                                                     
000a94   0e01     MOVLW     0x1                                                                                             
000a96   cff5     MOVFF     0xff5,0xfdb                                                                                     
000a98   ffdb                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\main.c
000a9a   0100     MOVLB     0x0            	ProgmemBuffer[0] = 0xAA;                                                        C:\fw\midicontroller\x011a\main.c
000a9c   0eaa     MOVLW     0xaa                                                                                            
000a9e   6fbb     MOVWF     0xbb,0x1                                                                                        
000aa0   0e55     MOVLW     0x55           	ProgmemBuffer[1] = 0x55;                                                        C:\fw\midicontroller\x011a\main.c
000aa2   6fbc     MOVWF     0xbc,0x1                                                                                        
000aa4   0ebb     MOVLW     0xbb           	Write64BytesProgMem(ROM_SAVEDATA,ProgmemBuffer);                                C:\fw\midicontroller\x011a\main.c
000aa6   6ee6     MOVWF     0xe6,0x0                                                                                        
000aa8   0e00     MOVLW     0x0                                                                                             
000aaa   6ee6     MOVWF     0xe6,0x0                                                                                        
000aac   0e00     MOVLW     0x0                                                                                             
000aae   6ee6     MOVWF     0xe6,0x0                                                                                        
000ab0   0e40     MOVLW     0x40                                                                                            
000ab2   6ee6     MOVWF     0xe6,0x0                                                                                        
000ab4   ec81     CALL      0x2702,0x0                                                                                      
000ab6   f013                                                                                                               
000ab8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000aba   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000abc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000abe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000ac0   0e00     MOVLW     0x0            	chars[0] = ROM_SAVEDATA[0];                                                     C:\fw\midicontroller\x011a\main.c
000ac2   6ef6     MOVWF     0xf6,0x0                                                                                        
000ac4   0e40     MOVLW     0x40                                                                                            
000ac6   6ef7     MOVWF     0xf7,0x0                                                                                        
000ac8   0008     TBLRD                                                                                                     
000aca   50f5     MOVF      0xf5,0x0,0x0                                                                                    
000acc   6edf     MOVWF     0xdf,0x0                                                                                        
000ace   0e01     MOVLW     0x1            	chars[1] = ROM_SAVEDATA[1];                                                     C:\fw\midicontroller\x011a\main.c
000ad0   6ef6     MOVWF     0xf6,0x0                                                                                        
000ad2   0e40     MOVLW     0x40                                                                                            
000ad4   6ef7     MOVWF     0xf7,0x0                                                                                        
000ad6   0008     TBLRD                                                                                                     
000ad8   0e01     MOVLW     0x1                                                                                             
000ada   cff5     MOVFF     0xff5,0xfdb                                                                                     
000adc   ffdb                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\main.c
                                                                                                                            C:\fw\midicontroller\x011a\main.c
000af2   d7f5     BRA       0xade          	for(;;) {                                                                       C:\fw\midicontroller\x011a\main.c
000ade   0100     MOVLB     0x0            		if (Systick) {                                                                 C:\fw\midicontroller\x011a\main.c
000ae0   a160     BTFSS     0x60,0x0,0x1                                                                                    
000ae2   d006     BRA       0xaf0                                                                                           
                                                                                                                            C:\fw\midicontroller\x011a\main.c
000ae4   ecb0     CALL      0x2560,0x0     			ReadButtons();                                                                C:\fw\midicontroller\x011a\main.c
000ae6   f012                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\main.c
                                           //			ProcessControl();                                                           C:\fw\midicontroller\x011a\main.c
                                           //			if (LATE == 0x05) LATE = 0x2;                                               C:\fw\midicontroller\x011a\main.c
                                           //			else LATE = 0x05;                                                           C:\fw\midicontroller\x011a\main.c
000ae8   ec74     CALL      0x28e8,0x0     			ProcessLeds();                                                                C:\fw\midicontroller\x011a\main.c
000aea   f014                                                                                                               
000aec   ec9f     CALL      0x313e,0x0     			ServiceRequests();                                                            C:\fw\midicontroller\x011a\main.c
000aee   f018                                                                                                               
                                           			                                                                              C:\fw\midicontroller\x011a\main.c
                                           		}                                                                              C:\fw\midicontroller\x011a\main.c
000af0   d80b     RCALL     0xb08          		ServiceUSB();                                                                  C:\fw\midicontroller\x011a\main.c
                                           	}                                                                               C:\fw\midicontroller\x011a\main.c
000af4   0e05     MOVLW     0x5            }                                                                                C:\fw\midicontroller\x011a\main.c
000af6   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000af8   e202     BC        0xafe                                                                                           
000afa   6ae1     CLRF      0xe1,0x0                                                                                        
000afc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000afe   6ee1     MOVWF     0xe1,0x0                                                                                        
000b00   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b02   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000b04   ffd9                                                                                                               
000b06   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\main.c
                                           void	ServiceUSB(void) {                                                          C:\fw\midicontroller\x011a\main.c
000b08   eca9     CALL      0x2352,0x0     	USBCheckBusStatus();                    // Must use polling method              C:\fw\midicontroller\x011a\main.c
000b0a   f011                                                                                                               
000b0c   be6f     BTFSC     0x6f,0x7,0x0       if(UCFGbits.UTEYE!=1) {                                                      C:\fw\midicontroller\x011a\main.c
000b0e   d002     BRA       0xb14                                                                                           
000b10   ecc8     CALL      0x2390,0x0             USBDriverService();                 // Interrupt or polling method       C:\fw\midicontroller\x011a\main.c
000b12   f011                                                                                                               
                                           	}                                                                               C:\fw\midicontroller\x011a\main.c
000b14   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\main.c
                                           /* $Id: c018.c,v 1.2.14.1 2006/01/24 14:50:12 rhinec Exp $ */                    C:\fw\midicontroller\x011a\startup.c
                                                                                                                            C:\fw\midicontroller\x011a\startup.c
                                           /* Copyright (c)1999 Microchip Technology */                                     C:\fw\midicontroller\x011a\startup.c
                                                                                                                            C:\fw\midicontroller\x011a\startup.c
                                           /* MPLAB-C18 startup code */                                                     C:\fw\midicontroller\x011a\startup.c
                                                                                                                            C:\fw\midicontroller\x011a\startup.c
                                           /* external reference to the user's main routine */                              C:\fw\midicontroller\x011a\startup.c
                                           extern void main (void);                                                         C:\fw\midicontroller\x011a\startup.c
                                           /* prototype for the startup function */                                         C:\fw\midicontroller\x011a\startup.c
                                           void _entry (void);                                                              C:\fw\midicontroller\x011a\startup.c
                                           void _startup (void);                                                            C:\fw\midicontroller\x011a\startup.c
                                           extern near char __FPFLAGS;                                                      C:\fw\midicontroller\x011a\startup.c
                                           #define RND 6                                                                    C:\fw\midicontroller\x011a\startup.c
                                                                                                                            C:\fw\midicontroller\x011a\startup.c
                                           #pragma code _entry_scn=0x000A00                                                 C:\fw\midicontroller\x011a\startup.c
                                           void                                                                             C:\fw\midicontroller\x011a\startup.c
                                           _entry (void)                                                                    C:\fw\midicontroller\x011a\startup.c
                                           {                                                                                C:\fw\midicontroller\x011a\startup.c
000a00   ef35     GOTO      0x366a         _asm goto _startup _endasm                                                       C:\fw\midicontroller\x011a\startup.c
000a02   f01b                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\startup.c
000a04   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\startup.c
                                                                                                                            C:\fw\midicontroller\x011a\startup.c
                                           #pragma code _startup_scn                                                        C:\fw\midicontroller\x011a\startup.c
                                           void                                                                             C:\fw\midicontroller\x011a\startup.c
                                           _startup (void)                                                                  C:\fw\midicontroller\x011a\startup.c
                                           {                                                                                C:\fw\midicontroller\x011a\startup.c
                                             _asm                                                                           C:\fw\midicontroller\x011a\startup.c
                                               // Initialize the stack pointer                                              C:\fw\midicontroller\x011a\startup.c
00366a   ee17     LFSR      0x1,0x700          lfsr 1, _stack                                                               C:\fw\midicontroller\x011a\startup.c
00366c   f000                                                                                                               
00366e   ee27     LFSR      0x2,0x700          lfsr 2, _stack                                                               C:\fw\midicontroller\x011a\startup.c
003670   f000                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\startup.c
003672   6af8     CLRF      0xf8,0x0           clrf TBLPTRU, 0 // 1st silicon doesn't do this on POR                        C:\fw\midicontroller\x011a\startup.c
                                                                                                                            C:\fw\midicontroller\x011a\startup.c
003674   9c0f     BCF       0xf,0x6,0x0        bcf __FPFLAGS,RND,0 // Initalize rounding flag for floating point libs       C:\fw\midicontroller\x011a\startup.c
                                           _endasm loop:                                                                    C:\fw\midicontroller\x011a\startup.c
                                                                                                                            C:\fw\midicontroller\x011a\startup.c
                                             // Call the user's main routine                                                C:\fw\midicontroller\x011a\startup.c
003676   ec15     CALL      0xa2a,0x0        main ();                                                                       C:\fw\midicontroller\x011a\startup.c
003678   f005                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\startup.c
00367a   d7fd     BRA       0x3676           goto loop;                                                                     C:\fw\midicontroller\x011a\startup.c
00367c   0012     RETURN    0x0            }                               /* end _startup() */                             C:\fw\midicontroller\x011a\startup.c
                                           /*********************************************************************           C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            *********************************************************************           C:\fw\midicontroller\x011a\usb.c
                                            * FileName:        usb9.c                                                       C:\fw\midicontroller\x011a\usb.c
                                            * Dependencies:    See INCLUDES section below                                   C:\fw\midicontroller\x011a\usb.c
                                            * Processor:       PIC18                                                        C:\fw\midicontroller\x011a\usb.c
                                            * Compiler:        C18 2.30.01+                                                 C:\fw\midicontroller\x011a\usb.c
                                            * Company:         Microchip Technology, Inc.                                   C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Software License Agreement                                                    C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\fw\midicontroller\x011a\usb.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\fw\midicontroller\x011a\usb.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\fw\midicontroller\x011a\usb.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\fw\midicontroller\x011a\usb.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\fw\midicontroller\x011a\usb.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\fw\midicontroller\x011a\usb.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\fw\midicontroller\x011a\usb.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\fw\midicontroller\x011a\usb.c
                                            * civil liability for the breach of the terms and conditions of this            C:\fw\midicontroller\x011a\usb.c
                                            * license.                                                                      C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\fw\midicontroller\x011a\usb.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\fw\midicontroller\x011a\usb.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\fw\midicontroller\x011a\usb.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\fw\midicontroller\x011a\usb.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\fw\midicontroller\x011a\usb.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Author               Date        Comment                                      C:\fw\midicontroller\x011a\usb.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\fw\midicontroller\x011a\usb.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\fw\midicontroller\x011a\usb.c
                                            ********************************************************************/           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** I N C L U D E S **********************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           #include "p18f4455.h"                                                            C:\fw\midicontroller\x011a\usb.c
                                           #include "typedefs.h"                                                            C:\fw\midicontroller\x011a\usb.c
                                           #include "usb.h"                                                                 C:\fw\midicontroller\x011a\usb.c
                                           //#include "io_cfg.h"                     // Required for self_power status      C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** V A R I A B L E S ********************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           #pragma udata usb5                                                               C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBStdGetDscHandler(void);                                                  C:\fw\midicontroller\x011a\usb.c
                                           void USBStdSetCfgHandler(void);                                                  C:\fw\midicontroller\x011a\usb.c
                                           void USBStdGetStatusHandler(void);                                               C:\fw\midicontroller\x011a\usb.c
                                           void USBStdFeatureReqHandler(void);                                              C:\fw\midicontroller\x011a\usb.c
                                           void HIDSetReportHandler(void);                                                  C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           #pragma code                                                                     C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBCheckStdRequest(void)                                C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This routine checks the setup data packet to see if it       C:\fw\midicontroller\x011a\usb.c
                                            *                  knows how to handle it                                       C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBCheckStdRequest(void)                                                    C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
001d76   0104     MOVLB     0x4                if(SetupPkt.RequestType != STANDARD) return;                                 C:\fw\midicontroller\x011a\usb.c
001d78   5110     MOVF      0x10,0x0,0x1                                                                                    
001d7a   0b60     ANDLW     0x60                                                                                            
001d7c   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
001d7e   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
001d80   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
001d82   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
001d84   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
001d86   0900     IORLW     0x0                                                                                             
001d88   e001     BZ        0x1d8c                                                                                          
001d8a   d04f     BRA       0x1e2a                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
001d8c   5111     MOVF      0x11,0x0,0x1       switch(SetupPkt.bRequest)                                                    C:\fw\midicontroller\x011a\usb.c
001d8e   0a07     XORLW     0x7                                                                                             
001d90   e04b     BZ        0x1e28                                                                                          
001d92   0a0b     XORLW     0xb                                                                                             
001d94   e049     BZ        0x1e28                                                                                          
001d96   0a07     XORLW     0x7                                                                                             
001d98   e03a     BZ        0x1e0e                                                                                          
001d9a   0a01     XORLW     0x1                                                                                             
001d9c   e028     BZ        0x1dee                                                                                          
001d9e   0a0b     XORLW     0xb                                                                                             
001da0   e024     BZ        0x1dea                                                                                          
001da2   0a02     XORLW     0x2                                                                                             
001da4   e022     BZ        0x1dea                                                                                          
001da6   0a03     XORLW     0x3                                                                                             
001da8   e01e     BZ        0x1de6                                                                                          
001daa   0a08     XORLW     0x8                                                                                             
001dac   e011     BZ        0x1dd0                                                                                          
001dae   0a01     XORLW     0x1                                                                                             
001db0   e00d     BZ        0x1dcc                                                                                          
001db2   0a0f     XORLW     0xf                                                                                             
001db4   e009     BZ        0x1dc8                                                                                          
001db6   0a03     XORLW     0x3                                                                                             
001db8   e001     BZ        0x1dbc                                                                                          
001dba   d036     BRA       0x1e28                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
                                                   case SET_ADR:                                                            C:\fw\midicontroller\x011a\usb.c
001dbc   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\fw\midicontroller\x011a\usb.c
001dbe   0e01     MOVLW     0x1                                                                                             
001dc0   6f8c     MOVWF     0x8c,0x1                                                                                        
001dc2   0e04     MOVLW     0x4                        usb_device_state = ADR_PENDING_STATE;       // Update state only     C:\fw\midicontroller\x011a\usb.c
001dc4   6f87     MOVWF     0x87,0x1                                                                                        
                                                       /* See USBCtrlTrfInHandler() in usbctrltrf.c for the next step */    C:\fw\midicontroller\x011a\usb.c
001dc6   d031     BRA       0x1e2a                     break;                                                               C:\fw\midicontroller\x011a\usb.c
                                                   case GET_DSC:                                                            C:\fw\midicontroller\x011a\usb.c
001dc8   d831     RCALL     0x1e2c                     USBStdGetDscHandler();                                               C:\fw\midicontroller\x011a\usb.c
001dca   d02f     BRA       0x1e2a                     break;                                                               C:\fw\midicontroller\x011a\usb.c
                                                   case SET_CFG:                                                            C:\fw\midicontroller\x011a\usb.c
001dcc   d890     RCALL     0x1eee                     USBStdSetCfgHandler();                                               C:\fw\midicontroller\x011a\usb.c
001dce   d02d     BRA       0x1e2a                     break;                                                               C:\fw\midicontroller\x011a\usb.c
                                                   case GET_CFG:                                                            C:\fw\midicontroller\x011a\usb.c
001dd0   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\fw\midicontroller\x011a\usb.c
001dd2   0e01     MOVLW     0x1                                                                                             
001dd4   6f8c     MOVWF     0x8c,0x1                                                                                        
001dd6   0e89     MOVLW     0x89                       pSrc.bRam = (byte*)&usb_active_cfg;         // Set Source            C:\fw\midicontroller\x011a\usb.c
001dd8   6f8d     MOVWF     0x8d,0x1                                                                                        
001dda   0e01     MOVLW     0x1                                                                                             
001ddc   6f8e     MOVWF     0x8e,0x1                                                                                        
001dde   9388     BCF       0x88,0x1,0x1               usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       C:\fw\midicontroller\x011a\usb.c
001de0   0e01     MOVLW     0x1                        LSB(wCount) = 1;                            // Set data count        C:\fw\midicontroller\x011a\usb.c
001de2   6f91     MOVWF     0x91,0x1                                                                                        
001de4   d022     BRA       0x1e2a                     break;                                                               C:\fw\midicontroller\x011a\usb.c
                                                   case GET_STATUS:                                                         C:\fw\midicontroller\x011a\usb.c
001de6   d8a9     RCALL     0x1f3a                     USBStdGetStatusHandler();                                            C:\fw\midicontroller\x011a\usb.c
001de8   d020     BRA       0x1e2a                     break;                                                               C:\fw\midicontroller\x011a\usb.c
                                                   case CLR_FEATURE:                                                        C:\fw\midicontroller\x011a\usb.c
                                                   case SET_FEATURE:                                                        C:\fw\midicontroller\x011a\usb.c
001dea   d8f1     RCALL     0x1fce                     USBStdFeatureReqHandler();                                           C:\fw\midicontroller\x011a\usb.c
001dec   d01e     BRA       0x1e2a                     break;                                                               C:\fw\midicontroller\x011a\usb.c
                                                   case GET_INTF:                                                           C:\fw\midicontroller\x011a\usb.c
001dee   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\fw\midicontroller\x011a\usb.c
001df0   0e01     MOVLW     0x1                                                                                             
001df2   6f8c     MOVWF     0x8c,0x1                                                                                        
001df4   0104     MOVLB     0x4                        pSrc.bRam = (byte*)&usb_alt_intf+SetupPkt.bIntfID;  // Set source    C:\fw\midicontroller\x011a\usb.c
001df6   5114     MOVF      0x14,0x0,0x1                                                                                    
001df8   0101     MOVLB     0x1                                                                                             
001dfa   6f8d     MOVWF     0x8d,0x1                                                                                        
001dfc   6b8e     CLRF      0x8e,0x1                                                                                        
001dfe   0e8a     MOVLW     0x8a                                                                                            
001e00   278d     ADDWF     0x8d,0x1,0x1                                                                                    
001e02   0e01     MOVLW     0x1                                                                                             
001e04   238e     ADDWFC    0x8e,0x1,0x1                                                                                    
001e06   9388     BCF       0x88,0x1,0x1               usb_stat.ctrl_trf_mem = _RAM;               // Set memory type       C:\fw\midicontroller\x011a\usb.c
001e08   0e01     MOVLW     0x1                        LSB(wCount) = 1;                            // Set data count        C:\fw\midicontroller\x011a\usb.c
001e0a   6f91     MOVWF     0x91,0x1                                                                                        
001e0c   d00e     BRA       0x1e2a                     break;                                                               C:\fw\midicontroller\x011a\usb.c
                                                   case SET_INTF:                                                           C:\fw\midicontroller\x011a\usb.c
001e0e   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\fw\midicontroller\x011a\usb.c
001e10   0e01     MOVLW     0x1                                                                                             
001e12   6f8c     MOVWF     0x8c,0x1                                                                                        
001e14   0104     MOVLB     0x4                        usb_alt_intf[SetupPkt.bIntfID] = SetupPkt.bAltID;                    C:\fw\midicontroller\x011a\usb.c
001e16   5114     MOVF      0x14,0x0,0x1                                                                                    
001e18   6aea     CLRF      0xea,0x0                                                                                        
001e1a   0f8a     ADDLW     0x8a                                                                                            
001e1c   6ee9     MOVWF     0xe9,0x0                                                                                        
001e1e   0e01     MOVLW     0x1                                                                                             
001e20   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001e22   c412     MOVFF     0x412,0xfef                                                                                     
001e24   ffef                                                                                                               
001e26   d001     BRA       0x1e2a                     break;                                                               C:\fw\midicontroller\x011a\usb.c
                                                   case SET_DSC:                                                            C:\fw\midicontroller\x011a\usb.c
                                                   case SYNCH_FRAME:                                                        C:\fw\midicontroller\x011a\usb.c
                                                   default:                                                                 C:\fw\midicontroller\x011a\usb.c
001e28   d000     BRA       0x1e2a                     break;                                                               C:\fw\midicontroller\x011a\usb.c
                                               }//end switch                                                                C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
001e2a   0012     RETURN    0x0            }//end USBCheckStdRequest                                                        C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBStdGetDscHandler(void)                               C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This routine handles the standard GET_DESCRIPTOR request.    C:\fw\midicontroller\x011a\usb.c
                                            *                  It utilizes tables dynamically looks up descriptor size.     C:\fw\midicontroller\x011a\usb.c
                                            *                  This routine should never have to be modified if the tables  C:\fw\midicontroller\x011a\usb.c
                                            *                  in usbdsc.c are declared correctly.                          C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBStdGetDscHandler(void)                                                   C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
001e2c   0e80     MOVLW     0x80               if(SetupPkt.bmRequestType == 0x80)                                           C:\fw\midicontroller\x011a\usb.c
001e2e   0104     MOVLB     0x4                                                                                             
001e30   5d10     SUBWF     0x10,0x0,0x1                                                                                    
001e32   e15c     BNZ       0x1eec                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
001e34   5113     MOVF      0x13,0x0,0x1           switch(SetupPkt.bDscType)                                                C:\fw\midicontroller\x011a\usb.c
001e36   0a03     XORLW     0x3                                                                                             
001e38   e032     BZ        0x1e9e                                                                                          
001e3a   0a01     XORLW     0x1                                                                                             
001e3c   e00e     BZ        0x1e5a                                                                                          
001e3e   0a03     XORLW     0x3                                                                                             
001e40   e001     BZ        0x1e44                                                                                          
001e42   d04b     BRA       0x1eda                                                                                          
                                                   {                                                                        C:\fw\midicontroller\x011a\usb.c
                                                       case DSC_DEV:                                                        C:\fw\midicontroller\x011a\usb.c
001e44   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\fw\midicontroller\x011a\usb.c
001e46   0e01     MOVLW     0x1                                                                                             
001e48   6f8c     MOVWF     0x8c,0x1                                                                                        
001e4a   0e9e     MOVLW     0x9e                           pSrc.bRom = (rom byte*)&device_dsc;                              C:\fw\midicontroller\x011a\usb.c
001e4c   6f8d     MOVWF     0x8d,0x1                                                                                        
001e4e   0e32     MOVLW     0x32                                                                                            
001e50   6f8e     MOVWF     0x8e,0x1                                                                                        
001e52   0e12     MOVLW     0x12                           wCount._word = sizeof(device_dsc);          // Set data count    C:\fw\midicontroller\x011a\usb.c
001e54   6f91     MOVWF     0x91,0x1                                                                                        
001e56   6b92     CLRF      0x92,0x1                                                                                        
001e58   d040     BRA       0x1eda                         break;                                                           C:\fw\midicontroller\x011a\usb.c
                                                       case DSC_CFG:                                                        C:\fw\midicontroller\x011a\usb.c
001e5a   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\fw\midicontroller\x011a\usb.c
001e5c   0e01     MOVLW     0x1                                                                                             
001e5e   6f8c     MOVWF     0x8c,0x1                                                                                        
001e60   0104     MOVLB     0x4                            pSrc.bRom = *(USB_CD_Ptr+SetupPkt.bDscIndex);                    C:\fw\midicontroller\x011a\usb.c
001e62   5112     MOVF      0x12,0x0,0x1                                                                                    
001e64   6ef6     MOVWF     0xf6,0x0                                                                                        
001e66   6af7     CLRF      0xf7,0x0                                                                                        
001e68   90d8     BCF       0xd8,0x0,0x0                                                                                    
001e6a   36f6     RLCF      0xf6,0x1,0x0                                                                                    
001e6c   36f7     RLCF      0xf7,0x1,0x0                                                                                    
001e6e   0ec5     MOVLW     0xc5                                                                                            
001e70   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
001e72   0e33     MOVLW     0x33                                                                                            
001e74   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
001e76   0009     TBLRDPOSTINC                                                                                              
001e78   cff5     MOVFF     0xff5,0x18d                                                                                     
001e7a   f18d                                                                                                               
001e7c   000a     TBLRDPOSTDEC                                                                                              
001e7e   cff5     MOVFF     0xff5,0x18e                                                                                     
001e80   f18e                                                                                                               
001e82   0e02     MOVLW     0x2                            wCount._word = *(pSrc.wRom+1);              // Set data count    C:\fw\midicontroller\x011a\usb.c
001e84   0101     MOVLB     0x1                                                                                             
001e86   6af7     CLRF      0xf7,0x0                                                                                        
001e88   258d     ADDWF     0x8d,0x0,0x1                                                                                    
001e8a   6ef6     MOVWF     0xf6,0x0                                                                                        
001e8c   518e     MOVF      0x8e,0x0,0x1                                                                                    
001e8e   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
001e90   0009     TBLRDPOSTINC                                                                                              
001e92   cff5     MOVFF     0xff5,0x191                                                                                     
001e94   f191                                                                                                               
001e96   000a     TBLRDPOSTDEC                                                                                              
001e98   cff5     MOVFF     0xff5,0x192                                                                                     
001e9a   f192                                                                                                               
001e9c   d01e     BRA       0x1eda                         break;                                                           C:\fw\midicontroller\x011a\usb.c
                                                       case DSC_STR:                                                        C:\fw\midicontroller\x011a\usb.c
001e9e   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_USB9;                              C:\fw\midicontroller\x011a\usb.c
001ea0   0e01     MOVLW     0x1                                                                                             
001ea2   6f8c     MOVWF     0x8c,0x1                                                                                        
001ea4   0104     MOVLB     0x4            				pSrc.bRom = *(USB_SD_Ptr+SetupPkt.bDscIndex);                                C:\fw\midicontroller\x011a\usb.c
001ea6   5112     MOVF      0x12,0x0,0x1                                                                                    
001ea8   6ef6     MOVWF     0xf6,0x0                                                                                        
001eaa   6af7     CLRF      0xf7,0x0                                                                                        
001eac   90d8     BCF       0xd8,0x0,0x0                                                                                    
001eae   36f6     RLCF      0xf6,0x1,0x0                                                                                    
001eb0   36f7     RLCF      0xf7,0x1,0x0                                                                                    
001eb2   0ec9     MOVLW     0xc9                                                                                            
001eb4   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
001eb6   0e33     MOVLW     0x33                                                                                            
001eb8   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
001eba   0009     TBLRDPOSTINC                                                                                              
001ebc   cff5     MOVFF     0xff5,0x18d                                                                                     
001ebe   f18d                                                                                                               
001ec0   000a     TBLRDPOSTDEC                                                                                              
001ec2   cff5     MOVFF     0xff5,0x18e                                                                                     
001ec4   f18e                                                                                                               
001ec6   c18d     MOVFF     0x18d,0xff6    				wCount._word = *pSrc.bRom;                  // Set data count                C:\fw\midicontroller\x011a\usb.c
001ec8   fff6                                                                                                               
001eca   c18e     MOVFF     0x18e,0xff7                                                                                     
001ecc   fff7                                                                                                               
001ece   0008     TBLRD                                                                                                     
001ed0   50f5     MOVF      0xf5,0x0,0x0                                                                                    
001ed2   0101     MOVLB     0x1                                                                                             
001ed4   6f91     MOVWF     0x91,0x1                                                                                        
001ed6   6b92     CLRF      0x92,0x1                                                                                        
001ed8   d000     BRA       0x1eda                         break;                                                           C:\fw\midicontroller\x011a\usb.c
                                                   }//end switch                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
001eda   0e02     MOVLW     0x2            		if (SetupPkt.bDscIndex != INDEX_NAME && SetupPkt.bDscIndex != INDEX_SERIALNUM) { //handle as NVR (or ram) read C:\fw\midicontroller\x011a\usb.c
001edc   0104     MOVLB     0x4                                                                                             
001ede   5d12     SUBWF     0x12,0x0,0x1                                                                                    
001ee0   e005     BZ        0x1eec                                                                                          
001ee2   0e03     MOVLW     0x3                                                                                             
001ee4   5d12     SUBWF     0x12,0x0,0x1                                                                                    
001ee6   e002     BZ        0x1eec                                                                                          
001ee8   0101     MOVLB     0x1                    	usb_stat.ctrl_trf_mem = _ROM;                       // Set memory type  C:\fw\midicontroller\x011a\usb.c
001eea   8388     BSF       0x88,0x1,0x1                                                                                    
                                                   }                                                                        C:\fw\midicontroller\x011a\usb.c
                                               }//end if                                                                    C:\fw\midicontroller\x011a\usb.c
001eec   0012     RETURN    0x0            }//end USBStdGetDscHandler                                                       C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBStdSetCfgHandler(void)                               C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This routine first disables all endpoints by clearing        C:\fw\midicontroller\x011a\usb.c
                                            *                  UEP registers. It then configures (initializes) endpoints    C:\fw\midicontroller\x011a\usb.c
                                            *                  specified in the modifiable section.                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBStdSetCfgHandler(void)                                                   C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
001eee   0101     MOVLB     0x1                ctrl_trf_session_owner = MUID_USB9;                                          C:\fw\midicontroller\x011a\usb.c
001ef0   0e01     MOVLW     0x1                                                                                             
001ef2   6f8c     MOVWF     0x8c,0x1                                                                                        
001ef4   0e0f     MOVLW     0xf                mDisableEP1to15();                          // See usbdrv.h                  C:\fw\midicontroller\x011a\usb.c
001ef6   6ee6     MOVWF     0xe6,0x0                                                                                        
001ef8   0e71     MOVLW     0x71                                                                                            
001efa   6ee6     MOVWF     0xe6,0x0                                                                                        
001efc   0e0f     MOVLW     0xf                                                                                             
001efe   6ee6     MOVWF     0xe6,0x0                                                                                        
001f00   dac9     RCALL     0x2494                                                                                          
001f02   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001f04   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001f06   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001f08   0e01     MOVLW     0x1                ClearArray((byte*)&usb_alt_intf,MAX_NUM_INT);                                C:\fw\midicontroller\x011a\usb.c
001f0a   6ee6     MOVWF     0xe6,0x0                                                                                        
001f0c   0e8a     MOVLW     0x8a                                                                                            
001f0e   6ee6     MOVWF     0xe6,0x0                                                                                        
001f10   0e01     MOVLW     0x1                                                                                             
001f12   6ee6     MOVWF     0xe6,0x0                                                                                        
001f14   dabf     RCALL     0x2494                                                                                          
001f16   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001f18   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001f1a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001f1c   c412     MOVFF     0x412,0x189        usb_active_cfg = SetupPkt.bCfgValue;                                         C:\fw\midicontroller\x011a\usb.c
001f1e   f189                                                                                                               
001f20   0104     MOVLB     0x4                if(SetupPkt.bCfgValue == 0)                                                  C:\fw\midicontroller\x011a\usb.c
001f22   5112     MOVF      0x12,0x0,0x1                                                                                    
001f24   e104     BNZ       0x1f2e                                                                                          
001f26   0101     MOVLB     0x1                    usb_device_state = ADDRESS_STATE;                                        C:\fw\midicontroller\x011a\usb.c
001f28   0e05     MOVLW     0x5                                                                                             
001f2a   6f87     MOVWF     0x87,0x1                                                                                        
001f2c   d005     BRA       0x1f38             else                                                                         C:\fw\midicontroller\x011a\usb.c
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
001f2e   0101     MOVLB     0x1                    usb_device_state = CONFIGURED_STATE;                                     C:\fw\midicontroller\x011a\usb.c
001f30   0e06     MOVLW     0x6                                                                                             
001f32   6f87     MOVWF     0x87,0x1                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                   /* Modifiable Section */                                                 C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                   #if defined(USB_USE_HID)                // See autofiles\usbcfg.h        C:\fw\midicontroller\x011a\usb.c
001f34   ecf8     CALL      0x2ff0,0x0             HIDInitEP();                                                             C:\fw\midicontroller\x011a\usb.c
001f36   f017                                                                                                               
                                                   #endif                                                                   C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                   /* End modifiable section */                                             C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               }//end if(SetupPkt.bcfgValue == 0)                                           C:\fw\midicontroller\x011a\usb.c
001f38   0012     RETURN    0x0            }//end USBStdSetCfgHandler                                                       C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBStdGetStatusHandler(void)                            C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This routine handles the standard GET_STATUS request         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBStdGetStatusHandler(void)                                                C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
001f3a   0104     MOVLB     0x4                CtrlTrfData._byte0 = 0;                         // Initialize content        C:\fw\midicontroller\x011a\usb.c
001f3c   6b50     CLRF      0x50,0x1                                                                                        
001f3e   6b51     CLRF      0x51,0x1           CtrlTrfData._byte1 = 0;                                                      C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
001f40   5110     MOVF      0x10,0x0,0x1       switch(SetupPkt.Recipient)                                                   C:\fw\midicontroller\x011a\usb.c
001f42   0b1f     ANDLW     0x1f                                                                                            
001f44   0a02     XORLW     0x2                                                                                             
001f46   e014     BZ        0x1f70                                                                                          
001f48   0a03     XORLW     0x3                                                                                             
001f4a   e00e     BZ        0x1f68                                                                                          
001f4c   0a01     XORLW     0x1                                                                                             
001f4e   e001     BZ        0x1f52                                                                                          
001f50   d033     BRA       0x1fb8                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
                                                   case RCPT_DEV:                                                           C:\fw\midicontroller\x011a\usb.c
001f52   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\fw\midicontroller\x011a\usb.c
001f54   0e01     MOVLW     0x1                                                                                             
001f56   6f8c     MOVWF     0x8c,0x1                                                                                        
                                                       /*                                                                   C:\fw\midicontroller\x011a\usb.c
                                                        * _byte0: bit0: Self-Powered Status [0] Bus-Powered [1] Self-Powered C:\fw\midicontroller\x011a\usb.c
                                                        *         bit1: RemoteWakeup        [0] Disabled    [1] Enabled     C:\fw\midicontroller\x011a\usb.c
                                                        */                                                                  C:\fw\midicontroller\x011a\usb.c
                                                       if(self_power == 1)                     // self_power defined in io_cfg.h C:\fw\midicontroller\x011a\usb.c
001f58   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b000000001;    // Set bit0                  C:\fw\midicontroller\x011a\usb.c
001f5a   8150     BSF       0x50,0x0,0x1                                                                                    
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
001f5c   0101     MOVLB     0x1                        if(usb_stat.RemoteWakeup == 1)          // usb_stat defined in usbmmap.c C:\fw\midicontroller\x011a\usb.c
001f5e   a188     BTFSS     0x88,0x0,0x1                                                                                    
001f60   d002     BRA       0x1f66                                                                                          
001f62   0104     MOVLB     0x4                            CtrlTrfData._byte0|=0b00000010;     // Set bit1                  C:\fw\midicontroller\x011a\usb.c
001f64   8350     BSF       0x50,0x1,0x1                                                                                    
001f66   d028     BRA       0x1fb8                     break;                                                               C:\fw\midicontroller\x011a\usb.c
                                                   case RCPT_INTF:                                                          C:\fw\midicontroller\x011a\usb.c
001f68   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;     // No data to update         C:\fw\midicontroller\x011a\usb.c
001f6a   0e01     MOVLW     0x1                                                                                             
001f6c   6f8c     MOVWF     0x8c,0x1                                                                                        
001f6e   d024     BRA       0x1fb8                     break;                                                               C:\fw\midicontroller\x011a\usb.c
                                                   case RCPT_EP:                                                            C:\fw\midicontroller\x011a\usb.c
001f70   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_USB9;                                  C:\fw\midicontroller\x011a\usb.c
001f72   0e01     MOVLW     0x1                                                                                             
001f74   6f8c     MOVWF     0x8c,0x1                                                                                        
                                                       /*                                                                   C:\fw\midicontroller\x011a\usb.c
                                                        * _byte0: bit0: Halt Status [0] Not Halted [1] Halted               C:\fw\midicontroller\x011a\usb.c
                                                        */                                                                  C:\fw\midicontroller\x011a\usb.c
001f76   0104     MOVLB     0x4                        pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);     C:\fw\midicontroller\x011a\usb.c
001f78   5114     MOVF      0x14,0x0,0x1                                                                                    
001f7a   0b0f     ANDLW     0xf                                                                                             
001f7c   0d08     MULLW     0x8                                                                                             
001f7e   50f3     MOVF      0xf3,0x0,0x0                                                                                    
001f80   6a11     CLRF      0x11,0x0                                                                                        
001f82   0f00     ADDLW     0x0                                                                                             
001f84   6e10     MOVWF     0x10,0x0                                                                                        
001f86   0e04     MOVLW     0x4                                                                                             
001f88   2211     ADDWFC    0x11,0x1,0x0                                                                                    
001f8a   5114     MOVF      0x14,0x0,0x1                                                                                    
001f8c   0b80     ANDLW     0x80                                                                                            
001f8e   e001     BZ        0x1f92                                                                                          
001f90   0e01     MOVLW     0x1                                                                                             
001f92   0d04     MULLW     0x4                                                                                             
001f94   50f3     MOVF      0xf3,0x0,0x0                                                                                    
001f96   0101     MOVLB     0x1                                                                                             
001f98   2410     ADDWF     0x10,0x0,0x0                                                                                    
001f9a   6f8f     MOVWF     0x8f,0x1                                                                                        
001f9c   0e00     MOVLW     0x0                                                                                             
001f9e   2011     ADDWFC    0x11,0x0,0x0                                                                                    
001fa0   6f90     MOVWF     0x90,0x1                                                                                        
001fa2   c18f     MOVFF     0x18f,0xfe9                if(*pDst.bRam & _BSTALL)    // Use _BSTALL as a bit mask             C:\fw\midicontroller\x011a\usb.c
001fa4   ffe9                                                                                                               
001fa6   c190     MOVFF     0x190,0xfea                                                                                     
001fa8   ffea                                                                                                               
001faa   50ef     MOVF      0xef,0x0,0x0                                                                                    
001fac   0b04     ANDLW     0x4                                                                                             
001fae   e003     BZ        0x1fb6                                                                                          
001fb0   0104     MOVLB     0x4                            CtrlTrfData._byte0=0x01;// Set bit0                              C:\fw\midicontroller\x011a\usb.c
001fb2   0e01     MOVLW     0x1                                                                                             
001fb4   6f50     MOVWF     0x50,0x1                                                                                        
001fb6   d000     BRA       0x1fb8                     break;                                                               C:\fw\midicontroller\x011a\usb.c
                                               }//end switch                                                                C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
001fb8   0101     MOVLB     0x1                if(ctrl_trf_session_owner == MUID_USB9)                                      C:\fw\midicontroller\x011a\usb.c
001fba   058c     DECF      0x8c,0x0,0x1                                                                                    
001fbc   e107     BNZ       0x1fcc                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
001fbe   0e50     MOVLW     0x50                   pSrc.bRam = (byte*)&CtrlTrfData;            // Set Source                C:\fw\midicontroller\x011a\usb.c
001fc0   6f8d     MOVWF     0x8d,0x1                                                                                        
001fc2   0e04     MOVLW     0x4                                                                                             
001fc4   6f8e     MOVWF     0x8e,0x1                                                                                        
001fc6   9388     BCF       0x88,0x1,0x1           usb_stat.ctrl_trf_mem = _RAM;               // Set memory type           C:\fw\midicontroller\x011a\usb.c
001fc8   0e02     MOVLW     0x2                    LSB(wCount) = 2;                            // Set data count            C:\fw\midicontroller\x011a\usb.c
001fca   6f91     MOVWF     0x91,0x1                                                                                        
                                               }//end if(...)                                                               C:\fw\midicontroller\x011a\usb.c
001fcc   0012     RETURN    0x0            }//end USBStdGetStatusHandler                                                    C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBStdFeatureReqHandler(void)                           C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This routine handles the standard SET & CLEAR FEATURES       C:\fw\midicontroller\x011a\usb.c
                                            *                  requests                                                     C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBStdFeatureReqHandler(void)                                               C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
001fce   0104     MOVLB     0x4                if((SetupPkt.bFeature == DEVICE_REMOTE_WAKEUP)&&                             C:\fw\midicontroller\x011a\usb.c
001fd0   0512     DECF      0x12,0x0,0x1                                                                                    
001fd2   e110     BNZ       0x1ff4                (SetupPkt.Recipient == RCPT_DEV))                                         C:\fw\midicontroller\x011a\usb.c
001fd4   5110     MOVF      0x10,0x0,0x1                                                                                    
001fd6   0b1f     ANDLW     0x1f                                                                                            
001fd8   0900     IORLW     0x0                                                                                             
001fda   e10c     BNZ       0x1ff4                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
001fdc   0101     MOVLB     0x1                    ctrl_trf_session_owner = MUID_USB9;                                      C:\fw\midicontroller\x011a\usb.c
001fde   0e01     MOVLW     0x1                                                                                             
001fe0   6f8c     MOVWF     0x8c,0x1                                                                                        
001fe2   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     C:\fw\midicontroller\x011a\usb.c
001fe4   0104     MOVLB     0x4                                                                                             
001fe6   5d11     SUBWF     0x11,0x0,0x1                                                                                    
001fe8   e103     BNZ       0x1ff0                                                                                          
001fea   0101     MOVLB     0x1                        usb_stat.RemoteWakeup = 1;                                           C:\fw\midicontroller\x011a\usb.c
001fec   8188     BSF       0x88,0x0,0x1                                                                                    
001fee   d002     BRA       0x1ff4                 else                                                                     C:\fw\midicontroller\x011a\usb.c
001ff0   0101     MOVLB     0x1                        usb_stat.RemoteWakeup = 0;                                           C:\fw\midicontroller\x011a\usb.c
001ff2   9188     BCF       0x88,0x0,0x1                                                                                    
                                               }//end if                                                                    C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
001ff4   0104     MOVLB     0x4                if((SetupPkt.bFeature == ENDPOINT_HALT)&&                                    C:\fw\midicontroller\x011a\usb.c
001ff6   5112     MOVF      0x12,0x0,0x1                                                                                    
001ff8   e13a     BNZ       0x206e                (SetupPkt.Recipient == RCPT_EP)&&                                         C:\fw\midicontroller\x011a\usb.c
001ffa   5110     MOVF      0x10,0x0,0x1                                                                                    
001ffc   0b1f     ANDLW     0x1f                                                                                            
001ffe   0802     SUBLW     0x2                                                                                             
002000   e136     BNZ       0x206e                                                                                          
002002   5114     MOVF      0x14,0x0,0x1          (SetupPkt.EPNum != 0))                                                    C:\fw\midicontroller\x011a\usb.c
002004   0b0f     ANDLW     0xf                                                                                             
002006   0900     IORLW     0x0                                                                                             
002008   e032     BZ        0x206e                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
00200a   0101     MOVLB     0x1                    ctrl_trf_session_owner = MUID_USB9;                                      C:\fw\midicontroller\x011a\usb.c
00200c   0e01     MOVLW     0x1                                                                                             
00200e   6f8c     MOVWF     0x8c,0x1                                                                                        
                                                   /* Must do address calculation here */                                   C:\fw\midicontroller\x011a\usb.c
002010   0104     MOVLB     0x4                    pDst.bRam = (byte*)&ep0Bo+(SetupPkt.EPNum*8)+(SetupPkt.EPDir*4);         C:\fw\midicontroller\x011a\usb.c
002012   5114     MOVF      0x14,0x0,0x1                                                                                    
002014   0b0f     ANDLW     0xf                                                                                             
002016   0d08     MULLW     0x8                                                                                             
002018   50f3     MOVF      0xf3,0x0,0x0                                                                                    
00201a   6a11     CLRF      0x11,0x0                                                                                        
00201c   0f00     ADDLW     0x0                                                                                             
00201e   6e10     MOVWF     0x10,0x0                                                                                        
002020   0e04     MOVLW     0x4                                                                                             
002022   2211     ADDWFC    0x11,0x1,0x0                                                                                    
002024   5114     MOVF      0x14,0x0,0x1                                                                                    
002026   0b80     ANDLW     0x80                                                                                            
002028   e001     BZ        0x202c                                                                                          
00202a   0e01     MOVLW     0x1                                                                                             
00202c   0d04     MULLW     0x4                                                                                             
00202e   50f3     MOVF      0xf3,0x0,0x0                                                                                    
002030   0101     MOVLB     0x1                                                                                             
002032   2410     ADDWF     0x10,0x0,0x0                                                                                    
002034   6f8f     MOVWF     0x8f,0x1                                                                                        
002036   0e00     MOVLW     0x0                                                                                             
002038   2011     ADDWFC    0x11,0x0,0x0                                                                                    
00203a   6f90     MOVWF     0x90,0x1                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
00203c   0e03     MOVLW     0x3                    if(SetupPkt.bRequest == SET_FEATURE)                                     C:\fw\midicontroller\x011a\usb.c
00203e   0104     MOVLB     0x4                                                                                             
002040   5d11     SUBWF     0x11,0x0,0x1                                                                                    
002042   e107     BNZ       0x2052                                                                                          
002044   0e84     MOVLW     0x84                       *pDst.bRam = _USIE|_BSTALL;                                          C:\fw\midicontroller\x011a\usb.c
002046   c18f     MOVFF     0x18f,0xfe9                                                                                     
002048   ffe9                                                                                                               
00204a   c190     MOVFF     0x190,0xfea                                                                                     
00204c   ffea                                                                                                               
00204e   6eef     MOVWF     0xef,0x0                                                                                        
002050   d00e     BRA       0x206e                 else                                                                     C:\fw\midicontroller\x011a\usb.c
                                                   {                                                                        C:\fw\midicontroller\x011a\usb.c
002052   af14     BTFSS     0x14,0x7,0x1               if(SetupPkt.EPDir == 1) // IN                                        C:\fw\midicontroller\x011a\usb.c
002054   d006     BRA       0x2062                                                                                          
002056   c18f     MOVFF     0x18f,0xfe9                    *pDst.bRam = _UCPU;                                              C:\fw\midicontroller\x011a\usb.c
002058   ffe9                                                                                                               
00205a   c190     MOVFF     0x190,0xfea                                                                                     
00205c   ffea                                                                                                               
00205e   6aef     CLRF      0xef,0x0                                                                                        
002060   d006     BRA       0x206e                     else                                                                 C:\fw\midicontroller\x011a\usb.c
002062   0e88     MOVLW     0x88                           *pDst.bRam = _USIE|_DAT0|_DTSEN;                                 C:\fw\midicontroller\x011a\usb.c
002064   c18f     MOVFF     0x18f,0xfe9                                                                                     
002066   ffe9                                                                                                               
002068   c190     MOVFF     0x190,0xfea                                                                                     
00206a   ffea                                                                                                               
00206c   6eef     MOVWF     0xef,0x0                                                                                        
                                                   }//end if                                                                C:\fw\midicontroller\x011a\usb.c
                                               }//end if                                                                    C:\fw\midicontroller\x011a\usb.c
00206e   0012     RETURN    0x0            }//end USBStdFeatureReqHandler                                                   C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** EOF usb9.c ***************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           //usbmmap.c                                                                      C:\fw\midicontroller\x011a\usb.c
                                           /** I N C L U D E S **********************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           #include "typedefs.h"                                                            C:\fw\midicontroller\x011a\usb.c
                                           #include "usb.h"                                                                 C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** U S B  G L O B A L  V A R I A B L E S ************************************/  C:\fw\midicontroller\x011a\usb.c
                                           #pragma udata usb5                                                               C:\fw\midicontroller\x011a\usb.c
                                           byte usb_device_state;          // Device States: DETACHED, ATTACHED, ...        C:\fw\midicontroller\x011a\usb.c
                                           USB_DEVICE_STATUS usb_stat;     // Global USB flags                              C:\fw\midicontroller\x011a\usb.c
                                           byte usb_active_cfg;            // Value of current configuration                C:\fw\midicontroller\x011a\usb.c
                                           byte usb_alt_intf[MAX_NUM_INT]; // Array to keep track of the current alternate  C:\fw\midicontroller\x011a\usb.c
                                                                           // setting for each interface ID                 C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** U S B  F I X E D  L O C A T I O N  V A R I A B L E S *********************/  C:\fw\midicontroller\x011a\usb.c
                                           //#pragma udata usbram4=0x400     //See Linker Script,usb4:0x400-0x4FF(256-byte) C:\fw\midicontroller\x011a\usb.c
                                           #pragma udata overlay usbram4=0x400     //See Linker Script,usb4:0x400-0x4FF(256-byte) C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Section A: Buffer Descriptor Table                                            C:\fw\midicontroller\x011a\usb.c
                                            * - 0x400 - 0x4FF(max)                                                          C:\fw\midicontroller\x011a\usb.c
                                            * - MAX_EP_NUMBER is defined in autofiles\usbcfg.h                              C:\fw\midicontroller\x011a\usb.c
                                            * - BDT data type is defined in system\usb\usbmmap.h                            C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(0 <= MAX_EP_NUMBER)                                                          C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep0Bo;         //Endpoint #0 BD Out                             C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep0Bi;         //Endpoint #0 BD In                              C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(1 <= MAX_EP_NUMBER)                                                          C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep1Bo;         //Endpoint #1 BD Out                             C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep1Bi;         //Endpoint #1 BD In                              C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(2 <= MAX_EP_NUMBER)                                                          C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep2Bo;         //Endpoint #2 BD Out                             C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep2Bi;         //Endpoint #2 BD In                              C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(3 <= MAX_EP_NUMBER)                                                          C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep3Bo;         //Endpoint #3 BD Out                             C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep3Bi;         //Endpoint #3 BD In                              C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(4 <= MAX_EP_NUMBER)                                                          C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep4Bo;         //Endpoint #4 BD Out                             C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep4Bi;         //Endpoint #4 BD In                              C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(5 <= MAX_EP_NUMBER)                                                          C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep5Bo;         //Endpoint #5 BD Out                             C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep5Bi;         //Endpoint #5 BD In                              C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(6 <= MAX_EP_NUMBER)                                                          C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep6Bo;         //Endpoint #6 BD Out                             C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep6Bi;         //Endpoint #6 BD In                              C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(7 <= MAX_EP_NUMBER)                                                          C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep7Bo;         //Endpoint #7 BD Out                             C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep7Bi;         //Endpoint #7 BD In                              C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(8 <= MAX_EP_NUMBER)                                                          C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep8Bo;         //Endpoint #8 BD Out                             C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep8Bi;         //Endpoint #8 BD In                              C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(9 <= MAX_EP_NUMBER)                                                          C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep9Bo;         //Endpoint #9 BD Out                             C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep9Bi;         //Endpoint #9 BD In                              C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(10 <= MAX_EP_NUMBER)                                                         C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep10Bo;        //Endpoint #10 BD Out                            C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep10Bi;        //Endpoint #10 BD In                             C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(11 <= MAX_EP_NUMBER)                                                         C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep11Bo;        //Endpoint #11 BD Out                            C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep11Bi;        //Endpoint #11 BD In                             C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(12 <= MAX_EP_NUMBER)                                                         C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep12Bo;        //Endpoint #12 BD Out                            C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep12Bi;        //Endpoint #12 BD In                             C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(13 <= MAX_EP_NUMBER)                                                         C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep13Bo;        //Endpoint #13 BD Out                            C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep13Bi;        //Endpoint #13 BD In                             C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(14 <= MAX_EP_NUMBER)                                                         C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep14Bo;        //Endpoint #14 BD Out                            C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep14Bi;        //Endpoint #14 BD In                             C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #if(15 <= MAX_EP_NUMBER)                                                         C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep15Bo;        //Endpoint #15 BD Out                            C:\fw\midicontroller\x011a\usb.c
                                           volatile far BDT ep15Bi;        //Endpoint #15 BD In                             C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Section B: EP0 Buffer Space                                                   C:\fw\midicontroller\x011a\usb.c
                                            ******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * - Two buffer areas are defined:                                               C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            *   A. CTRL_TRF_SETUP                                                           C:\fw\midicontroller\x011a\usb.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  C:\fw\midicontroller\x011a\usb.c
                                            *      - Detailed data structure allows direct adddressing of bits and bytes.   C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            *   B. CTRL_TRF_DATA                                                            C:\fw\midicontroller\x011a\usb.c
                                            *      - Size = EP0_BUFF_SIZE as defined in autofiles\usbcfg.h                  C:\fw\midicontroller\x011a\usb.c
                                            *      - Data structure allows direct adddressing of the first 8 bytes.         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * - Both data types are defined in system\usb\usbdefs\usbdefs_ep0_buff.h        C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           volatile far CTRL_TRF_SETUP SetupPkt;                                            C:\fw\midicontroller\x011a\usb.c
                                           volatile far CTRL_TRF_DATA CtrlTrfData;                                          C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Section C: HID Buffer                                                         C:\fw\midicontroller\x011a\usb.c
                                            ******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           #if defined(USB_USE_HID)                                                         C:\fw\midicontroller\x011a\usb.c
                                           volatile far unsigned char hid_report_out[HID_INT_OUT_EP_SIZE];                  C:\fw\midicontroller\x011a\usb.c
                                           volatile far unsigned char hid_report_in[HID_INT_IN_EP_SIZE];                    C:\fw\midicontroller\x011a\usb.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           #pragma udata usb5                                                               C:\fw\midicontroller\x011a\usb.c
                                           /** EOF usbmmap.c ************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           //usbctrltrf.c                                                                   C:\fw\midicontroller\x011a\usb.c
                                           /** I N C L U D E S **********************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           #include "p18f4455.h"                                                            C:\fw\midicontroller\x011a\usb.c
                                           #include "typedefs.h"                                                            C:\fw\midicontroller\x011a\usb.c
                                           #include "usb.h"                                                                 C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** V A R I A B L E S ********************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           #pragma udata usb5                                                               C:\fw\midicontroller\x011a\usb.c
                                           byte ctrl_trf_state;                // Control Transfer State                    C:\fw\midicontroller\x011a\usb.c
                                           byte ctrl_trf_session_owner;        // Current transfer session owner            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           POINTER pSrc;                       // Data source pointer                       C:\fw\midicontroller\x011a\usb.c
                                           POINTER pDst;                       // Data destination pointer                  C:\fw\midicontroller\x011a\usb.c
                                           WORD wCount;                        // Data counter                              C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBCtrlTrfSetupHandler(void);                                               C:\fw\midicontroller\x011a\usb.c
                                           void USBCtrlTrfOutHandler(void);                                                 C:\fw\midicontroller\x011a\usb.c
                                           void USBCtrlTrfInHandler(void);                                                  C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           #pragma code                                                                     C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBCtrlEPService(void)                                  C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    USTAT is loaded with a valid endpoint address.               C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        USBCtrlEPService checks for three transaction types that     C:\fw\midicontroller\x011a\usb.c
                                            *                  it knows how to service and services them:                   C:\fw\midicontroller\x011a\usb.c
                                            *                  1. EP0 SETUP                                                 C:\fw\midicontroller\x011a\usb.c
                                            *                  2. EP0 OUT                                                   C:\fw\midicontroller\x011a\usb.c
                                            *                  3. EP0 IN                                                    C:\fw\midicontroller\x011a\usb.c
                                            *                  It ignores all other types (i.e. EP1, EP2, etc.)             C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBCtrlEPService(void)                                                      C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
002070   506c     MOVF      0x6c,0x0,0x0       if(USTAT == EP00_OUT)                                                        C:\fw\midicontroller\x011a\usb.c
002072   e10b     BNZ       0x208a                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
002074   0104     MOVLB     0x4                    if(ep0Bo.Stat.PID == SETUP_TOKEN)           // EP0 SETUP                 C:\fw\midicontroller\x011a\usb.c
002076   5100     MOVF      0x0,0x0,0x1                                                                                     
002078   0b3c     ANDLW     0x3c                                                                                            
00207a   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00207c   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
00207e   080d     SUBLW     0xd                                                                                             
002080   e102     BNZ       0x2086                                                                                          
002082   d808     RCALL     0x2094                     USBCtrlTrfSetupHandler();                                            C:\fw\midicontroller\x011a\usb.c
002084   d001     BRA       0x2088                 else                                        // EP0 OUT                   C:\fw\midicontroller\x011a\usb.c
002086   d83b     RCALL     0x20fe                     USBCtrlTrfOutHandler();                                              C:\fw\midicontroller\x011a\usb.c
                                               }                                                                            C:\fw\midicontroller\x011a\usb.c
002088   d004     BRA       0x2092             else if(USTAT == EP00_IN)                       // EP0 IN                    C:\fw\midicontroller\x011a\usb.c
00208a   0e04     MOVLW     0x4                                                                                             
00208c   5c6c     SUBWF     0x6c,0x0,0x0                                                                                    
00208e   e101     BNZ       0x2092                                                                                          
002090   d846     RCALL     0x211e                 USBCtrlTrfInHandler();                                                   C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002092   0012     RETURN    0x0            }//end USBCtrlEPService                                                          C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBCtrlTrfSetupHandler(void)                            C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    SetupPkt buffer is loaded with valid USB Setup Data          C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This routine is a task dispatcher and has 3 stages.          C:\fw\midicontroller\x011a\usb.c
                                            *                  1. It initializes the control transfer state machine.        C:\fw\midicontroller\x011a\usb.c
                                            *                  2. It calls on each of the module that may know how to       C:\fw\midicontroller\x011a\usb.c
                                            *                     service the Setup Request from the host.                  C:\fw\midicontroller\x011a\usb.c
                                            *                     Module Example: USB9, HID, CDC, MSD, ...                  C:\fw\midicontroller\x011a\usb.c
                                            *                     As new classes are added, ClassReqHandler table in        C:\fw\midicontroller\x011a\usb.c
                                            *                     usbdsc.c should be updated to call all available          C:\fw\midicontroller\x011a\usb.c
                                            *                     class handlers.                                           C:\fw\midicontroller\x011a\usb.c
                                            *                  3. Once each of the modules has had a chance to check if     C:\fw\midicontroller\x011a\usb.c
                                            *                     it is responsible for servicing the request, stage 3      C:\fw\midicontroller\x011a\usb.c
                                            *                     then checks direction of the transfer to determine how    C:\fw\midicontroller\x011a\usb.c
                                            *                     to prepare EP0 for the control transfer.                  C:\fw\midicontroller\x011a\usb.c
                                            *                     Refer to USBCtrlEPServiceComplete() for more details.     C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            Microchip USB Firmware has three different states for        C:\fw\midicontroller\x011a\usb.c
                                            *                  the control transfer state machine:                          C:\fw\midicontroller\x011a\usb.c
                                            *                  1. WAIT_SETUP                                                C:\fw\midicontroller\x011a\usb.c
                                            *                  2. CTRL_TRF_TX                                               C:\fw\midicontroller\x011a\usb.c
                                            *                  3. CTRL_TRF_RX                                               C:\fw\midicontroller\x011a\usb.c
                                            *                  Refer to firmware manual to find out how one state           C:\fw\midicontroller\x011a\usb.c
                                            *                  is transitioned to another.                                  C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            *                  A Control Transfer is composed of many USB transactions.     C:\fw\midicontroller\x011a\usb.c
                                            *                  When transferring data over multiple transactions,           C:\fw\midicontroller\x011a\usb.c
                                            *                  it is important to keep track of data source, data           C:\fw\midicontroller\x011a\usb.c
                                            *                  destination, and data count. These three parameters are      C:\fw\midicontroller\x011a\usb.c
                                            *                  stored in pSrc,pDst, and wCount. A flag is used to           C:\fw\midicontroller\x011a\usb.c
                                            *                  note if the data source is from ROM or RAM.                  C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
002094   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfSetupHandler(void)                                                C:\fw\midicontroller\x011a\usb.c
002096   ffe6                                                                                                               
002098   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00209a   ffd9                                                                                                               
00209c   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
                                               byte i;                                                                      C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /* Stage 1 */                                                                C:\fw\midicontroller\x011a\usb.c
00209e   0101     MOVLB     0x1                ctrl_trf_state = WAIT_SETUP;                                                 C:\fw\midicontroller\x011a\usb.c
0020a0   6b8b     CLRF      0x8b,0x1                                                                                        
0020a2   6b8c     CLRF      0x8c,0x1           ctrl_trf_session_owner = MUID_NULL;     // Set owner to NULL                 C:\fw\midicontroller\x011a\usb.c
0020a4   6b91     CLRF      0x91,0x1           wCount._word = 0;                                                            C:\fw\midicontroller\x011a\usb.c
0020a6   6b92     CLRF      0x92,0x1                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /* Stage 2 */                                                                C:\fw\midicontroller\x011a\usb.c
0020a8   de66     RCALL     0x1d76             USBCheckStdRequest();                   // See system\usb9\usb9.c            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /* Modifiable Section */                                                     C:\fw\midicontroller\x011a\usb.c
0020aa   6adf     CLRF      0xdf,0x0           for(i=0;i < (sizeof(ClassReqHandler)/sizeof(pFunc));i++)                     C:\fw\midicontroller\x011a\usb.c
0020ac   50df     MOVF      0xdf,0x0,0x0                                                                                    
0020ae   6e10     MOVWF     0x10,0x0                                                                                        
0020b0   6a11     CLRF      0x11,0x0                                                                                        
0020b2   0e01     MOVLW     0x1                                                                                             
0020b4   5c10     SUBWF     0x10,0x0,0x0                                                                                    
0020b6   0e00     MOVLW     0x0                                                                                             
0020b8   5811     SUBWFB    0x11,0x0,0x0                                                                                    
0020ba   e21b     BC        0x20f2                                                                                          
0020ee   2adf     INCF      0xdf,0x1,0x0                                                                                    
0020f0   d7dd     BRA       0x20ac                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
0020bc   0101     MOVLB     0x1                    if(ctrl_trf_session_owner != MUID_NULL)break;                            C:\fw\midicontroller\x011a\usb.c
0020be   518c     MOVF      0x8c,0x0,0x1                                                                                    
0020c0   e001     BZ        0x20c4                                                                                          
0020c2   d017     BRA       0x20f2                                                                                          
0020c4   6af7     CLRF      0xf7,0x0               ClassReqHandler[i]();               // See autofiles\usbdsc.c            C:\fw\midicontroller\x011a\usb.c
0020c6   34df     RLCF      0xdf,0x0,0x0                                                                                    
0020c8   0bfe     ANDLW     0xfe                                                                                            
0020ca   36f7     RLCF      0xf7,0x1,0x0                                                                                    
0020cc   6ef6     MOVWF     0xf6,0x0                                                                                        
0020ce   0ed1     MOVLW     0xd1                                                                                            
0020d0   26f6     ADDWF     0xf6,0x1,0x0                                                                                    
0020d2   0e33     MOVLW     0x33                                                                                            
0020d4   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
0020d6   0009     TBLRDPOSTINC                                                                                              
0020d8   cff5     MOVFF     0xff5,0x10                                                                                      
0020da   f010                                                                                                               
0020dc   0008     TBLRD                                                                                                     
0020de   cff5     MOVFF     0xff5,0x11                                                                                      
0020e0   f011                                                                                                               
0020e2   d004     BRA       0x20ec                                                                                          
0020e4   c011     MOVFF     0x11,0xffa                                                                                      
0020e6   fffa                                                                                                               
0020e8   5010     MOVF      0x10,0x0,0x0                                                                                    
0020ea   6ef9     MOVWF     0xf9,0x0                                                                                        
0020ec   dffb     RCALL     0x20e4                                                                                          
                                               }//end while                                                                 C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /* End Modifiable Section */                                                 C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /* Stage 3 */                                                                C:\fw\midicontroller\x011a\usb.c
0020f2   d8df     RCALL     0x22b2             USBCtrlEPServiceComplete();                                                  C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
0020f4   52e5     MOVF      0xe5,0x1,0x0   }//end USBCtrlTrfSetupHandler                                                    C:\fw\midicontroller\x011a\usb.c
0020f6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0020f8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0020fa   ffd9                                                                                                               
0020fc   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBCtrlTrfOutHandler(void)                              C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This routine handles an OUT transaction according to         C:\fw\midicontroller\x011a\usb.c
                                            *                  which control transfer state is currently active.            C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            Note that if the the control transfer was from               C:\fw\midicontroller\x011a\usb.c
                                            *                  host to device, the session owner should be notified         C:\fw\midicontroller\x011a\usb.c
                                            *                  at the end of each OUT transaction to service the            C:\fw\midicontroller\x011a\usb.c
                                            *                  received data.                                               C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBCtrlTrfOutHandler(void)                                                  C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
0020fe   0e02     MOVLW     0x2                if(ctrl_trf_state == CTRL_TRF_RX)                                            C:\fw\midicontroller\x011a\usb.c
002100   0101     MOVLB     0x1                                                                                             
002102   5d8b     SUBWF     0x8b,0x0,0x1                                                                                    
002104   e10a     BNZ       0x211a                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
002106   d898     RCALL     0x2238                 USBCtrlTrfRxService();                                                   C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                   /*                                                                       C:\fw\midicontroller\x011a\usb.c
                                                    * Don't have to worry about overwriting _KEEP bit                       C:\fw\midicontroller\x011a\usb.c
                                                    * because if _KEEP was set, TRNIF would not have been                   C:\fw\midicontroller\x011a\usb.c
                                                    * generated in the first place.                                         C:\fw\midicontroller\x011a\usb.c
                                                    */                                                                      C:\fw\midicontroller\x011a\usb.c
002108   0104     MOVLB     0x4                    if(ep0Bo.Stat.DTS == 0)                                                  C:\fw\midicontroller\x011a\usb.c
00210a   bd00     BTFSC     0x0,0x6,0x1                                                                                     
00210c   d003     BRA       0x2114                                                                                          
00210e   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\fw\midicontroller\x011a\usb.c
002110   6f00     MOVWF     0x0,0x1                                                                                         
002112   d002     BRA       0x2118                 else                                                                     C:\fw\midicontroller\x011a\usb.c
002114   0e88     MOVLW     0x88                       ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;                               C:\fw\midicontroller\x011a\usb.c
002116   6f00     MOVWF     0x0,0x1                                                                                         
                                               }                                                                            C:\fw\midicontroller\x011a\usb.c
002118   d001     BRA       0x211c             else    // CTRL_TRF_TX                                                       C:\fw\midicontroller\x011a\usb.c
00211a   d90e     RCALL     0x2338                 USBPrepareForNextSetupTrf();                                             C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
00211c   0012     RETURN    0x0            }//end USBCtrlTrfOutHandler                                                      C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBCtrlTrfInHandler(void)                               C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This routine handles an IN transaction according to          C:\fw\midicontroller\x011a\usb.c
                                            *                  which control transfer state is currently active.            C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            A Set Address Request must not change the acutal address     C:\fw\midicontroller\x011a\usb.c
                                            *                  of the device until the completion of the control            C:\fw\midicontroller\x011a\usb.c
                                            *                  transfer. The end of the control transfer for Set Address    C:\fw\midicontroller\x011a\usb.c
                                            *                  Request is an IN transaction. Therefore it is necessary      C:\fw\midicontroller\x011a\usb.c
                                            *                  to service this unique situation when the condition is       C:\fw\midicontroller\x011a\usb.c
                                            *                  right. Macro mUSBCheckAdrPendingState is defined in          C:\fw\midicontroller\x011a\usb.c
                                            *                  usb9.h and its function is to specifically service this      C:\fw\midicontroller\x011a\usb.c
                                            *                  event.                                                       C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBCtrlTrfInHandler(void)                                                   C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
00211e   0e04     MOVLW     0x4                mUSBCheckAdrPendingState();         // Must check if in ADR_PENDING_STATE    C:\fw\midicontroller\x011a\usb.c
002120   0101     MOVLB     0x1                                                                                             
002122   5d87     SUBWF     0x87,0x0,0x1                                                                                    
002124   e10a     BNZ       0x213a                                                                                          
002126   c412     MOVFF     0x412,0xf6e                                                                                     
002128   ff6e                                                                                                               
00212a   506e     MOVF      0x6e,0x0,0x0                                                                                    
00212c   0800     SUBLW     0x0                                                                                             
00212e   e203     BC        0x2136                                                                                          
002130   0e05     MOVLW     0x5                                                                                             
002132   6f87     MOVWF     0x87,0x1                                                                                        
002134   d002     BRA       0x213a                                                                                          
002136   0e03     MOVLW     0x3                                                                                             
002138   6f87     MOVWF     0x87,0x1                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
00213a   058b     DECF      0x8b,0x0,0x1       if(ctrl_trf_state == CTRL_TRF_TX)                                            C:\fw\midicontroller\x011a\usb.c
00213c   e10a     BNZ       0x2152                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
00213e   d811     RCALL     0x2162                 USBCtrlTrfTxService();                                                   C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002140   0104     MOVLB     0x4                    if(ep0Bi.Stat.DTS == 0)                                                  C:\fw\midicontroller\x011a\usb.c
002142   bd04     BTFSC     0x4,0x6,0x1                                                                                     
002144   d003     BRA       0x214c                                                                                          
002146   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\fw\midicontroller\x011a\usb.c
002148   6f04     MOVWF     0x4,0x1                                                                                         
00214a   d002     BRA       0x2150                 else                                                                     C:\fw\midicontroller\x011a\usb.c
00214c   0e88     MOVLW     0x88                       ep0Bi.Stat._byte = _USIE|_DAT0|_DTSEN;                               C:\fw\midicontroller\x011a\usb.c
00214e   6f04     MOVWF     0x4,0x1                                                                                         
                                               }                                                                            C:\fw\midicontroller\x011a\usb.c
002150   d007     BRA       0x2160             else { // CTRL_TRF_RX                                                        C:\fw\midicontroller\x011a\usb.c
                                           //Rawin's code change to handle setreport data:                                  C:\fw\midicontroller\x011a\usb.c
002152   0e09     MOVLW     0x9            		if (SetupPkt.bRequest == SET_REPORT) {                                         C:\fw\midicontroller\x011a\usb.c
002154   0104     MOVLB     0x4                                                                                             
002156   5d11     SUBWF     0x11,0x0,0x1                                                                                    
002158   e102     BNZ       0x215e                                                                                          
00215a   ec87     CALL      0x310e,0x0     			HIDSetReportHandler();                                                        C:\fw\midicontroller\x011a\usb.c
00215c   f018                                                                                                               
                                           		}                                                                              C:\fw\midicontroller\x011a\usb.c
00215e   d8ec     RCALL     0x2338         		USBPrepareForNextSetupTrf();                                                   C:\fw\midicontroller\x011a\usb.c
                                           	}                                                                               C:\fw\midicontroller\x011a\usb.c
002160   0012     RETURN    0x0            }//end USBCtrlTrfInHandler                                                       C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBCtrlTrfTxService(void)                               C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    pSrc, wCount, and usb_stat.ctrl_trf_mem are setup properly.  C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This routine should be called from only two places.          C:\fw\midicontroller\x011a\usb.c
                                            *                  One from USBCtrlEPServiceComplete() and one from             C:\fw\midicontroller\x011a\usb.c
                                            *                  USBCtrlTrfInHandler(). It takes care of managing a           C:\fw\midicontroller\x011a\usb.c
                                            *                  transfer over multiple USB transactions.                     C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            This routine works with isochronous endpoint larger than     C:\fw\midicontroller\x011a\usb.c
                                            *                  256 bytes and is shown here as an example of how to deal     C:\fw\midicontroller\x011a\usb.c
                                            *                  with BC9 and BC8. In reality, a control endpoint can never   C:\fw\midicontroller\x011a\usb.c
                                            *                  be larger than 64 bytes.                                     C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
002162   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfTxService(void)                                                   C:\fw\midicontroller\x011a\usb.c
002164   ffe6                                                                                                               
002166   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002168   ffd9                                                                                                               
00216a   0e02     MOVLW     0x2                                                                                             
00216c   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
                                               WORD byte_to_send;                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * First, have to figure out how many byte of data to send.                  C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
00216e   0101     MOVLB     0x1                if(wCount._word < EP0_BUFF_SIZE)                                             C:\fw\midicontroller\x011a\usb.c
002170   0e40     MOVLW     0x40                                                                                            
002172   5d91     SUBWF     0x91,0x0,0x1                                                                                    
002174   0e00     MOVLW     0x0                                                                                             
002176   5992     SUBWFB    0x92,0x0,0x1                                                                                    
002178   e205     BC        0x2184                                                                                          
00217a   c191     MOVFF     0x191,0xfde            byte_to_send._word = wCount._word;                                       C:\fw\midicontroller\x011a\usb.c
00217c   ffde                                                                                                               
00217e   c192     MOVFF     0x192,0xfdd                                                                                     
002180   ffdd                                                                                                               
002182   d003     BRA       0x218a             else                                                                         C:\fw\midicontroller\x011a\usb.c
002184   0e40     MOVLW     0x40                   byte_to_send._word = EP0_BUFF_SIZE;                                      C:\fw\midicontroller\x011a\usb.c
002186   6ede     MOVWF     0xde,0x0                                                                                        
002188   6add     CLRF      0xdd,0x0                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * Next, load the number of bytes to send to BC9..0 in buffer descriptor     C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
00218a   0104     MOVLB     0x4                ep0Bi.Stat.BC9 = 0;                                                          C:\fw\midicontroller\x011a\usb.c
00218c   9304     BCF       0x4,0x1,0x1                                                                                     
00218e   9104     BCF       0x4,0x0,0x1        ep0Bi.Stat.BC8 = 0;                                                          C:\fw\midicontroller\x011a\usb.c
002190   0e01     MOVLW     0x1                ep0Bi.Stat._byte |= MSB(byte_to_send);                                       C:\fw\midicontroller\x011a\usb.c
002192   50db     MOVF      0xdb,0x0,0x0                                                                                    
002194   1304     IORWF     0x4,0x1,0x1                                                                                     
002196   cfdf     MOVFF     0xfdf,0x405        ep0Bi.Cnt = LSB(byte_to_send);                                               C:\fw\midicontroller\x011a\usb.c
002198   f405                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * Subtract the number of bytes just about to be sent from the total.        C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
00219a   0e00     MOVLW     0x0                wCount._word = wCount._word - byte_to_send._word;                            C:\fw\midicontroller\x011a\usb.c
00219c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00219e   0101     MOVLB     0x1                                                                                             
0021a0   5f91     SUBWF     0x91,0x1,0x1                                                                                    
0021a2   0e01     MOVLW     0x1                                                                                             
0021a4   50db     MOVF      0xdb,0x0,0x0                                                                                    
0021a6   5b92     SUBWFB    0x92,0x1,0x1                                                                                    
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
0021a8   0e50     MOVLW     0x50               pDst.bRam = (byte*)&CtrlTrfData;        // Set destination pointer           C:\fw\midicontroller\x011a\usb.c
0021aa   6f8f     MOVWF     0x8f,0x1                                                                                        
0021ac   0e04     MOVLW     0x4                                                                                             
0021ae   6f90     MOVWF     0x90,0x1                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
0021b0   a388     BTFSS     0x88,0x1,0x1       if(usb_stat.ctrl_trf_mem == _ROM)       // Determine type of memory source   C:\fw\midicontroller\x011a\usb.c
0021b2   d01d     BRA       0x21ee                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
0021b4   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                C:\fw\midicontroller\x011a\usb.c
0021b6   ffe9                                                                                                               
0021b8   cfda     MOVFF     0xfda,0xfea                                                                                     
0021ba   ffea                                                                                                               
0021bc   50ee     MOVF      0xee,0x0,0x0                                                                                    
0021be   10ed     IORWF     0xed,0x0,0x0                                                                                    
0021c0   e015     BZ        0x21ec                                                                                          
0021ea   d7e4     BRA       0x21b4                                                                                          
                                                   {                                                                        C:\fw\midicontroller\x011a\usb.c
0021c2   c18d     MOVFF     0x18d,0xff6                *pDst.bRam = *pSrc.bRom;                                             C:\fw\midicontroller\x011a\usb.c
0021c4   fff6                                                                                                               
0021c6   c18e     MOVFF     0x18e,0xff7                                                                                     
0021c8   fff7                                                                                                               
0021ca   0008     TBLRD                                                                                                     
0021cc   50f5     MOVF      0xf5,0x0,0x0                                                                                    
0021ce   c18f     MOVFF     0x18f,0xfe9                                                                                     
0021d0   ffe9                                                                                                               
0021d2   c190     MOVFF     0x190,0xfea                                                                                     
0021d4   ffea                                                                                                               
0021d6   6eef     MOVWF     0xef,0x0                                                                                        
0021d8   2b8f     INCF      0x8f,0x1,0x1               pDst.bRam++;                                                         C:\fw\midicontroller\x011a\usb.c
0021da   0e00     MOVLW     0x0                                                                                             
0021dc   2390     ADDWFC    0x90,0x1,0x1                                                                                    
0021de   2b8d     INCF      0x8d,0x1,0x1               pSrc.bRom++;                                                         C:\fw\midicontroller\x011a\usb.c
0021e0   238e     ADDWFC    0x8e,0x1,0x1                                                                                    
0021e2   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                C:\fw\midicontroller\x011a\usb.c
0021e4   0e01     MOVLW     0x1                                                                                             
0021e6   e201     BC        0x21ea                                                                                          
0021e8   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         C:\fw\midicontroller\x011a\usb.c
                                               }                                                                            C:\fw\midicontroller\x011a\usb.c
0021ec   d01b     BRA       0x2224             else // RAM                                                                  C:\fw\midicontroller\x011a\usb.c
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
0021ee   cfd9     MOVFF     0xfd9,0xfe9            while(byte_to_send._word)                                                C:\fw\midicontroller\x011a\usb.c
0021f0   ffe9                                                                                                               
0021f2   cfda     MOVFF     0xfda,0xfea                                                                                     
0021f4   ffea                                                                                                               
0021f6   50ee     MOVF      0xee,0x0,0x0                                                                                    
0021f8   10ed     IORWF     0xed,0x0,0x0                                                                                    
0021fa   e014     BZ        0x2224                                                                                          
002222   d7e5     BRA       0x21ee                                                                                          
                                                   {                                                                        C:\fw\midicontroller\x011a\usb.c
0021fc   c18d     MOVFF     0x18d,0xfe9                *pDst.bRam = *pSrc.bRam;                                             C:\fw\midicontroller\x011a\usb.c
0021fe   ffe9                                                                                                               
002200   c18e     MOVFF     0x18e,0xfea                                                                                     
002202   ffea                                                                                                               
002204   50ef     MOVF      0xef,0x0,0x0                                                                                    
002206   c18f     MOVFF     0x18f,0xfe9                                                                                     
002208   ffe9                                                                                                               
00220a   c190     MOVFF     0x190,0xfea                                                                                     
00220c   ffea                                                                                                               
00220e   6eef     MOVWF     0xef,0x0                                                                                        
002210   2b8f     INCF      0x8f,0x1,0x1               pDst.bRam++;                                                         C:\fw\midicontroller\x011a\usb.c
002212   0e00     MOVLW     0x0                                                                                             
002214   2390     ADDWFC    0x90,0x1,0x1                                                                                    
002216   2b8d     INCF      0x8d,0x1,0x1               pSrc.bRam++;                                                         C:\fw\midicontroller\x011a\usb.c
002218   238e     ADDWFC    0x8e,0x1,0x1                                                                                    
00221a   06df     DECF      0xdf,0x1,0x0               byte_to_send._word--;                                                C:\fw\midicontroller\x011a\usb.c
00221c   0e01     MOVLW     0x1                                                                                             
00221e   e201     BC        0x2222                                                                                          
002220   06db     DECF      0xdb,0x1,0x0                                                                                    
                                                   }//end while(byte_to_send._word)                                         C:\fw\midicontroller\x011a\usb.c
                                               }//end if(usb_stat.ctrl_trf_mem == _ROM)                                     C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002224   0e02     MOVLW     0x2            }//end USBCtrlTrfTxService                                                       C:\fw\midicontroller\x011a\usb.c
002226   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
002228   e202     BC        0x222e                                                                                          
00222a   6ae1     CLRF      0xe1,0x0                                                                                        
00222c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00222e   6ee1     MOVWF     0xe1,0x0                                                                                        
002230   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002232   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002234   ffd9                                                                                                               
002236   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBCtrlTrfRxService(void)                               C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    pDst and wCount are setup properly.                          C:\fw\midicontroller\x011a\usb.c
                                            *                  pSrc is always &CtrlTrfData                                  C:\fw\midicontroller\x011a\usb.c
                                            *                  usb_stat.ctrl_trf_mem is always _RAM.                        C:\fw\midicontroller\x011a\usb.c
                                            *                  wCount should be set to 0 at the start of each control       C:\fw\midicontroller\x011a\usb.c
                                            *                  transfer.                                                    C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        *** This routine is only partially complete. Check for       C:\fw\midicontroller\x011a\usb.c
                                            *                  new version of the firmware.                                 C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
002238   cfd9     MOVFF     0xfd9,0xfe6    void USBCtrlTrfRxService(void)                                                   C:\fw\midicontroller\x011a\usb.c
00223a   ffe6                                                                                                               
00223c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00223e   ffd9                                                                                                               
002240   0e02     MOVLW     0x2                                                                                             
002242   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
                                               WORD byte_to_read;                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002244   0e03     MOVLW     0x3                MSB(byte_to_read) = 0x03 & ep0Bo.Stat._byte;    // Filter out last 2 bits    C:\fw\midicontroller\x011a\usb.c
002246   0104     MOVLB     0x4                                                                                             
002248   1500     ANDWF     0x0,0x0,0x1                                                                                     
00224a   6ee7     MOVWF     0xe7,0x0                                                                                        
00224c   0e01     MOVLW     0x1                                                                                             
00224e   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
002250   ffdb                                                                                                               
002252   c401     MOVFF     0x401,0xfdf        LSB(byte_to_read) = ep0Bo.Cnt;                                               C:\fw\midicontroller\x011a\usb.c
002254   ffdf                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * Accumulate total number of bytes read                                     C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
002256   50de     MOVF      0xde,0x0,0x0       wCount._word = wCount._word + byte_to_read._word;                            C:\fw\midicontroller\x011a\usb.c
002258   0101     MOVLB     0x1                                                                                             
00225a   2791     ADDWF     0x91,0x1,0x1                                                                                    
00225c   50dd     MOVF      0xdd,0x0,0x0                                                                                    
00225e   2392     ADDWFC    0x92,0x1,0x1                                                                                    
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002260   0e50     MOVLW     0x50               pSrc.bRam = (byte*)&CtrlTrfData;                                             C:\fw\midicontroller\x011a\usb.c
002262   6f8d     MOVWF     0x8d,0x1                                                                                        
002264   0e04     MOVLW     0x4                                                                                             
002266   6f8e     MOVWF     0x8e,0x1                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002268   cfd9     MOVFF     0xfd9,0xfe9        while(byte_to_read._word)                                                    C:\fw\midicontroller\x011a\usb.c
00226a   ffe9                                                                                                               
00226c   cfda     MOVFF     0xfda,0xfea                                                                                     
00226e   ffea                                                                                                               
002270   50ee     MOVF      0xee,0x0,0x0                                                                                    
002272   10ed     IORWF     0xed,0x0,0x0                                                                                    
002274   e014     BZ        0x229e                                                                                          
00229c   d7e5     BRA       0x2268                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
002276   c18d     MOVFF     0x18d,0xfe9            *pDst.bRam = *pSrc.bRam;                                                 C:\fw\midicontroller\x011a\usb.c
002278   ffe9                                                                                                               
00227a   c18e     MOVFF     0x18e,0xfea                                                                                     
00227c   ffea                                                                                                               
00227e   50ef     MOVF      0xef,0x0,0x0                                                                                    
002280   c18f     MOVFF     0x18f,0xfe9                                                                                     
002282   ffe9                                                                                                               
002284   c190     MOVFF     0x190,0xfea                                                                                     
002286   ffea                                                                                                               
002288   6eef     MOVWF     0xef,0x0                                                                                        
00228a   2b8f     INCF      0x8f,0x1,0x1           pDst.bRam++;                                                             C:\fw\midicontroller\x011a\usb.c
00228c   0e00     MOVLW     0x0                                                                                             
00228e   2390     ADDWFC    0x90,0x1,0x1                                                                                    
002290   2b8d     INCF      0x8d,0x1,0x1           pSrc.bRam++;                                                             C:\fw\midicontroller\x011a\usb.c
002292   238e     ADDWFC    0x8e,0x1,0x1                                                                                    
002294   06df     DECF      0xdf,0x1,0x0           byte_to_read._word--;                                                    C:\fw\midicontroller\x011a\usb.c
002296   0e01     MOVLW     0x1                                                                                             
002298   e201     BC        0x229c                                                                                          
00229a   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while(byte_to_read._word)                                             C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
00229e   0e02     MOVLW     0x2            }//end USBCtrlTrfRxService                                                       C:\fw\midicontroller\x011a\usb.c
0022a0   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0022a2   e202     BC        0x22a8                                                                                          
0022a4   6ae1     CLRF      0xe1,0x0                                                                                        
0022a6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0022a8   6ee1     MOVWF     0xe1,0x0                                                                                        
0022aa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0022ac   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0022ae   ffd9                                                                                                               
0022b0   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBCtrlEPServiceComplete(void)                          C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This routine wrap up the ramaining tasks in servicing        C:\fw\midicontroller\x011a\usb.c
                                            *                  a Setup Request. Its main task is to set the endpoint        C:\fw\midicontroller\x011a\usb.c
                                            *                  controls appropriately for a given situation. See code       C:\fw\midicontroller\x011a\usb.c
                                            *                  below.                                                       C:\fw\midicontroller\x011a\usb.c
                                            *                  There are three main scenarios:                              C:\fw\midicontroller\x011a\usb.c
                                            *                  a) There was no handler for the Request, in this case        C:\fw\midicontroller\x011a\usb.c
                                            *                     a STALL should be sent out.                               C:\fw\midicontroller\x011a\usb.c
                                            *                  b) The host has requested a read control transfer,           C:\fw\midicontroller\x011a\usb.c
                                            *                     endpoints are required to be setup in a specific way.     C:\fw\midicontroller\x011a\usb.c
                                            *                  c) The host has requested a write control transfer, or       C:\fw\midicontroller\x011a\usb.c
                                            *                     a control data stage is not required, endpoints are       C:\fw\midicontroller\x011a\usb.c
                                            *                     required to be setup in a specific way.                   C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            *                  Packet processing is resumed by clearing PKTDIS bit.         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBCtrlEPServiceComplete(void)                                              C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
0022b2   0101     MOVLB     0x1                if(ctrl_trf_session_owner == MUID_NULL)                                      C:\fw\midicontroller\x011a\usb.c
0022b4   518c     MOVF      0x8c,0x0,0x1                                                                                    
0022b6   e10b     BNZ       0x22ce                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
                                                   /*                                                                       C:\fw\midicontroller\x011a\usb.c
                                                    * If no one knows how to service this request then stall.               C:\fw\midicontroller\x011a\usb.c
                                                    * Must also prepare EP0 to receive the next SETUP transaction.          C:\fw\midicontroller\x011a\usb.c
                                                    */                                                                      C:\fw\midicontroller\x011a\usb.c
0022b8   0104     MOVLB     0x4                    ep0Bo.Cnt = EP0_BUFF_SIZE;                                               C:\fw\midicontroller\x011a\usb.c
0022ba   0e40     MOVLW     0x40                                                                                            
0022bc   6f01     MOVWF     0x1,0x1                                                                                         
0022be   0e10     MOVLW     0x10                   ep0Bo.ADR = (byte*)&SetupPkt;                                            C:\fw\midicontroller\x011a\usb.c
0022c0   6f02     MOVWF     0x2,0x1                                                                                         
0022c2   0e04     MOVLW     0x4                                                                                             
0022c4   6f03     MOVWF     0x3,0x1                                                                                         
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
0022c6   0e84     MOVLW     0x84                   ep0Bo.Stat._byte = _USIE|_BSTALL;                                        C:\fw\midicontroller\x011a\usb.c
0022c8   6f00     MOVWF     0x0,0x1                                                                                         
0022ca   6f04     MOVWF     0x4,0x1                ep0Bi.Stat._byte = _USIE|_BSTALL;                                        C:\fw\midicontroller\x011a\usb.c
                                               }                                                                            C:\fw\midicontroller\x011a\usb.c
0022cc   d033     BRA       0x2334             else    // A module has claimed ownership of the control transfer session.   C:\fw\midicontroller\x011a\usb.c
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
0022ce   0104     MOVLB     0x4                    if(SetupPkt.DataDir == DEV_TO_HOST)                                      C:\fw\midicontroller\x011a\usb.c
0022d0   af10     BTFSS     0x10,0x7,0x1                                                                                    
0022d2   d021     BRA       0x2316                                                                                          
                                                   {                                                                        C:\fw\midicontroller\x011a\usb.c
0022d4   0101     MOVLB     0x1                        if(SetupPkt.wLength < wCount._word)                                  C:\fw\midicontroller\x011a\usb.c
0022d6   5191     MOVF      0x91,0x0,0x1                                                                                    
0022d8   0104     MOVLB     0x4                                                                                             
0022da   5d16     SUBWF     0x16,0x0,0x1                                                                                    
0022dc   0101     MOVLB     0x1                                                                                             
0022de   5192     MOVF      0x92,0x0,0x1                                                                                    
0022e0   0104     MOVLB     0x4                                                                                             
0022e2   5917     SUBWFB    0x17,0x0,0x1                                                                                    
0022e4   e204     BC        0x22ee                                                                                          
0022e6   c416     MOVFF     0x416,0x191                    wCount._word = SetupPkt.wLength;                                 C:\fw\midicontroller\x011a\usb.c
0022e8   f191                                                                                                               
0022ea   c417     MOVFF     0x417,0x192                                                                                     
0022ec   f192                                                                                                               
0022ee   df39     RCALL     0x2162                     USBCtrlTrfTxService();                                               C:\fw\midicontroller\x011a\usb.c
0022f0   0101     MOVLB     0x1                        ctrl_trf_state = CTRL_TRF_TX;                                        C:\fw\midicontroller\x011a\usb.c
0022f2   0e01     MOVLW     0x1                                                                                             
0022f4   6f8b     MOVWF     0x8b,0x1                                                                                        
                                                       /*                                                                   C:\fw\midicontroller\x011a\usb.c
                                                        * Control Read:                                                     C:\fw\midicontroller\x011a\usb.c
                                                        * <SETUP[0]><IN[1]><IN[0]>...<OUT[1]> | <SETUP[0]>                  C:\fw\midicontroller\x011a\usb.c
                                                        * 1. Prepare OUT EP to respond to early termination                 C:\fw\midicontroller\x011a\usb.c
                                                        *                                                                   C:\fw\midicontroller\x011a\usb.c
                                                        * NOTE:                                                             C:\fw\midicontroller\x011a\usb.c
                                                        * If something went wrong during the control transfer,              C:\fw\midicontroller\x011a\usb.c
                                                        * the last status stage may not be sent by the host.                C:\fw\midicontroller\x011a\usb.c
                                                        * When this happens, two different things could happen              C:\fw\midicontroller\x011a\usb.c
                                                        * depending on the host.                                            C:\fw\midicontroller\x011a\usb.c
                                                        * a) The host could send out a RESET.                               C:\fw\midicontroller\x011a\usb.c
                                                        * b) The host could send out a new SETUP transaction                C:\fw\midicontroller\x011a\usb.c
                                                        *    without sending a RESET first.                                 C:\fw\midicontroller\x011a\usb.c
                                                        * To properly handle case (b), the OUT EP must be setup             C:\fw\midicontroller\x011a\usb.c
                                                        * to receive either a zero length OUT transaction, or a             C:\fw\midicontroller\x011a\usb.c
                                                        * new SETUP transaction.                                            C:\fw\midicontroller\x011a\usb.c
                                                        *                                                                   C:\fw\midicontroller\x011a\usb.c
                                                        * Since the SETUP transaction requires the DTS bit to be            C:\fw\midicontroller\x011a\usb.c
                                                        * DAT0 while the zero length OUT status requires the DTS            C:\fw\midicontroller\x011a\usb.c
                                                        * bit to be DAT1, the DTS bit check by the hardware should          C:\fw\midicontroller\x011a\usb.c
                                                        * be disabled. This way the SIE could accept either of              C:\fw\midicontroller\x011a\usb.c
                                                        * the two transactions.                                             C:\fw\midicontroller\x011a\usb.c
                                                        *                                                                   C:\fw\midicontroller\x011a\usb.c
                                                        * Furthermore, the Cnt byte should be set to prepare for            C:\fw\midicontroller\x011a\usb.c
                                                        * the SETUP data (8-byte or more), and the buffer address           C:\fw\midicontroller\x011a\usb.c
                                                        * should be pointed to SetupPkt.                                    C:\fw\midicontroller\x011a\usb.c
                                                        */                                                                  C:\fw\midicontroller\x011a\usb.c
0022f6   0104     MOVLB     0x4                        ep0Bo.Cnt = EP0_BUFF_SIZE;                                           C:\fw\midicontroller\x011a\usb.c
0022f8   0e40     MOVLW     0x40                                                                                            
0022fa   6f01     MOVWF     0x1,0x1                                                                                         
0022fc   0e10     MOVLW     0x10                       ep0Bo.ADR = (byte*)&SetupPkt;                                        C:\fw\midicontroller\x011a\usb.c
0022fe   6f02     MOVWF     0x2,0x1                                                                                         
002300   0e04     MOVLW     0x4                                                                                             
002302   6f03     MOVWF     0x3,0x1                                                                                         
002304   0e80     MOVLW     0x80                       ep0Bo.Stat._byte = _USIE;           // Note: DTSEN is 0!             C:\fw\midicontroller\x011a\usb.c
002306   6f00     MOVWF     0x0,0x1                                                                                         
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                       /*                                                                   C:\fw\midicontroller\x011a\usb.c
                                                        * 2. Prepare IN EP to transfer data, Cnt should have                C:\fw\midicontroller\x011a\usb.c
                                                        *    been initialized by responsible request owner.                 C:\fw\midicontroller\x011a\usb.c
                                                        */                                                                  C:\fw\midicontroller\x011a\usb.c
002308   0e50     MOVLW     0x50                       ep0Bi.ADR = (byte*)&CtrlTrfData;                                     C:\fw\midicontroller\x011a\usb.c
00230a   6f06     MOVWF     0x6,0x1                                                                                         
00230c   0e04     MOVLW     0x4                                                                                             
00230e   6f07     MOVWF     0x7,0x1                                                                                         
002310   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\fw\midicontroller\x011a\usb.c
002312   6f04     MOVWF     0x4,0x1                                                                                         
                                                   }                                                                        C:\fw\midicontroller\x011a\usb.c
002314   d00f     BRA       0x2334                 else    // (SetupPkt.DataDir == HOST_TO_DEV)                             C:\fw\midicontroller\x011a\usb.c
                                                   {                                                                        C:\fw\midicontroller\x011a\usb.c
002316   0101     MOVLB     0x1                        ctrl_trf_state = CTRL_TRF_RX;                                        C:\fw\midicontroller\x011a\usb.c
002318   0e02     MOVLW     0x2                                                                                             
00231a   6f8b     MOVWF     0x8b,0x1                                                                                        
                                                       /*                                                                   C:\fw\midicontroller\x011a\usb.c
                                                        * Control Write:                                                    C:\fw\midicontroller\x011a\usb.c
                                                        * <SETUP[0]><OUT[1]><OUT[0]>...<IN[1]> | <SETUP[0]>                 C:\fw\midicontroller\x011a\usb.c
                                                        *                                                                   C:\fw\midicontroller\x011a\usb.c
                                                        * 1. Prepare IN EP to respond to early termination                  C:\fw\midicontroller\x011a\usb.c
                                                        *                                                                   C:\fw\midicontroller\x011a\usb.c
                                                        *    This is the same as a Zero Length Packet Response              C:\fw\midicontroller\x011a\usb.c
                                                        *    for control transfer without a data stage                      C:\fw\midicontroller\x011a\usb.c
                                                        */                                                                  C:\fw\midicontroller\x011a\usb.c
00231c   0104     MOVLB     0x4                        ep0Bi.Cnt = 0;                                                       C:\fw\midicontroller\x011a\usb.c
00231e   6b05     CLRF      0x5,0x1                                                                                         
002320   0ec8     MOVLW     0xc8                       ep0Bi.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\fw\midicontroller\x011a\usb.c
002322   6f04     MOVWF     0x4,0x1                                                                                         
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                       /*                                                                   C:\fw\midicontroller\x011a\usb.c
                                                        * 2. Prepare OUT EP to receive data.                                C:\fw\midicontroller\x011a\usb.c
                                                        */                                                                  C:\fw\midicontroller\x011a\usb.c
002324   0e40     MOVLW     0x40                       ep0Bo.Cnt = EP0_BUFF_SIZE;                                           C:\fw\midicontroller\x011a\usb.c
002326   6f01     MOVWF     0x1,0x1                                                                                         
002328   0e50     MOVLW     0x50                       ep0Bo.ADR = (byte*)&CtrlTrfData;                                     C:\fw\midicontroller\x011a\usb.c
00232a   6f02     MOVWF     0x2,0x1                                                                                         
00232c   0e04     MOVLW     0x4                                                                                             
00232e   6f03     MOVWF     0x3,0x1                                                                                         
002330   0ec8     MOVLW     0xc8                       ep0Bo.Stat._byte = _USIE|_DAT1|_DTSEN;                               C:\fw\midicontroller\x011a\usb.c
002332   6f00     MOVWF     0x0,0x1                                                                                         
                                                   }//end if(SetupPkt.DataDir == DEV_TO_HOST)                               C:\fw\midicontroller\x011a\usb.c
                                               }//end if(ctrl_trf_session_owner == MUID_NULL)                               C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * PKTDIS bit is set when a Setup Transaction is received.                   C:\fw\midicontroller\x011a\usb.c
                                                * Clear to resume packet processing.                                        C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
002334   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;                                                         C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002336   0012     RETURN    0x0            }//end USBCtrlEPServiceComplete                                                  C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBPrepareForNextSetupTrf(void)                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        The routine forces EP0 OUT to be ready for a new Setup       C:\fw\midicontroller\x011a\usb.c
                                            *                  transaction, and forces EP0 IN to be owned by CPU.           C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBPrepareForNextSetupTrf(void)                                             C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
002338   0101     MOVLB     0x1                ctrl_trf_state = WAIT_SETUP;            // See usbctrltrf.h                  C:\fw\midicontroller\x011a\usb.c
00233a   6b8b     CLRF      0x8b,0x1                                                                                        
00233c   0104     MOVLB     0x4                ep0Bo.Cnt = EP0_BUFF_SIZE;              // Defined in usbcfg.h               C:\fw\midicontroller\x011a\usb.c
00233e   0e40     MOVLW     0x40                                                                                            
002340   6f01     MOVWF     0x1,0x1                                                                                         
002342   0e10     MOVLW     0x10               ep0Bo.ADR = (byte*)&SetupPkt;                                                C:\fw\midicontroller\x011a\usb.c
002344   6f02     MOVWF     0x2,0x1                                                                                         
002346   0e04     MOVLW     0x4                                                                                             
002348   6f03     MOVWF     0x3,0x1                                                                                         
00234a   0e88     MOVLW     0x88               ep0Bo.Stat._byte = _USIE|_DAT0|_DTSEN;  // EP0 buff dsc init, see usbmmap.h  C:\fw\midicontroller\x011a\usb.c
00234c   6f00     MOVWF     0x0,0x1                                                                                         
00234e   6b04     CLRF      0x4,0x1            ep0Bi.Stat._byte = _UCPU;               // EP0 IN buffer initialization      C:\fw\midicontroller\x011a\usb.c
002350   0012     RETURN    0x0            }//end USBPrepareForNextSetupTrf                                                 C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** EOF usbctrltrf.c *********************************************************/  C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           //usbdrv.c                                                                       C:\fw\midicontroller\x011a\usb.c
                                           /** I N C L U D E S **********************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           #include "p18f4455.h"                                                            C:\fw\midicontroller\x011a\usb.c
                                           #include "typedefs.h"                                                            C:\fw\midicontroller\x011a\usb.c
                                           #include "usb.h"                                                                 C:\fw\midicontroller\x011a\usb.c
                                           //#include "io_cfg.h"             // Required for USBCheckBusStatus()            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** V A R I A B L E S ********************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           #pragma udata usb5                                                               C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBModuleEnable(void);                                                      C:\fw\midicontroller\x011a\usb.c
                                           void USBModuleDisable(void);                                                     C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           void USBSuspend(void);                                                           C:\fw\midicontroller\x011a\usb.c
                                           void USBWakeFromSuspend(void);                                                   C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           void USBProtocolResetHandler(void);                                              C:\fw\midicontroller\x011a\usb.c
                                           void USB_SOF_Handler(void);                                                      C:\fw\midicontroller\x011a\usb.c
                                           void USBStallHandler(void);                                                      C:\fw\midicontroller\x011a\usb.c
                                           void USBErrorHandler(void);                                                      C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           #pragma code                                                                     C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBCheckBusStatus(void)                                 C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This routine enables/disables the USB module by monitoring   C:\fw\midicontroller\x011a\usb.c
                                            *                  the USB power signal.                                        C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBCheckBusStatus(void)                                                     C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
                                               /**************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                                * Bus Attachment & Detachment Detection                                     C:\fw\midicontroller\x011a\usb.c
                                                * usb_bus_sense is an i/o pin defined in io_cfg.h                           C:\fw\midicontroller\x011a\usb.c
                                                *************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                               #define USB_BUS_ATTACHED    1                                                C:\fw\midicontroller\x011a\usb.c
                                               #define USB_BUS_DETACHED    0                                                C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               if(usb_bus_sense == USB_BUS_ATTACHED)       // Is USB bus attached?          C:\fw\midicontroller\x011a\usb.c
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
002352   a66d     BTFSS     0x6d,0x3,0x0           if(UCONbits.USBEN == 0)                 // Is the module off?            C:\fw\midicontroller\x011a\usb.c
002354   d80f     RCALL     0x2374                     USBModuleEnable();                  // Is off, enable it             C:\fw\midicontroller\x011a\usb.c
                                               }                                                                            C:\fw\midicontroller\x011a\usb.c
002356   d002     BRA       0x235c             else                                                                         C:\fw\midicontroller\x011a\usb.c
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
002358   b66d     BTFSC     0x6d,0x3,0x0           if(UCONbits.USBEN == 1)                 // Is the module on?             C:\fw\midicontroller\x011a\usb.c
00235a   d813     RCALL     0x2382                     USBModuleDisable();                 // Is on, disable it             C:\fw\midicontroller\x011a\usb.c
                                               }//end if(usb_bus_sense...)                                                  C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * After enabling the USB module, it takes some time for the voltage         C:\fw\midicontroller\x011a\usb.c
                                                * on the D+ or D- line to rise high enough to get out of the SE0 condition. C:\fw\midicontroller\x011a\usb.c
                                                * The USB Reset interrupt should not be unmasked until the SE0 condition is C:\fw\midicontroller\x011a\usb.c
                                                * cleared. This helps preventing the firmware from misinterpreting this     C:\fw\midicontroller\x011a\usb.c
                                                * unique event as a USB bus reset from the USB host.                        C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
00235c   0101     MOVLB     0x1                if(usb_device_state == ATTACHED_STATE)                                       C:\fw\midicontroller\x011a\usb.c
00235e   0587     DECF      0x87,0x0,0x1                                                                                    
002360   e108     BNZ       0x2372                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
002362   ba6d     BTFSC     0x6d,0x5,0x0           if(!UCONbits.SE0)                                                        C:\fw\midicontroller\x011a\usb.c
002364   d006     BRA       0x2372                                                                                          
                                                   {                                                                        C:\fw\midicontroller\x011a\usb.c
002366   6a68     CLRF      0x68,0x0                   UIR = 0;                        // Clear all USB interrupts          C:\fw\midicontroller\x011a\usb.c
002368   6a69     CLRF      0x69,0x0                   UIE = 0;                        // Mask all USB interrupts           C:\fw\midicontroller\x011a\usb.c
00236a   8069     BSF       0x69,0x0,0x0               UIEbits.URSTIE = 1;             // Unmask RESET interrupt            C:\fw\midicontroller\x011a\usb.c
00236c   8869     BSF       0x69,0x4,0x0               UIEbits.IDLEIE = 1;             // Unmask IDLE interrupt             C:\fw\midicontroller\x011a\usb.c
00236e   0e02     MOVLW     0x2                        usb_device_state = POWERED_STATE;                                    C:\fw\midicontroller\x011a\usb.c
002370   6f87     MOVWF     0x87,0x1                                                                                        
                                                   }//end if                           // else wait until SE0 is cleared    C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               }//end if(usb_device_state == ATTACHED_STATE)                                C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002372   0012     RETURN    0x0            }//end USBCheckBusStatus                                                         C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBModuleEnable(void)                                   C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This routine enables the USB module.                         C:\fw\midicontroller\x011a\usb.c
                                            *                  An end designer should never have to call this routine       C:\fw\midicontroller\x011a\usb.c
                                            *                  manually. This routine should only be called from            C:\fw\midicontroller\x011a\usb.c
                                            *                  USBCheckBusStatus().                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            See USBCheckBusStatus() for more information.                C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBModuleEnable(void)                                                       C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
002374   6a6d     CLRF      0x6d,0x0           UCON = 0;                                                                    C:\fw\midicontroller\x011a\usb.c
002376   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           C:\fw\midicontroller\x011a\usb.c
002378   866d     BSF       0x6d,0x3,0x0       UCONbits.USBEN = 1;                     // Enable module & attach to bus     C:\fw\midicontroller\x011a\usb.c
00237a   0101     MOVLB     0x1                usb_device_state = ATTACHED_STATE;      // Defined in usbmmap.c & .h         C:\fw\midicontroller\x011a\usb.c
00237c   0e01     MOVLW     0x1                                                                                             
00237e   6f87     MOVWF     0x87,0x1                                                                                        
002380   0012     RETURN    0x0            }//end USBModuleEnable                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBModuleDisable(void)                                  C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This routine disables the USB module.                        C:\fw\midicontroller\x011a\usb.c
                                            *                  An end designer should never have to call this routine       C:\fw\midicontroller\x011a\usb.c
                                            *                  manually. This routine should only be called from            C:\fw\midicontroller\x011a\usb.c
                                            *                  USBCheckBusStatus().                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            See USBCheckBusStatus() for more information.                C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBModuleDisable(void)                                                      C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
002382   6a6d     CLRF      0x6d,0x0           UCON = 0;                               // Disable module & detach from bus  C:\fw\midicontroller\x011a\usb.c
002384   6a69     CLRF      0x69,0x0           UIE = 0;                                // Mask all USB interrupts           C:\fw\midicontroller\x011a\usb.c
002386   0101     MOVLB     0x1                usb_device_state = DETACHED_STATE;      // Defined in usbmmap.c & .h         C:\fw\midicontroller\x011a\usb.c
002388   6b87     CLRF      0x87,0x1                                                                                        
00238a   0012     RETURN    0x0            }//end USBModuleDisable                                                          C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBSoftDetach(void)                                     C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    The device will have to be re-enumerated to function again.  C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        USBSoftDetach electrically disconnects the device from       C:\fw\midicontroller\x011a\usb.c
                                            *                  the bus. This is done by stop supplying Vusb voltage to      C:\fw\midicontroller\x011a\usb.c
                                            *                  pull-up resistor. The pull-down resistors on the host        C:\fw\midicontroller\x011a\usb.c
                                            *                  side will pull both differential signal lines low and        C:\fw\midicontroller\x011a\usb.c
                                            *                  the host registers the event as a disconnect.                C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            *                  Since the USB cable is not physically disconnected, the      C:\fw\midicontroller\x011a\usb.c
                                            *                  power supply through the cable can still be sensed by        C:\fw\midicontroller\x011a\usb.c
                                            *                  the device. The next time USBCheckBusStatus() function       C:\fw\midicontroller\x011a\usb.c
                                            *                  is called, it will reconnect the device back to the bus.     C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBSoftDetach(void)                                                         C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
00238c   efc1     GOTO      0x2382             USBModuleDisable();                                                          C:\fw\midicontroller\x011a\usb.c
00238e   f011                                                                                                               
                                           }//end USBSoftDetach                                                             C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBDriverService(void)                                  C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This routine is the heart of this firmware. It manages       C:\fw\midicontroller\x011a\usb.c
                                            *                  all USB interrupts.                                          C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            Device state transitions through the following stages:       C:\fw\midicontroller\x011a\usb.c
                                            *                  DETACHED -> ATTACHED -> POWERED -> DEFAULT ->                C:\fw\midicontroller\x011a\usb.c
                                            *                  ADDRESS_PENDING -> ADDRESSED -> CONFIGURED -> READY          C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBDriverService(void)                                                      C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * Pointless to continue servicing if USB cable is not even attached.        C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
002390   0101     MOVLB     0x1                if(usb_device_state == DETACHED_STATE) return;                               C:\fw\midicontroller\x011a\usb.c
002392   5187     MOVF      0x87,0x0,0x1                                                                                    
002394   e101     BNZ       0x2398                                                                                          
002396   d039     BRA       0x240a                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * Task A: Service USB Activity Interrupt                                    C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002398   5068     MOVF      0x68,0x0,0x0       if(UIRbits.ACTVIF && UIEbits.ACTVIE)    USBWakeFromSuspend();                C:\fw\midicontroller\x011a\usb.c
00239a   0b04     ANDLW     0x4                                                                                             
00239c   e004     BZ        0x23a6                                                                                          
00239e   5069     MOVF      0x69,0x0,0x0                                                                                    
0023a0   0b04     ANDLW     0x4                                                                                             
0023a2   e001     BZ        0x23a6                                                                                          
0023a4   d838     RCALL     0x2416                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * Pointless to continue servicing if the device is in suspend mode.         C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
0023a6   b26d     BTFSC     0x6d,0x1,0x0       if(UCONbits.SUSPND==1) return;                                               C:\fw\midicontroller\x011a\usb.c
0023a8   d030     BRA       0x240a                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * Task B: Service USB Bus Reset Interrupt.                                  C:\fw\midicontroller\x011a\usb.c
                                                * When bus reset is received during suspend, ACTVIF will be set first,      C:\fw\midicontroller\x011a\usb.c
                                                * once the UCONbits.SUSPND is clear, then the URSTIF bit will be asserted.  C:\fw\midicontroller\x011a\usb.c
                                                * This is why URSTIF is checked after ACTVIF.                               C:\fw\midicontroller\x011a\usb.c
                                                *                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * The USB reset flag is masked when the USB state is in                     C:\fw\midicontroller\x011a\usb.c
                                                * DETACHED_STATE or ATTACHED_STATE, and therefore cannot                    C:\fw\midicontroller\x011a\usb.c
                                                * cause a USB reset event during these two states.                          C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
0023aa   5068     MOVF      0x68,0x0,0x0       if(UIRbits.URSTIF && UIEbits.URSTIE)    USBProtocolResetHandler();           C:\fw\midicontroller\x011a\usb.c
0023ac   0b01     ANDLW     0x1                                                                                             
0023ae   e004     BZ        0x23b8                                                                                          
0023b0   5069     MOVF      0x69,0x0,0x0                                                                                    
0023b2   0b01     ANDLW     0x1                                                                                             
0023b4   e001     BZ        0x23b8                                                                                          
0023b6   d84f     RCALL     0x2456                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * Task C: Service other USB interrupts                                      C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
0023b8   5068     MOVF      0x68,0x0,0x0       if(UIRbits.IDLEIF && UIEbits.IDLEIE)    USBSuspend();                        C:\fw\midicontroller\x011a\usb.c
0023ba   0b10     ANDLW     0x10                                                                                            
0023bc   e004     BZ        0x23c6                                                                                          
0023be   5069     MOVF      0x69,0x0,0x0                                                                                    
0023c0   0b10     ANDLW     0x10                                                                                            
0023c2   e001     BZ        0x23c6                                                                                          
0023c4   d823     RCALL     0x240c                                                                                          
0023c6   5068     MOVF      0x68,0x0,0x0       if(UIRbits.SOFIF && UIEbits.SOFIE)      USB_SOF_Handler();                   C:\fw\midicontroller\x011a\usb.c
0023c8   0b40     ANDLW     0x40                                                                                            
0023ca   e004     BZ        0x23d4                                                                                          
0023cc   5069     MOVF      0x69,0x0,0x0                                                                                    
0023ce   0b40     ANDLW     0x40                                                                                            
0023d0   e001     BZ        0x23d4                                                                                          
0023d2   d837     RCALL     0x2442                                                                                          
0023d4   5068     MOVF      0x68,0x0,0x0       if(UIRbits.STALLIF && UIEbits.STALLIE)  USBStallHandler();                   C:\fw\midicontroller\x011a\usb.c
0023d6   0b20     ANDLW     0x20                                                                                            
0023d8   e004     BZ        0x23e2                                                                                          
0023da   5069     MOVF      0x69,0x0,0x0                                                                                    
0023dc   0b20     ANDLW     0x20                                                                                            
0023de   e001     BZ        0x23e2                                                                                          
0023e0   d832     RCALL     0x2446                                                                                          
0023e2   5068     MOVF      0x68,0x0,0x0       if(UIRbits.UERRIF && UIEbits.UERRIE)    USBErrorHandler();                   C:\fw\midicontroller\x011a\usb.c
0023e4   0b02     ANDLW     0x2                                                                                             
0023e6   e004     BZ        0x23f0                                                                                          
0023e8   5069     MOVF      0x69,0x0,0x0                                                                                    
0023ea   0b02     ANDLW     0x2                                                                                             
0023ec   e001     BZ        0x23f0                                                                                          
0023ee   d831     RCALL     0x2452                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * Pointless to continue servicing if the host has not sent a bus reset.     C:\fw\midicontroller\x011a\usb.c
                                                * Once bus reset is received, the device transitions into the DEFAULT       C:\fw\midicontroller\x011a\usb.c
                                                * state and is ready for communication.                                     C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
0023f0   0e03     MOVLW     0x3                if(usb_device_state < DEFAULT_STATE) return;                                 C:\fw\midicontroller\x011a\usb.c
0023f2   0101     MOVLB     0x1                                                                                             
0023f4   5d87     SUBWF     0x87,0x0,0x1                                                                                    
0023f6   e201     BC        0x23fa                                                                                          
0023f8   d008     BRA       0x240a                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * Task D: Servicing USB Transaction Complete Interrupt                      C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
0023fa   5068     MOVF      0x68,0x0,0x0       if(UIRbits.TRNIF && UIEbits.TRNIE)                                           C:\fw\midicontroller\x011a\usb.c
0023fc   0b08     ANDLW     0x8                                                                                             
0023fe   e005     BZ        0x240a                                                                                          
002400   5069     MOVF      0x69,0x0,0x0                                                                                    
002402   0b08     ANDLW     0x8                                                                                             
002404   e002     BZ        0x240a                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
                                                   /*                                                                       C:\fw\midicontroller\x011a\usb.c
                                                    * USBCtrlEPService only services transactions over EP0.                 C:\fw\midicontroller\x011a\usb.c
                                                    * It ignores all other EP transactions.                                 C:\fw\midicontroller\x011a\usb.c
                                                    */                                                                      C:\fw\midicontroller\x011a\usb.c
002406   de34     RCALL     0x2070                 USBCtrlEPService();                                                      C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                   /*                                                                       C:\fw\midicontroller\x011a\usb.c
                                                    * Other EP can be serviced later by responsible device class firmware.  C:\fw\midicontroller\x011a\usb.c
                                                    * Each device driver knows when an OUT or IN transaction is ready by    C:\fw\midicontroller\x011a\usb.c
                                                    * checking the buffer ownership bit.                                    C:\fw\midicontroller\x011a\usb.c
                                                    * An OUT EP should always be owned by SIE until the data is ready.      C:\fw\midicontroller\x011a\usb.c
                                                    * An IN EP should always be owned by CPU until the data is ready.       C:\fw\midicontroller\x011a\usb.c
                                                    *                                                                       C:\fw\midicontroller\x011a\usb.c
                                                    * Because of this logic, it is not necessary to save the USTAT value    C:\fw\midicontroller\x011a\usb.c
                                                    * of non-EP0 transactions.                                              C:\fw\midicontroller\x011a\usb.c
                                                    */                                                                      C:\fw\midicontroller\x011a\usb.c
002408   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\fw\midicontroller\x011a\usb.c
                                               }//end if(UIRbits.TRNIF && UIEbits.TRNIE)                                    C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
00240a   0012     RETURN    0x0            }//end USBDriverService                                                          C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBSuspend(void)                                        C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:                                                                     C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBSuspend(void)                                                            C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * NOTE: Do not clear UIRbits.ACTVIF here!                                   C:\fw\midicontroller\x011a\usb.c
                                                * Reason:                                                                   C:\fw\midicontroller\x011a\usb.c
                                                * ACTVIF is only generated once an IDLEIF has been generated.               C:\fw\midicontroller\x011a\usb.c
                                                * This is a 1:1 ratio interrupt generation.                                 C:\fw\midicontroller\x011a\usb.c
                                                * For every IDLEIF, there will be only one ACTVIF regardless of             C:\fw\midicontroller\x011a\usb.c
                                                * the number of subsequent bus transitions.                                 C:\fw\midicontroller\x011a\usb.c
                                                *                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * If the ACTIF is cleared here, a problem could occur when:                 C:\fw\midicontroller\x011a\usb.c
                                                * [       IDLE       ][bus activity ->                                      C:\fw\midicontroller\x011a\usb.c
                                                * <--- 3 ms ----->     ^                                                    C:\fw\midicontroller\x011a\usb.c
                                                *                ^     ACTVIF=1                                             C:\fw\midicontroller\x011a\usb.c
                                                *                IDLEIF=1                                                   C:\fw\midicontroller\x011a\usb.c
                                                *  #           #           #           #   (#=Program polling flags)        C:\fw\midicontroller\x011a\usb.c
                                                *                          ^                                                C:\fw\midicontroller\x011a\usb.c
                                                *                          This polling loop will see both                  C:\fw\midicontroller\x011a\usb.c
                                                *                          IDLEIF=1 and ACTVIF=1.                           C:\fw\midicontroller\x011a\usb.c
                                                *                          However, the program services IDLEIF first       C:\fw\midicontroller\x011a\usb.c
                                                *                          because ACTIVIE=0.                               C:\fw\midicontroller\x011a\usb.c
                                                *                          If this routine clears the only ACTIVIF,         C:\fw\midicontroller\x011a\usb.c
                                                *                          then it can never get out of the suspend         C:\fw\midicontroller\x011a\usb.c
                                                *                          mode.                                            C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
00240c   8469     BSF       0x69,0x2,0x0       UIEbits.ACTVIE = 1;                     // Enable bus activity interrupt     C:\fw\midicontroller\x011a\usb.c
00240e   9868     BCF       0x68,0x4,0x0       UIRbits.IDLEIF = 0;                                                          C:\fw\midicontroller\x011a\usb.c
002410   826d     BSF       0x6d,0x1,0x0       UCONbits.SUSPND = 1;                    // Put USB module in power conserve  C:\fw\midicontroller\x011a\usb.c
                                                                                       // mode, SIE clock inactive          C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * At this point the PIC can go into sleep,idle, or                          C:\fw\midicontroller\x011a\usb.c
                                                * switch to a slower clock, etc.                                            C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               /* Modifiable Section */                                                     C:\fw\midicontroller\x011a\usb.c
002412   9aa1     BCF       0xa1,0x5,0x0       PIR2bits.USBIF = 0;                                                          C:\fw\midicontroller\x011a\usb.c
                                           /*                                                                               C:\fw\midicontroller\x011a\usb.c
                                           //2/15/05 JD This was causing problems with USBIE being enabled..                C:\fw\midicontroller\x011a\usb.c
                                               INTCONbits.RBIF = 0;                                                         C:\fw\midicontroller\x011a\usb.c
                                               PIE2bits.USBIE = 1;                     // Set USB wakeup source             C:\fw\midicontroller\x011a\usb.c
                                               INTCONbits.RBIE = 1;                    // Set sw2,3 wakeup source           C:\fw\midicontroller\x011a\usb.c
                                               Sleep();                                // Goto sleep                        C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                               if(INTCONbits.RBIF == 1)                // Check if external stimulus        C:\fw\midicontroller\x011a\usb.c
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
                                                   USBRemoteWakeup();                  // If yes, attempt RWU               C:\fw\midicontroller\x011a\usb.c
                                               }                                                                            C:\fw\midicontroller\x011a\usb.c
                                               PIE2bits.USBIE = 0;                                                          C:\fw\midicontroller\x011a\usb.c
                                               INTCONbits.RBIE = 0;                                                         C:\fw\midicontroller\x011a\usb.c
                                           */                                                                               C:\fw\midicontroller\x011a\usb.c
                                               /* End Modifiable Section */                                                 C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002414   0012     RETURN    0x0            }//end USBSuspend                                                                C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBWakeFromSuspend(void)                                C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:                                                                     C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBWakeFromSuspend(void)                                                    C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * If using clock switching, this is the place to restore the                C:\fw\midicontroller\x011a\usb.c
                                                * original clock frequency.                                                 C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
002416   926d     BCF       0x6d,0x1,0x0       UCONbits.SUSPND = 0;                                                         C:\fw\midicontroller\x011a\usb.c
002418   9469     BCF       0x69,0x2,0x0       UIEbits.ACTVIE = 0;                                                          C:\fw\midicontroller\x011a\usb.c
00241a   9468     BCF       0x68,0x2,0x0       UIRbits.ACTVIF = 0;                                                          C:\fw\midicontroller\x011a\usb.c
00241c   0012     RETURN    0x0            }//end USBWakeFromSuspend                                                        C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBRemoteWakeup(void)                                   C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        This function should be called by user when the device       C:\fw\midicontroller\x011a\usb.c
                                            *                  is waken up by an external stimulus other than ACTIVIF.      C:\fw\midicontroller\x011a\usb.c
                                            *                  Please read the note below to understand the limitations.    C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            The modifiable section in this routine should be changed     C:\fw\midicontroller\x011a\usb.c
                                            *                  to meet the application needs. Current implementation        C:\fw\midicontroller\x011a\usb.c
                                            *                  temporary blocks other functions from executing for a        C:\fw\midicontroller\x011a\usb.c
                                            *                  period of 1-13 ms depending on the core frequency.           C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            *                  According to USB 2.0 specification section 7.1.7.7,          C:\fw\midicontroller\x011a\usb.c
                                            *                  "The remote wakeup device must hold the resume signaling     C:\fw\midicontroller\x011a\usb.c
                                            *                  for at lest 1 ms but for no more than 15 ms."                C:\fw\midicontroller\x011a\usb.c
                                            *                  The idea here is to use a delay counter loop, using a        C:\fw\midicontroller\x011a\usb.c
                                            *                  common value that would work over a wide range of core       C:\fw\midicontroller\x011a\usb.c
                                            *                  frequencies.                                                 C:\fw\midicontroller\x011a\usb.c
                                            *                  That value selected is 1800. See table below:                C:\fw\midicontroller\x011a\usb.c
                                            *                  ==========================================================   C:\fw\midicontroller\x011a\usb.c
                                            *                  Core Freq(MHz)      MIP         RESUME Signal Period (ms)    C:\fw\midicontroller\x011a\usb.c
                                            *                  ==========================================================   C:\fw\midicontroller\x011a\usb.c
                                            *                      48              12          1.05                         C:\fw\midicontroller\x011a\usb.c
                                            *                       4              1           12.6                         C:\fw\midicontroller\x011a\usb.c
                                            *                  ==========================================================   C:\fw\midicontroller\x011a\usb.c
                                            *                  * These timing could be incorrect when using code            C:\fw\midicontroller\x011a\usb.c
                                            *                    optimization or extended instruction mode,                 C:\fw\midicontroller\x011a\usb.c
                                            *                    or when having other interrupts enabled.                   C:\fw\midicontroller\x011a\usb.c
                                            *                    Make sure to verify using the MPLAB SIM's Stopwatch        C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBRemoteWakeup(void)                                                       C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
                                               static word delay_count;                                                     C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
00241e   0101     MOVLB     0x1                if(usb_stat.RemoteWakeup == 1)          // Check if RemoteWakeup function    C:\fw\midicontroller\x011a\usb.c
002420   a188     BTFSS     0x88,0x0,0x1                                                                                    
002422   d00e     BRA       0x2440                                                                                          
                                               {                                       // has been enabled by the host.     C:\fw\midicontroller\x011a\usb.c
002424   dff8     RCALL     0x2416                 USBWakeFromSuspend();               // Unsuspend USB modue               C:\fw\midicontroller\x011a\usb.c
002426   846d     BSF       0x6d,0x2,0x0           UCONbits.RESUME = 1;                // Start RESUME signaling            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                   /* Modifiable Section */                                                 C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002428   0101     MOVLB     0x1                    delay_count = 1800U;                // Set RESUME line for 1-13 ms       C:\fw\midicontroller\x011a\usb.c
00242a   0e08     MOVLW     0x8                                                                                             
00242c   6f93     MOVWF     0x93,0x1                                                                                        
00242e   0e07     MOVLW     0x7                                                                                             
002430   6f94     MOVWF     0x94,0x1                                                                                        
                                                   do                                                                       C:\fw\midicontroller\x011a\usb.c
                                                   {                                                                        C:\fw\midicontroller\x011a\usb.c
002432   0793     DECF      0x93,0x1,0x1               delay_count--;                                                       C:\fw\midicontroller\x011a\usb.c
002434   0e00     MOVLW     0x0                                                                                             
002436   5b94     SUBWFB    0x94,0x1,0x1                                                                                    
002438   5193     MOVF      0x93,0x0,0x1           }while(delay_count);                                                     C:\fw\midicontroller\x011a\usb.c
00243a   1194     IORWF     0x94,0x0,0x1                                                                                    
00243c   e1fa     BNZ       0x2432                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                   /* End Modifiable Section */                                             C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
00243e   946d     BCF       0x6d,0x2,0x0           UCONbits.RESUME = 0;                                                     C:\fw\midicontroller\x011a\usb.c
                                               }//endif                                                                     C:\fw\midicontroller\x011a\usb.c
002440   0012     RETURN    0x0            }//end USBRemoteWakeup                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USB_SOF_Handler(void)                                   C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        The USB host sends out a SOF packet to full-speed devices    C:\fw\midicontroller\x011a\usb.c
                                            *                  every 1 ms. This interrupt may be useful for isochronous     C:\fw\midicontroller\x011a\usb.c
                                            *                  pipes. End designers should implement callback routine       C:\fw\midicontroller\x011a\usb.c
                                            *                  as necessary.                                                C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USB_SOF_Handler(void)                                                       C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
                                               /* Callback routine here */                                                  C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002442   9c68     BCF       0x68,0x6,0x0       UIRbits.SOFIF = 0;                                                           C:\fw\midicontroller\x011a\usb.c
002444   0012     RETURN    0x0            }//end USB_SOF_Handler                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBStallHandler(void)                                   C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    A STALL packet is sent to the host by the SIE.               C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        The STALLIF is set anytime the SIE sends out a STALL         C:\fw\midicontroller\x011a\usb.c
                                            *                  packet regardless of which endpoint causes it.               C:\fw\midicontroller\x011a\usb.c
                                            *                  A Setup transaction overrides the STALL function. A stalled  C:\fw\midicontroller\x011a\usb.c
                                            *                  endpoint stops stalling once it receives a setup packet.     C:\fw\midicontroller\x011a\usb.c
                                            *                  In this case, the SIE will accepts the Setup packet and      C:\fw\midicontroller\x011a\usb.c
                                            *                  set the TRNIF flag to notify the firmware. STALL function    C:\fw\midicontroller\x011a\usb.c
                                            *                  for that particular endpoint pipe will be automatically      C:\fw\midicontroller\x011a\usb.c
                                            *                  disabled (direction specific).                               C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            *                  There are a few reasons for an endpoint to be stalled.       C:\fw\midicontroller\x011a\usb.c
                                            *                  1. When a non-supported USB request is received.             C:\fw\midicontroller\x011a\usb.c
                                            *                     Example: GET_DESCRIPTOR(DEVICE_QUALIFIER)                 C:\fw\midicontroller\x011a\usb.c
                                            *                  2. When an endpoint is currently halted.                     C:\fw\midicontroller\x011a\usb.c
                                            *                  3. When the device class specifies that an endpoint must     C:\fw\midicontroller\x011a\usb.c
                                            *                     stall in response to a specific event.                    C:\fw\midicontroller\x011a\usb.c
                                            *                     Example: Mass Storage Device Class                        C:\fw\midicontroller\x011a\usb.c
                                            *                              If the CBW is not valid, the device shall        C:\fw\midicontroller\x011a\usb.c
                                            *                              STALL the Bulk-In pipe.                          C:\fw\midicontroller\x011a\usb.c
                                            *                              See USB Mass Storage Class Bulk-only Transport   C:\fw\midicontroller\x011a\usb.c
                                            *                              Specification for more details.                  C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            UEPn.EPSTALL can be scanned to see which endpoint causes     C:\fw\midicontroller\x011a\usb.c
                                            *                  the stall event.                                             C:\fw\midicontroller\x011a\usb.c
                                            *                  If                                                           C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBStallHandler(void)                                                       C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
                                               /*                                                                           C:\fw\midicontroller\x011a\usb.c
                                                * Does not really have to do anything here,                                 C:\fw\midicontroller\x011a\usb.c
                                                * even for the control endpoint.                                            C:\fw\midicontroller\x011a\usb.c
                                                * All BDs of Endpoint 0 are owned by SIE right now,                         C:\fw\midicontroller\x011a\usb.c
                                                * but once a Setup Transaction is received, the ownership                   C:\fw\midicontroller\x011a\usb.c
                                                * for EP0_OUT will be returned to CPU.                                      C:\fw\midicontroller\x011a\usb.c
                                                * When the Setup Transaction is serviced, the ownership                     C:\fw\midicontroller\x011a\usb.c
                                                * for EP0_IN will then be forced back to CPU by firmware.                   C:\fw\midicontroller\x011a\usb.c
                                                */                                                                          C:\fw\midicontroller\x011a\usb.c
002446   a070     BTFSS     0x70,0x0,0x0       if(UEP0bits.EPSTALL == 1)                                                    C:\fw\midicontroller\x011a\usb.c
002448   d002     BRA       0x244e                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
00244a   df76     RCALL     0x2338                 USBPrepareForNextSetupTrf();        // Firmware work-around              C:\fw\midicontroller\x011a\usb.c
00244c   9070     BCF       0x70,0x0,0x0           UEP0bits.EPSTALL = 0;                                                    C:\fw\midicontroller\x011a\usb.c
                                               }                                                                            C:\fw\midicontroller\x011a\usb.c
00244e   9a68     BCF       0x68,0x5,0x0       UIRbits.STALLIF = 0;                                                         C:\fw\midicontroller\x011a\usb.c
002450   0012     RETURN    0x0            }//end USBStallHandler                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBErrorHandler(void)                                   C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        The purpose of this interrupt is mainly for debugging        C:\fw\midicontroller\x011a\usb.c
                                            *                  during development. Check UEIR to see which error causes     C:\fw\midicontroller\x011a\usb.c
                                            *                  the interrupt.                                               C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBErrorHandler(void)                                                       C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
002452   9268     BCF       0x68,0x1,0x0       UIRbits.UERRIF = 0;                                                          C:\fw\midicontroller\x011a\usb.c
002454   0012     RETURN    0x0            }//end USBErrorHandler                                                           C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\usb.c
                                            * Function:        void USBProtocolResetHandler(void)                           C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * PreCondition:    A USB bus reset is received from the host.                   C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Side Effects:    Currently, this routine flushes any pending USB              C:\fw\midicontroller\x011a\usb.c
                                            *                  transactions. It empties out the USTAT FIFO. This action     C:\fw\midicontroller\x011a\usb.c
                                            *                  might not be desirable in some applications.                 C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Overview:        Once a USB bus reset is received from the host, this         C:\fw\midicontroller\x011a\usb.c
                                            *                  routine should be called. It resets the device address to    C:\fw\midicontroller\x011a\usb.c
                                            *                  zero, disables all non-EP0 endpoints, initializes EP0 to     C:\fw\midicontroller\x011a\usb.c
                                            *                  be ready for default communication, clears all USB           C:\fw\midicontroller\x011a\usb.c
                                            *                  interrupt flags, unmasks applicable USB interrupts, and      C:\fw\midicontroller\x011a\usb.c
                                            *                  reinitializes internal state-machine variables.              C:\fw\midicontroller\x011a\usb.c
                                            *                                                                               C:\fw\midicontroller\x011a\usb.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\usb.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                           void USBProtocolResetHandler(void)                                               C:\fw\midicontroller\x011a\usb.c
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
002456   6a6a     CLRF      0x6a,0x0           UEIR = 0;                       // Clear all USB error flags                 C:\fw\midicontroller\x011a\usb.c
002458   6a68     CLRF      0x68,0x0           UIR = 0;                        // Clears all USB interrupts                 C:\fw\midicontroller\x011a\usb.c
00245a   0e9f     MOVLW     0x9f               UEIE = 0b10011111;              // Unmask all USB error interrupts           C:\fw\midicontroller\x011a\usb.c
00245c   6e6b     MOVWF     0x6b,0x0                                                                                        
00245e   0e7b     MOVLW     0x7b               UIE = 0b01111011;               // Enable all interrupts except ACTVIE       C:\fw\midicontroller\x011a\usb.c
002460   6e69     MOVWF     0x69,0x0                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002462   6a6e     CLRF      0x6e,0x0           UADDR = 0x00;                   // Reset to default address                  C:\fw\midicontroller\x011a\usb.c
002464   0e0f     MOVLW     0xf                mDisableEP1to15();              // Reset all non-EP0 UEPn registers          C:\fw\midicontroller\x011a\usb.c
002466   6ee6     MOVWF     0xe6,0x0                                                                                        
002468   0e71     MOVLW     0x71                                                                                            
00246a   6ee6     MOVWF     0xe6,0x0                                                                                        
00246c   0e0f     MOVLW     0xf                                                                                             
00246e   6ee6     MOVWF     0xe6,0x0                                                                                        
002470   d811     RCALL     0x2494                                                                                          
002472   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002474   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002476   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002478   0e16     MOVLW     0x16               UEP0 = EP_CTRL|HSHK_EN;         // Init EP0 as a Ctrl EP, see usbdrv.h       C:\fw\midicontroller\x011a\usb.c
00247a   6e70     MOVWF     0x70,0x0                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
00247c   a668     BTFSS     0x68,0x3,0x0       while(UIRbits.TRNIF == 1)       // Flush any pending transactions            C:\fw\midicontroller\x011a\usb.c
00247e   d002     BRA       0x2484                                                                                          
002482   d7fc     BRA       0x247c                                                                                          
002480   9668     BCF       0x68,0x3,0x0           UIRbits.TRNIF = 0;                                                       C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002484   986d     BCF       0x6d,0x4,0x0       UCONbits.PKTDIS = 0;            // Make sure packet processing is enabled    C:\fw\midicontroller\x011a\usb.c
002486   df58     RCALL     0x2338             USBPrepareForNextSetupTrf();    // Declared in usbctrltrf.c                  C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
002488   0101     MOVLB     0x1                usb_stat.RemoteWakeup = 0;      // Default status flag to disable            C:\fw\midicontroller\x011a\usb.c
00248a   9188     BCF       0x88,0x0,0x1                                                                                    
00248c   6b89     CLRF      0x89,0x1           usb_active_cfg = 0;             // Clear active configuration                C:\fw\midicontroller\x011a\usb.c
00248e   0e03     MOVLW     0x3                usb_device_state = DEFAULT_STATE;                                            C:\fw\midicontroller\x011a\usb.c
002490   6f87     MOVWF     0x87,0x1                                                                                        
002492   0012     RETURN    0x0            }//end USBProtocolResetHandler                                                   C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /* Auxiliary Function */                                                         C:\fw\midicontroller\x011a\usb.c
002494   cfd9     MOVFF     0xfd9,0xfe6    void ClearArray(byte* startAdr,byte count)                                       C:\fw\midicontroller\x011a\usb.c
002496   ffe6                                                                                                               
002498   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00249a   ffd9                                                                                                               
                                           {                                                                                C:\fw\midicontroller\x011a\usb.c
00249c   0efd     MOVLW     0xfd               *startAdr;                                                                   C:\fw\midicontroller\x011a\usb.c
00249e   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0024a0   ffe9                                                                                                               
0024a2   0efe     MOVLW     0xfe                                                                                            
0024a4   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0024a6   ffea                                                                                                               
0024a8   0efc     MOVLW     0xfc               while(count)                                                                 C:\fw\midicontroller\x011a\usb.c
0024aa   50db     MOVF      0xdb,0x0,0x0                                                                                    
0024ac   e004     BZ        0x24b6                                                                                          
0024b4   d7f9     BRA       0x24a8                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usb.c
                                                   _asm                                                                     C:\fw\midicontroller\x011a\usb.c
0024ae   6aee     CLRF      0xee,0x0               clrf POSTINC0,0                                                          C:\fw\midicontroller\x011a\usb.c
                                                   _endasm                                                                  C:\fw\midicontroller\x011a\usb.c
0024b0   0efc     MOVLW     0xfc                   count--;                                                                 C:\fw\midicontroller\x011a\usb.c
0024b2   06db     DECF      0xdb,0x1,0x0                                                                                    
                                               }//end while                                                                 C:\fw\midicontroller\x011a\usb.c
0024b6   52e5     MOVF      0xe5,0x1,0x0   }//end ClearArray                                                                C:\fw\midicontroller\x011a\usb.c
0024b8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0024ba   ffd9                                                                                                               
0024bc   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                           /** EOF usbdrv.c *************************************************************/  C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usb.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                           /** I N C L U D E S **********************************************************/  C:\fw\midicontroller\x011a\usbapplet.c
                                           #include "p18f4455.h"                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                           #include "c_system.h"                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                           #include "typedefs.h"                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                           #include "usb.h"                                                                 C:\fw\midicontroller\x011a\usbapplet.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                           void PROCESS_COMM_REQUEST(void);                                                 C:\fw\midicontroller\x011a\usbapplet.c
                                           //void RemCapCalculation(void);                                                  C:\fw\midicontroller\x011a\usbapplet.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                           void HIDSetReportHandler(void) {                                                 C:\fw\midicontroller\x011a\usbapplet.c
00310e   0100     MOVLB     0x0            	USBQuery = true;                                                                C:\fw\midicontroller\x011a\usbapplet.c
003110   89b8     BSF       0xb8,0x4,0x1                                                                                    
003112   ecf0     CALL      0x2be0,0x0     	PROCESS_COMM_REQUEST();                                                         C:\fw\midicontroller\x011a\usbapplet.c
003114   f015                                                                                                               
003116   0100     MOVLB     0x0            	USBQuery = false;	                                                              C:\fw\midicontroller\x011a\usbapplet.c
003118   99b8     BCF       0xb8,0x4,0x1                                                                                    
00311a   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\usbapplet.c
                                           //-----------------------------------------------------------------------        C:\fw\midicontroller\x011a\usbapplet.c
                                           void HIDGetReportHandler(void) {                                                 C:\fw\midicontroller\x011a\usbapplet.c
                                           //load up CtrlTrfData with data.                                                 C:\fw\midicontroller\x011a\usbapplet.c
00311c   0100     MOVLB     0x0            	USBQuery = true;                                                                C:\fw\midicontroller\x011a\usbapplet.c
00311e   89b8     BSF       0xb8,0x4,0x1                                                                                    
003120   ecf0     CALL      0x2be0,0x0     	PROCESS_COMM_REQUEST();                                                         C:\fw\midicontroller\x011a\usbapplet.c
003122   f015                                                                                                               
003124   0101     MOVLB     0x1            	ctrl_trf_session_owner = MUID_HID;                                              C:\fw\midicontroller\x011a\usbapplet.c
003126   0e02     MOVLW     0x2                                                                                             
003128   6f8c     MOVWF     0x8c,0x1                                                                                        
00312a   0101     MOVLB     0x1            	pSrc.bRam = (byte*)&CtrlTrfData;                                                C:\fw\midicontroller\x011a\usbapplet.c
00312c   0e50     MOVLW     0x50                                                                                            
00312e   6f8d     MOVWF     0x8d,0x1                                                                                        
003130   0e04     MOVLW     0x4                                                                                             
003132   6f8e     MOVWF     0x8e,0x1                                                                                        
003134   0101     MOVLB     0x1            	usb_stat.ctrl_trf_mem = _RAM;       // Set memory type                          C:\fw\midicontroller\x011a\usbapplet.c
003136   9388     BCF       0x88,0x1,0x1                                                                                    
003138   0100     MOVLB     0x0            	USBQuery = false;                                                               C:\fw\midicontroller\x011a\usbapplet.c
00313a   99b8     BCF       0xb8,0x4,0x1                                                                                    
00313c   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\usbapplet.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                           typedef union DATA_PACKET                                                        C:\fw\midicontroller\x011a\usbapplet.c
                                           {                                                                                C:\fw\midicontroller\x011a\usbapplet.c
                                               byte _byte[HID_INT_OUT_EP_SIZE];  //For byte access                          C:\fw\midicontroller\x011a\usbapplet.c
                                               word _word[HID_INT_OUT_EP_SIZE/2];//For word access(USBGEN_EP_SIZE msut be even) C:\fw\midicontroller\x011a\usbapplet.c
                                               struct                                                                       C:\fw\midicontroller\x011a\usbapplet.c
                                               {                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                                   enum                                                                     C:\fw\midicontroller\x011a\usbapplet.c
                                                   {                                                                        C:\fw\midicontroller\x011a\usbapplet.c
                                                       READ_VERSION    = 0x00,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       /*                                                                   C:\fw\midicontroller\x011a\usbapplet.c
                                                       READ_FLASH      = 0x01,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       WRITE_FLASH     = 0x02,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       ERASE_FLASH     = 0x03,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       READ_EEDATA     = 0x04,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       WRITE_EEDATA    = 0x05,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       READ_CONFIG     = 0x06,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       WRITE_CONFIG    = 0x07,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       */                                                                   C:\fw\midicontroller\x011a\usbapplet.c
                                                       ID_BOARD        = 0x31,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       UPDATE_LED      = 0x32,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       SET_TEMP_REAL   = 0x33,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       RD_TEMP         = 0x34,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       SET_TEMP_LOGGING= 0x35,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       RD_TEMP_LOGGING = 0x36,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       RD_POT          = 0x37,                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                       RESET           = 0xFF                                               C:\fw\midicontroller\x011a\usbapplet.c
                                                   }CMD;                                                                    C:\fw\midicontroller\x011a\usbapplet.c
                                                   byte len;                                                                C:\fw\midicontroller\x011a\usbapplet.c
                                               };                                                                           C:\fw\midicontroller\x011a\usbapplet.c
                                               struct                                                                       C:\fw\midicontroller\x011a\usbapplet.c
                                               {                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                                   unsigned :8;                                                             C:\fw\midicontroller\x011a\usbapplet.c
                                                   byte ID;                                                                 C:\fw\midicontroller\x011a\usbapplet.c
                                               };                                                                           C:\fw\midicontroller\x011a\usbapplet.c
                                               struct                                                                       C:\fw\midicontroller\x011a\usbapplet.c
                                               {                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                                   unsigned :8;                                                             C:\fw\midicontroller\x011a\usbapplet.c
                                                   byte led_num;                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                                   byte led_status;                                                         C:\fw\midicontroller\x011a\usbapplet.c
                                               };                                                                           C:\fw\midicontroller\x011a\usbapplet.c
                                               struct                                                                       C:\fw\midicontroller\x011a\usbapplet.c
                                               {                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                                   unsigned :8;                                                             C:\fw\midicontroller\x011a\usbapplet.c
                                                   word word_data;                                                          C:\fw\midicontroller\x011a\usbapplet.c
                                               };                                                                           C:\fw\midicontroller\x011a\usbapplet.c
                                           } DATA_PACKET;                                                                   C:\fw\midicontroller\x011a\usbapplet.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                           DATA_PACKET dataPacket;                                                          C:\fw\midicontroller\x011a\usbapplet.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
00313e   cfd9     MOVFF     0xfd9,0xfe6    void ServiceRequests(void)                                                       C:\fw\midicontroller\x011a\usbapplet.c
003140   ffe6                                                                                                               
003142   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003144   ffd9                                                                                                               
003146   0e02     MOVLW     0x2                                                                                             
003148   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           {    byte index, counter;                                                        C:\fw\midicontroller\x011a\usbapplet.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                           //diag.. test..                                                                  C:\fw\midicontroller\x011a\usbapplet.c
                                           //    if(Testvar)                                                                C:\fw\midicontroller\x011a\usbapplet.c
00314a   0e40     MOVLW     0x40               if(HIDRxReport((byte*)&dataPacket,sizeof(dataPacket)))                       C:\fw\midicontroller\x011a\usbapplet.c
00314c   6ee6     MOVWF     0xe6,0x0                                                                                        
00314e   0e00     MOVLW     0x0                                                                                             
003150   6ee6     MOVWF     0xe6,0x0                                                                                        
003152   0e01     MOVLW     0x1                                                                                             
003154   6ee6     MOVWF     0xe6,0x0                                                                                        
003156   ec47     CALL      0x308e,0x0                                                                                      
003158   f018                                                                                                               
00315a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00315c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00315e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003160   0900     IORLW     0x0                                                                                             
003162   e02c     BZ        0x31bc                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\usbapplet.c
003164   0100     MOVLB     0x0            	    Testvar = false;                                                            C:\fw\midicontroller\x011a\usbapplet.c
003166   9360     BCF       0x60,0x1,0x1                                                                                    
003168   0e01     MOVLW     0x1                    counter = 0;                                                             C:\fw\midicontroller\x011a\usbapplet.c
00316a   6adb     CLRF      0xdb,0x0                                                                                        
00316c   0101     MOVLB     0x1                    switch(dataPacket.CMD)                                                   C:\fw\midicontroller\x011a\usbapplet.c
00316e   5100     MOVF      0x0,0x0,0x1                                                                                     
003170   e00a     BZ        0x3186                                                                                          
                                                   {                                                                        C:\fw\midicontroller\x011a\usbapplet.c
                                                       case READ_VERSION:                                                   C:\fw\midicontroller\x011a\usbapplet.c
                                                           //dataPacket._byte[1] is len                                     C:\fw\midicontroller\x011a\usbapplet.c
003186   0e01     MOVLW     0x1                            dataPacket._byte[2] = 0x01;                                      C:\fw\midicontroller\x011a\usbapplet.c
003188   6f02     MOVWF     0x2,0x1                                                                                         
00318a   0e02     MOVLW     0x2                            dataPacket._byte[3] = 0x02;                                      C:\fw\midicontroller\x011a\usbapplet.c
00318c   6f03     MOVWF     0x3,0x1                                                                                         
00318e   52de     MOVF      0xde,0x1,0x0                   counter=0x04;                                                    C:\fw\midicontroller\x011a\usbapplet.c
003190   0e04     MOVLW     0x4                                                                                             
003192   6edd     MOVWF     0xdd,0x0                                                                                        
003194   d001     BRA       0x3198                         break;                                                           C:\fw\midicontroller\x011a\usbapplet.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                                       default:                                                             C:\fw\midicontroller\x011a\usbapplet.c
                                                           //dataPacket._byte[1] is len                                     C:\fw\midicontroller\x011a\usbapplet.c
003172   0e2c     MOVLW     0x2c                           dataPacket.CMD = 44;                                             C:\fw\midicontroller\x011a\usbapplet.c
003174   6f00     MOVWF     0x0,0x1                                                                                         
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
003176   0e01     MOVLW     0x1                            dataPacket._byte[2] = 0x01;                                      C:\fw\midicontroller\x011a\usbapplet.c
003178   6f02     MOVWF     0x2,0x1                                                                                         
00317a   0e02     MOVLW     0x2                            dataPacket._byte[3] = 0x02;                                      C:\fw\midicontroller\x011a\usbapplet.c
00317c   6f03     MOVWF     0x3,0x1                                                                                         
00317e   52de     MOVF      0xde,0x1,0x0                   counter=64;                                                      C:\fw\midicontroller\x011a\usbapplet.c
003180   0e40     MOVLW     0x40                                                                                            
003182   6edd     MOVWF     0xdd,0x0                                                                                        
003184   d009     BRA       0x3198                         break;                                                           C:\fw\midicontroller\x011a\usbapplet.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
003196   d000     BRA       0x3198                         break;                                                           C:\fw\midicontroller\x011a\usbapplet.c
                                                   }//end switch()                                                          C:\fw\midicontroller\x011a\usbapplet.c
003198   0e01     MOVLW     0x1                    if(counter != 0)                                                         C:\fw\midicontroller\x011a\usbapplet.c
00319a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00319c   e00f     BZ        0x31bc                                                                                          
                                                   {                                                                        C:\fw\midicontroller\x011a\usbapplet.c
00319e   0104     MOVLB     0x4                        if(!mHIDTxIsBusy())                                                  C:\fw\midicontroller\x011a\usbapplet.c
0031a0   bf0c     BTFSC     0xc,0x7,0x1                                                                                     
0031a2   d00c     BRA       0x31bc                                                                                          
0031a4   0e01     MOVLW     0x1                            HIDTxReport((byte*)&dataPacket,counter);                         C:\fw\midicontroller\x011a\usbapplet.c
0031a6   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
0031a8   ffe6                                                                                                               
0031aa   0e00     MOVLW     0x0                                                                                             
0031ac   6ee6     MOVWF     0xe6,0x0                                                                                        
0031ae   0e01     MOVLW     0x1                                                                                             
0031b0   6ee6     MOVWF     0xe6,0x0                                                                                        
0031b2   ec0d     CALL      0x301a,0x0                                                                                      
0031b4   f018                                                                                                               
0031b6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0031b8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0031ba   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                   }//end if                                                                C:\fw\midicontroller\x011a\usbapplet.c
                                               }//end if                                                                    C:\fw\midicontroller\x011a\usbapplet.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
0031bc   0e02     MOVLW     0x2            }//end ServiceRequests                                                           C:\fw\midicontroller\x011a\usbapplet.c
0031be   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0031c0   e202     BC        0x31c6                                                                                          
0031c2   6ae1     CLRF      0xe1,0x0                                                                                        
0031c4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0031c6   6ee1     MOVWF     0xe1,0x0                                                                                        
0031c8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0031ca   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0031cc   ffd9                                                                                                               
0031ce   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                           #define	WRITE_NVR		3                                                             C:\fw\midicontroller\x011a\usbapplet.c
                                           #define	READ_NVR		4                                                              C:\fw\midicontroller\x011a\usbapplet.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                           unsigned char PresentCmd;                                                        C:\fw\midicontroller\x011a\usbapplet.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                           //This handles data over report ID 44                                            C:\fw\midicontroller\x011a\usbapplet.c
                                           //Device to host must always follow a host to device                             C:\fw\midicontroller\x011a\usbapplet.c
0031d0   cfd9     MOVFF     0xfd9,0xfe6    unsigned char	ProcessGenericTransferd2h(void) {                                  C:\fw\midicontroller\x011a\usbapplet.c
0031d2   ffe6                                                                                                               
0031d4   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0031d6   ffd9                                                                                                               
0031d8   0e02     MOVLW     0x2                                                                                             
0031da   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	unsigned char index, cmdrecognized;                                             C:\fw\midicontroller\x011a\usbapplet.c
                                           	                                                                                C:\fw\midicontroller\x011a\usbapplet.c
0031dc   52de     MOVF      0xde,0x1,0x0   	cmdrecognized = true;                                                           C:\fw\midicontroller\x011a\usbapplet.c
0031de   0e01     MOVLW     0x1                                                                                             
0031e0   6edd     MOVWF     0xdd,0x0                                                                                        
                                           	                                                                                C:\fw\midicontroller\x011a\usbapplet.c
0031e2   0101     MOVLB     0x1            	switch (PresentCmd) {                                                           C:\fw\midicontroller\x011a\usbapplet.c
0031e4   5140     MOVF      0x40,0x0,0x1                                                                                    
0031e6   0a04     XORLW     0x4                                                                                             
0031e8   e011     BZ        0x320c                                                                                          
0031ea   0a07     XORLW     0x7                                                                                             
0031ec   e003     BZ        0x31f4                                                                                          
                                           		case	WRITE_NVR:		//the response to a write nvr request is simply a readback of that data C:\fw\midicontroller\x011a\usbapplet.c
0031f4   6adf     CLRF      0xdf,0x0       			for (index=0;index<64;index++) {                                              C:\fw\midicontroller\x011a\usbapplet.c
0031f6   0e40     MOVLW     0x40                                                                                            
0031f8   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
0031fa   e207     BC        0x320a                                                                                          
003206   2adf     INCF      0xdf,0x1,0x0                                                                                    
003208   d7f6     BRA       0x31f6                                                                                          
0031fc   0e02     MOVLW     0x2            				TXENQ(2);                                                                    C:\fw\midicontroller\x011a\usbapplet.c
0031fe   6ee6     MOVWF     0xe6,0x0                                                                                        
003200   ec54     CALL      0x2ea8,0x0                                                                                      
003202   f017                                                                                                               
003204   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           			}                                                                             C:\fw\midicontroller\x011a\usbapplet.c
00320a   d015     BRA       0x3236         			break;                                                                        C:\fw\midicontroller\x011a\usbapplet.c
                                           		case	READ_NVR:		//use address set previously to send out new data              C:\fw\midicontroller\x011a\usbapplet.c
00320c   0e05     MOVLW     0x5            			TXENQ(5);                                                                     C:\fw\midicontroller\x011a\usbapplet.c
00320e   6ee6     MOVWF     0xe6,0x0                                                                                        
003210   ec54     CALL      0x2ea8,0x0                                                                                      
003212   f017                                                                                                               
003214   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003216   0e06     MOVLW     0x6            			TXENQ(6);                                                                     C:\fw\midicontroller\x011a\usbapplet.c
003218   6ee6     MOVWF     0xe6,0x0                                                                                        
00321a   ec54     CALL      0x2ea8,0x0                                                                                      
00321c   f017                                                                                                               
00321e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003220   6adf     CLRF      0xdf,0x0       			for (index=0;index<62;index++) {                                              C:\fw\midicontroller\x011a\usbapplet.c
003222   0e3e     MOVLW     0x3e                                                                                            
003224   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
003226   e206     BC        0x3234                                                                                          
003230   2adf     INCF      0xdf,0x1,0x0                                                                                    
003232   d7f7     BRA       0x3222                                                                                          
003228   6ae6     CLRF      0xe6,0x0       				TXENQ(0);                                                                    C:\fw\midicontroller\x011a\usbapplet.c
00322a   ec54     CALL      0x2ea8,0x0                                                                                      
00322c   f017                                                                                                               
00322e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           			}                                                                             C:\fw\midicontroller\x011a\usbapplet.c
003234   d000     BRA       0x3236         			break;                                                                        C:\fw\midicontroller\x011a\usbapplet.c
                                           		default:                                                                       C:\fw\midicontroller\x011a\usbapplet.c
0031ee   0e01     MOVLW     0x1            			cmdrecognized = false;                                                        C:\fw\midicontroller\x011a\usbapplet.c
0031f0   6adb     CLRF      0xdb,0x0                                                                                        
0031f2   d021     BRA       0x3236         			break;                                                                        C:\fw\midicontroller\x011a\usbapplet.c
                                           	}                                                                               C:\fw\midicontroller\x011a\usbapplet.c
003236   0e01     MOVLW     0x1            	return cmdrecognized;                                                           C:\fw\midicontroller\x011a\usbapplet.c
003238   50db     MOVF      0xdb,0x0,0x0                                                                                    
00323a   6e10     MOVWF     0x10,0x0       }                                                                                C:\fw\midicontroller\x011a\usbapplet.c
00323c   0e02     MOVLW     0x2                                                                                             
00323e   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
003240   e203     BC        0x3248                                                                                          
003242   d000     BRA       0x3244                                                                                          
003244   6ae1     CLRF      0xe1,0x0                                                                                        
003246   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003248   6ee1     MOVWF     0xe1,0x0                                                                                        
00324a   5010     MOVF      0x10,0x0,0x0                                                                                    
00324c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00324e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
003250   ffd9                                                                                                               
003252   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                                                                                                            C:\fw\midicontroller\x011a\usbapplet.c
                                           //This handles data over report ID 44.	                                          C:\fw\midicontroller\x011a\usbapplet.c
003254   cfd9     MOVFF     0xfd9,0xfe6    unsigned char	ProcessGenericTransferh2d(void) {                                  C:\fw\midicontroller\x011a\usbapplet.c
003256   ffe6                                                                                                               
003258   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00325a   ffd9                                                                                                               
00325c   0e02     MOVLW     0x2                                                                                             
00325e   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	unsigned char index, cmdrecognized;                                             C:\fw\midicontroller\x011a\usbapplet.c
                                           	                                                                                C:\fw\midicontroller\x011a\usbapplet.c
003260   52de     MOVF      0xde,0x1,0x0   	cmdrecognized = true;                                                           C:\fw\midicontroller\x011a\usbapplet.c
003262   0e01     MOVLW     0x1                                                                                             
003264   6edd     MOVWF     0xdd,0x0                                                                                        
003266   c072     MOVFF     0x72,0x140     	PresentCmd = USBEP0DataInBuffer[1];                                             C:\fw\midicontroller\x011a\usbapplet.c
003268   f140                                                                                                               
00326a   0100     MOVLB     0x0            	switch (USBEP0DataInBuffer[1]) {                                                C:\fw\midicontroller\x011a\usbapplet.c
00326c   5172     MOVF      0x72,0x0,0x1                                                                                    
00326e   0a04     XORLW     0x4                                                                                             
003270   e006     BZ        0x327e                                                                                          
003272   0a07     XORLW     0x7                                                                                             
003274   e003     BZ        0x327c                                                                                          
                                           		case	WRITE_NVR:                                                                C:\fw\midicontroller\x011a\usbapplet.c
                                           			                                                                              C:\fw\midicontroller\x011a\usbapplet.c
00327c   d001     BRA       0x3280         			break;                                                                        C:\fw\midicontroller\x011a\usbapplet.c
                                           		case	READ_NVR:                                                                 C:\fw\midicontroller\x011a\usbapplet.c
                                           			//address = whatever..                                                        C:\fw\midicontroller\x011a\usbapplet.c
00327e   d000     BRA       0x3280         			break;                                                                        C:\fw\midicontroller\x011a\usbapplet.c
                                           		default:                                                                       C:\fw\midicontroller\x011a\usbapplet.c
003276   0e01     MOVLW     0x1            			cmdrecognized = false;                                                        C:\fw\midicontroller\x011a\usbapplet.c
003278   6adb     CLRF      0xdb,0x0                                                                                        
00327a   d002     BRA       0x3280         			break;                                                                        C:\fw\midicontroller\x011a\usbapplet.c
                                           	}                                                                               C:\fw\midicontroller\x011a\usbapplet.c
003280   0e01     MOVLW     0x1            	return cmdrecognized;                                                           C:\fw\midicontroller\x011a\usbapplet.c
003282   50db     MOVF      0xdb,0x0,0x0                                                                                    
003284   6e10     MOVWF     0x10,0x0       }                                                                                C:\fw\midicontroller\x011a\usbapplet.c
003286   0e02     MOVLW     0x2                                                                                             
003288   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
00328a   e203     BC        0x3292                                                                                          
00328c   d000     BRA       0x328e                                                                                          
00328e   6ae1     CLRF      0xe1,0x0                                                                                        
003290   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003292   6ee1     MOVWF     0xe1,0x0                                                                                        
003294   5010     MOVF      0x10,0x0,0x0                                                                                    
003296   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003298   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00329a   ffd9                                                                                                               
00329c   0012     RETURN    0x0                                                                                             
                                           /*********************************************************************           C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            *                Microchip USB C18 Firmware Version 1.0                         C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            *********************************************************************           C:\fw\midicontroller\x011a\usbdescript.c
                                            * FileName:        usbdsc.c                                                     C:\fw\midicontroller\x011a\usbdescript.c
                                            * Dependencies:    See INCLUDES section below                                   C:\fw\midicontroller\x011a\usbdescript.c
                                            * Processor:       PIC18                                                        C:\fw\midicontroller\x011a\usbdescript.c
                                            * Compiler:        C18 2.30.01+                                                 C:\fw\midicontroller\x011a\usbdescript.c
                                            * Company:         Microchip Technology, Inc.                                   C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * Software License Agreement                                                    C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\fw\midicontroller\x011a\usbdescript.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\fw\midicontroller\x011a\usbdescript.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\fw\midicontroller\x011a\usbdescript.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\fw\midicontroller\x011a\usbdescript.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\fw\midicontroller\x011a\usbdescript.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\fw\midicontroller\x011a\usbdescript.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\fw\midicontroller\x011a\usbdescript.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\fw\midicontroller\x011a\usbdescript.c
                                            * civil liability for the breach of the terms and conditions of this            C:\fw\midicontroller\x011a\usbdescript.c
                                            * license.                                                                      C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\fw\midicontroller\x011a\usbdescript.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\fw\midicontroller\x011a\usbdescript.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\fw\midicontroller\x011a\usbdescript.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\fw\midicontroller\x011a\usbdescript.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\fw\midicontroller\x011a\usbdescript.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            ********************************************************************/           C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           /*********************************************************************           C:\fw\midicontroller\x011a\usbdescript.c
                                            * -usbdsc.c-                                                                    C:\fw\midicontroller\x011a\usbdescript.c
                                            * This file contains the USB descriptor information. It is used                 C:\fw\midicontroller\x011a\usbdescript.c
                                            * in conjunction with the usbdsc.h file. When a descriptor is added             C:\fw\midicontroller\x011a\usbdescript.c
                                            * or removed from the main configuration descriptor, i.e. CFG01,                C:\fw\midicontroller\x011a\usbdescript.c
                                            * the user must also change the descriptor structure defined in                 C:\fw\midicontroller\x011a\usbdescript.c
                                            * the usbdsc.h file. The structure is used to calculate the                     C:\fw\midicontroller\x011a\usbdescript.c
                                            * descriptor size, i.e. sizeof(CFG01).                                          C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * A typical configuration descriptor consists of:                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * At least one configuration descriptor (USB_CFG_DSC)                           C:\fw\midicontroller\x011a\usbdescript.c
                                            * One or more interface descriptors (USB_INTF_DSC)                              C:\fw\midicontroller\x011a\usbdescript.c
                                            * One or more endpoint descriptors (USB_EP_DSC)                                 C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * Naming Convention:                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                            * To resolve ambiguity, the naming convention are as followed:                  C:\fw\midicontroller\x011a\usbdescript.c
                                            * - USB_CFG_DSC type should be named cdxx, where xx is the                      C:\fw\midicontroller\x011a\usbdescript.c
                                            *   configuration number. This number should match the actual                   C:\fw\midicontroller\x011a\usbdescript.c
                                            *   index value of this configuration.                                          C:\fw\midicontroller\x011a\usbdescript.c
                                            * - USB_INTF_DSC type should be named i<yy>a<zz>, where yy is the               C:\fw\midicontroller\x011a\usbdescript.c
                                            *   interface number and zz is the alternate interface number.                  C:\fw\midicontroller\x011a\usbdescript.c
                                            * - USB_EP_DSC type should be named ep<##><d>_i<yy>a<zz>, where                 C:\fw\midicontroller\x011a\usbdescript.c
                                            *   ## is the endpoint number and d is the direction of transfer.               C:\fw\midicontroller\x011a\usbdescript.c
                                            *   The interface name should also be listed as a suffix to identify            C:\fw\midicontroller\x011a\usbdescript.c
                                            *   which interface does the endpoint belong to.                                C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * Example:                                                                      C:\fw\midicontroller\x011a\usbdescript.c
                                            * If a device has one configuration, two interfaces; interface 0                C:\fw\midicontroller\x011a\usbdescript.c
                                            * has two endpoints (in and out), and interface 1 has one endpoint(in).         C:\fw\midicontroller\x011a\usbdescript.c
                                            * Then the CFG01 structure in the usbdsc.h should be:                           C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * #define CFG01 rom struct                            \                         C:\fw\midicontroller\x011a\usbdescript.c
                                            * {   USB_CFG_DSC             cd01;                   \                         C:\fw\midicontroller\x011a\usbdescript.c
                                            *     USB_INTF_DSC            i00a00;                 \                         C:\fw\midicontroller\x011a\usbdescript.c
                                            *     USB_EP_DSC              ep01o_i00a00;           \                         C:\fw\midicontroller\x011a\usbdescript.c
                                            *     USB_EP_DSC              ep01i_i00a00;           \                         C:\fw\midicontroller\x011a\usbdescript.c
                                            *     USB_INTF_DSC            i01a00;                 \                         C:\fw\midicontroller\x011a\usbdescript.c
                                            *     USB_EP_DSC              ep02i_i01a00;           \                         C:\fw\midicontroller\x011a\usbdescript.c
                                            * } cfg01                                                                       C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * Note the hierarchy of the descriptors above, it follows the USB               C:\fw\midicontroller\x011a\usbdescript.c
                                            * specification requirement. All endpoints belonging to an interface            C:\fw\midicontroller\x011a\usbdescript.c
                                            * should be listed immediately after that interface.                            C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * -------------------------------------------------------------------           C:\fw\midicontroller\x011a\usbdescript.c
                                            * Filling in the descriptor values in the usbdsc.c file:                        C:\fw\midicontroller\x011a\usbdescript.c
                                            * -------------------------------------------------------------------           C:\fw\midicontroller\x011a\usbdescript.c
                                            * Most items should be self-explanatory, however, a few will be                 C:\fw\midicontroller\x011a\usbdescript.c
                                            * explained for clarification.                                                  C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * [Configuration Descriptor(USB_CFG_DSC)]                                       C:\fw\midicontroller\x011a\usbdescript.c
                                            * The configuration attribute must always have the _DEFAULT                     C:\fw\midicontroller\x011a\usbdescript.c
                                            * definition at the minimum. Additional options can be ORed                     C:\fw\midicontroller\x011a\usbdescript.c
                                            * to the _DEFAULT attribute. Available options are _SELF and _RWU.              C:\fw\midicontroller\x011a\usbdescript.c
                                            * These definitions are defined in the usbdefs_std_dsc.h file. The              C:\fw\midicontroller\x011a\usbdescript.c
                                            * _SELF tells the USB host that this device is self-powered. The                C:\fw\midicontroller\x011a\usbdescript.c
                                            * _RWU tells the USB host that this device supports Remote Wakeup.              C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * [Endpoint Descriptor(USB_EP_DSC)]                                             C:\fw\midicontroller\x011a\usbdescript.c
                                            * Assume the following example:                                                 C:\fw\midicontroller\x011a\usbdescript.c
                                            * sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_BULK,64,0x00                             C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * The first two parameters are self-explanatory. They specify the               C:\fw\midicontroller\x011a\usbdescript.c
                                            * length of this endpoint descriptor (7) and the descriptor type.               C:\fw\midicontroller\x011a\usbdescript.c
                                            * The next parameter identifies the endpoint, the definitions are               C:\fw\midicontroller\x011a\usbdescript.c
                                            * defined in usbdefs_std_dsc.h and has the following naming                     C:\fw\midicontroller\x011a\usbdescript.c
                                            * convention:                                                                   C:\fw\midicontroller\x011a\usbdescript.c
                                            * _EP<##>_<dir>                                                                 C:\fw\midicontroller\x011a\usbdescript.c
                                            * where ## is the endpoint number and dir is the direction of                   C:\fw\midicontroller\x011a\usbdescript.c
                                            * transfer. The dir has the value of either 'OUT' or 'IN'.                      C:\fw\midicontroller\x011a\usbdescript.c
                                            * The next parameter identifies the type of the endpoint. Available             C:\fw\midicontroller\x011a\usbdescript.c
                                            * options are _BULK, _INT, _ISO, and _CTRL. The _CTRL is not                    C:\fw\midicontroller\x011a\usbdescript.c
                                            * typically used because the default control transfer endpoint is               C:\fw\midicontroller\x011a\usbdescript.c
                                            * not defined in the USB descriptors. When _ISO option is used,                 C:\fw\midicontroller\x011a\usbdescript.c
                                            * addition options can be ORed to _ISO. Example:                                C:\fw\midicontroller\x011a\usbdescript.c
                                            * _ISO|_AD|_FE                                                                  C:\fw\midicontroller\x011a\usbdescript.c
                                            * This describes the endpoint as an isochronous pipe with adaptive              C:\fw\midicontroller\x011a\usbdescript.c
                                            * and feedback attributes. See usbdefs_std_dsc.h and the USB                    C:\fw\midicontroller\x011a\usbdescript.c
                                            * specification for details. The next parameter defines the size of             C:\fw\midicontroller\x011a\usbdescript.c
                                            * the endpoint. The last parameter in the polling interval.                     C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * -------------------------------------------------------------------           C:\fw\midicontroller\x011a\usbdescript.c
                                            * Adding a USB String                                                           C:\fw\midicontroller\x011a\usbdescript.c
                                            * -------------------------------------------------------------------           C:\fw\midicontroller\x011a\usbdescript.c
                                            * A string descriptor array should have the following format:                   C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * rom struct{byte bLength;byte bDscType;word string[size];}sdxxx={              C:\fw\midicontroller\x011a\usbdescript.c
                                            * sizeof(sdxxx),DSC_STR,<text>};                                                C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * The above structure provides a means for the C compiler to                    C:\fw\midicontroller\x011a\usbdescript.c
                                            * calculate the length of string descriptor sdxxx, where xxx is the             C:\fw\midicontroller\x011a\usbdescript.c
                                            * index number. The first two bytes of the descriptor are descriptor            C:\fw\midicontroller\x011a\usbdescript.c
                                            * length and type. The rest <text> are string texts which must be               C:\fw\midicontroller\x011a\usbdescript.c
                                            * in the unicode format. The unicode format is achieved by declaring            C:\fw\midicontroller\x011a\usbdescript.c
                                            * each character as a word type. The whole text string is declared              C:\fw\midicontroller\x011a\usbdescript.c
                                            * as a word array with the number of characters equals to <size>.               C:\fw\midicontroller\x011a\usbdescript.c
                                            * <size> has to be manually counted and entered into the array                  C:\fw\midicontroller\x011a\usbdescript.c
                                            * declaration. Let's study this through an example:                             C:\fw\midicontroller\x011a\usbdescript.c
                                            * if the string is "USB" , then the string descriptor should be:                C:\fw\midicontroller\x011a\usbdescript.c
                                            * (Using index 02)                                                              C:\fw\midicontroller\x011a\usbdescript.c
                                            * rom struct{byte bLength;byte bDscType;word string[3];}sd002={                 C:\fw\midicontroller\x011a\usbdescript.c
                                            * sizeof(sd002),DSC_STR,'U','S','B'};                                           C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * A USB project may have multiple strings and the firmware supports             C:\fw\midicontroller\x011a\usbdescript.c
                                            * the management of multiple strings through a look-up table.                   C:\fw\midicontroller\x011a\usbdescript.c
                                            * The look-up table is defined as:                                              C:\fw\midicontroller\x011a\usbdescript.c
                                            * rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&sd001,&sd002};             C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * The above declaration has 3 strings, sd000, sd001, and sd002.                 C:\fw\midicontroller\x011a\usbdescript.c
                                            * Strings can be removed or added. sd000 is a specialized string                C:\fw\midicontroller\x011a\usbdescript.c
                                            * descriptor. It defines the language code, usually this is                     C:\fw\midicontroller\x011a\usbdescript.c
                                            * US English (0x0409). The index of the string must match the index             C:\fw\midicontroller\x011a\usbdescript.c
                                            * position of the USB_SD_Ptr array, &sd000 must be in position                  C:\fw\midicontroller\x011a\usbdescript.c
                                            * USB_SD_Ptr[0], &sd001 must be in position USB_SD_Ptr[1] and so on.            C:\fw\midicontroller\x011a\usbdescript.c
                                            * The look-up table USB_SD_Ptr is used by the get string handler                C:\fw\midicontroller\x011a\usbdescript.c
                                            * function in usb9.c.                                                           C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * -------------------------------------------------------------------           C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * The look-up table scheme also applies to the configuration                    C:\fw\midicontroller\x011a\usbdescript.c
                                            * descriptor. A USB device may have multiple configuration                      C:\fw\midicontroller\x011a\usbdescript.c
                                            * descriptors, i.e. CFG01, CFG02, etc. To add a configuration                   C:\fw\midicontroller\x011a\usbdescript.c
                                            * descriptor, user must implement a structure similar to CFG01.                 C:\fw\midicontroller\x011a\usbdescript.c
                                            * The next step is to add the configuration descriptor name, i.e.               C:\fw\midicontroller\x011a\usbdescript.c
                                            * cfg01, cfg02,.., to the look-up table USB_CD_Ptr. USB_CD_Ptr[0]               C:\fw\midicontroller\x011a\usbdescript.c
                                            * is a dummy place holder since configuration 0 is the un-configured            C:\fw\midicontroller\x011a\usbdescript.c
                                            * state according to the definition in the USB specification.                   C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            ********************************************************************/           C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           /*********************************************************************           C:\fw\midicontroller\x011a\usbdescript.c
                                            * Descriptor specific type definitions are defined in:                          C:\fw\midicontroller\x011a\usbdescript.c
                                            * system\usb\usbdefs\usbdefs_std_dsc.h                                          C:\fw\midicontroller\x011a\usbdescript.c
                                            *                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                            * Configuration information is defined in:                                      C:\fw\midicontroller\x011a\usbdescript.c
                                            * autofiles\usbcfg.h                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                            ********************************************************************/           C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           #define POLLING_INTERVAL	40                                                      C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           /** I N C L U D E S *************************************************/           C:\fw\midicontroller\x011a\usbdescript.c
                                           #include "typedefs.h"                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           #include "usb.h"                                                                 C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           /** C O N S T A N T S ************************************************/          C:\fw\midicontroller\x011a\usbdescript.c
                                           #pragma romdata                                                                  C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           /* Device Descriptor */                                                          C:\fw\midicontroller\x011a\usbdescript.c
                                           rom USB_DEV_DSC device_dsc=                                                      C:\fw\midicontroller\x011a\usbdescript.c
                                           {                                                                                C:\fw\midicontroller\x011a\usbdescript.c
                                               0x12,     	// bLength                                                        C:\fw\midicontroller\x011a\usbdescript.c
                                               0x01,     	// bDescriptorType                                                C:\fw\midicontroller\x011a\usbdescript.c
                                               0x0110,    	// bcdUSB (spec release #)                                       C:\fw\midicontroller\x011a\usbdescript.c
                                               0x00,     	// bDeviceClass                                                   C:\fw\midicontroller\x011a\usbdescript.c
                                               0x00,     	// bDeviceSubClass                                                C:\fw\midicontroller\x011a\usbdescript.c
                                               0x00,     	// bDeviceProtocol                                                C:\fw\midicontroller\x011a\usbdescript.c
                                               EP0_BUFF_SIZE,     	// bMaxPacketSize0                                       C:\fw\midicontroller\x011a\usbdescript.c
                                               0x09AE,     // idVendor                                                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x4430,		// idProduct                                                        C:\fw\midicontroller\x011a\usbdescript.c
                                               0x0010,    	// bcdDevice : Project version = 0.10                            C:\fw\midicontroller\x011a\usbdescript.c
                                               INDEX_MANUFACTURER,	// Index of string Descriptor describing manufacturer      C:\fw\midicontroller\x011a\usbdescript.c
                                               INDEX_NAME,			// Index of string Descriptor describing product               C:\fw\midicontroller\x011a\usbdescript.c
                                               INDEX_SERIALNUM,	// Index of string Descriptor describing the device's serial number C:\fw\midicontroller\x011a\usbdescript.c
                                               0x01				// bNumConfigurations : renaud 1 configuration                       C:\fw\midicontroller\x011a\usbdescript.c
                                           };                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           /* Configuration 1 Descriptor */                                                 C:\fw\midicontroller\x011a\usbdescript.c
                                           CFG01={                                                                          C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x09,		// bLength: Configuration Descriptor size                                C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x02,		// bDescriptorType: Configuration                                        C:\fw\midicontroller\x011a\usbdescript.c
                                           	P1_CONFDESC_LEN,	//(word) Length of configuration descriptor. **Renaud : To update C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x01,		// bNumInterfaces: 1 interface.                                          C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x01,		// bConfigurationValue: Configuration value = 1                          C:\fw\midicontroller\x011a\usbdescript.c
                                           	0,			// iConfiguration: Index of string descriptor describing the configuration (None) C:\fw\midicontroller\x011a\usbdescript.c
                                           //	0x80,		// bmAttributes: Bus powered and NO Remote wakeup                      C:\fw\midicontroller\x011a\usbdescript.c
                                           	0xA0,		// bmAttributes: Bus powered and Remote wakeup ** Renaud : changed from 0xE0 C:\fw\midicontroller\x011a\usbdescript.c
                                           //	0xC0,		// bmAttributes: Self powered and NO Remote wakeup                     C:\fw\midicontroller\x011a\usbdescript.c
                                           //	0xE0,		// bmAttributes: Self powered and Remote wakeup                        C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x32,		// MaxPower 50 mA : ** Renaud : MaxPowerself-powered draws 0 mA from the bus.  C:\fw\midicontroller\x011a\usbdescript.c
                                           //	0x00,		// 0 mA power consumption.                                             C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           // Interface descriptor (Interface 0 = DemoKit)                                  C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x09,		// bLength: Interface Descriptor size                                    C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x04,		// bDescriptorType: Interface descriptor type  ** Renaud : to check      C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x00,		// bInterfaceNumber: Interface Number = 0                                C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x00,		// bAlternateSetting: No Alternate setting                               C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x02,		// bNumEndpoints:                                                        C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x03,		// bInterfaceClass: HID                                                  C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x00,		// bInterfaceSubClass:                                                   C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x00,		// bInterfaceProtocol: ** Renaud : changed from 2 (protocol - mouse in tripplite descriptor) to 0 : no protocol  C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x00,		// iInterface: Index of string descriptor (No string value)              C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           // HID descriptor (Demokit)                                                      C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x09,		// bLength: HID Descriptor size                                          C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x21,		// bDescriptorType: HID                                                  C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x0110,		// (word) bcdHID: HID Class Spec release number (1.10) ** Renaud : I let rev 1.10, but Tripplite has HID class release number (1.00) C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x00,		// bCountryCode: Hardware target country US ** Renaud changed from 0x21 (US) to 0x00 (none specified) C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x01,		// bNumDescriptors: Number of HID class descriptors to follow            C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x22,		// bDescriptorType: Report                                               C:\fw\midicontroller\x011a\usbdescript.c
                                           	HID_RPT_UPS_SIZE,	// (word) Length of report descriptor interface 0 (2 bytes) ** Renaud : To update C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           // Endpoint 1 descriptor (Demokit)                                               C:\fw\midicontroller\x011a\usbdescript.c
                                           //	0x07,		// bLength: Endpoint Descriptor size                                   C:\fw\midicontroller\x011a\usbdescript.c
                                           //	0x05,		// bDescriptorType: Endpoint descriptor type   ** Renaud : To check    C:\fw\midicontroller\x011a\usbdescript.c
                                           //	0x81,		// bEndpointAddress: Endpoint  1 IN                                    C:\fw\midicontroller\x011a\usbdescript.c
                                           //	0x03,		// bmAttributes: Interrupt endpoint                                    C:\fw\midicontroller\x011a\usbdescript.c
                                           //	0x0008,		// wMaxPacketSize(LSB):                                              C:\fw\midicontroller\x011a\usbdescript.c
                                           //	POLLING_INTERVAL       // bInterval: Polling Interval (40 ms = 0x28)          C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP01_OUT,_INT,HID_INT_OUT_EP_SIZE,POLLING_INTERVAL, C:\fw\midicontroller\x011a\usbdescript.c
                                               sizeof(USB_EP_DSC),DSC_EP,_EP01_IN,_INT,HID_INT_IN_EP_SIZE,POLLING_INTERVAL  C:\fw\midicontroller\x011a\usbdescript.c
                                           };                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           //2/8/05 JD language selection I think..                                         C:\fw\midicontroller\x011a\usbdescript.c
                                           rom struct{byte bLength;byte bDscType;word string[1];}sd000={                    C:\fw\midicontroller\x011a\usbdescript.c
                                           sizeof(sd000),DSC_STR,0x0409};                                                   C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           //Manufacturer string                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           rom struct{byte bLength;byte bDscType;word string[11];}MfrString={               C:\fw\midicontroller\x011a\usbdescript.c
                                           sizeof(MfrString),DSC_STR,                                                       C:\fw\midicontroller\x011a\usbdescript.c
                                           'J','o','e'};                                                                    C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           //Product String                                                                 C:\fw\midicontroller\x011a\usbdescript.c
                                           rom struct{byte bLength;byte bDscType;word string[21];}PrdString={               C:\fw\midicontroller\x011a\usbdescript.c
                                           sizeof(PrdString),DSC_STR,                                                       C:\fw\midicontroller\x011a\usbdescript.c
                                           'M','I','D','I',' ','D','e','v','i','c','e',' '};                                C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           //Serial Number                                                                  C:\fw\midicontroller\x011a\usbdescript.c
                                           rom struct{byte bLength;byte bDscType;word string[16];}SerialNum={               C:\fw\midicontroller\x011a\usbdescript.c
                                           sizeof(SerialNum),DSC_STR,                                                       C:\fw\midicontroller\x011a\usbdescript.c
                                           '6','9','1','2','0','6','0','B',' '};                                            C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           //the reason for this structure is so that sizeof() returns a value.             C:\fw\midicontroller\x011a\usbdescript.c
                                           rom struct{byte report[HID_RPT_UPS_SIZE];}hid_rpt_UPS={                          C:\fw\midicontroller\x011a\usbdescript.c
                                           //Production test information                                                    C:\fw\midicontroller\x011a\usbdescript.c
                                               0x06, 0xff, 0xff,              //     USAGE_PAGE (Vendor Defined Page 0xffff) C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x09,  0x01,               		// USAGE (Vendor Usage 1)                          C:\fw\midicontroller\x011a\usbdescript.c
                                           	0xa1,  0x01,              	  // COLLECTION (Application)                        C:\fw\midicontroller\x011a\usbdescript.c
                                               0x75, 0x08,                    //       REPORT_SIZE (8)                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x95, 0x01,                    //       REPORT_COUNT (1)                     C:\fw\midicontroller\x011a\usbdescript.c
                                               0x26, 0xff, 0x00,              //       LOGICAL_MAXIMUM (255)                C:\fw\midicontroller\x011a\usbdescript.c
                                               0x15, 0x00,                    //       LOGICAL_MINIMUM (0)                  C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           //NVR Operations                                                                 C:\fw\midicontroller\x011a\usbdescript.c
                                               0x85, 0x96,                    //       REPORT_ID (150)                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x09, 0xC0,                    //       USAGE (***NVR Read/Write Data)       C:\fw\midicontroller\x011a\usbdescript.c
                                               0xb1, 0x02,                    //       FEATURE (Data,Var,Abs)               C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                               0x75, 0x20,                    //       REPORT_SIZE (32)                     C:\fw\midicontroller\x011a\usbdescript.c
                                               0x85, 0xB4,                    //       REPORT_ID (180)                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x09, 0xD2,                    //       USAGE (***NVR Page Read/Write Data)  C:\fw\midicontroller\x011a\usbdescript.c
                                               0xb1, 0x02,                    //       FEATURE (Data,Var,Abs)               C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                               0x75, 0x10,                    //       REPORT_SIZE (16)                     C:\fw\midicontroller\x011a\usbdescript.c
                                               0x85, 0x97,                    //       REPORT_ID (151)                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x09, 0xC1,                    //       USAGE (***NVR Address 16bit)         C:\fw\midicontroller\x011a\usbdescript.c
                                               0xb1, 0x02,                    //       FEATURE (Data,Var,Abs)               C:\fw\midicontroller\x011a\usbdescript.c
                                               0x75, 0x08,                    //       REPORT_SIZE (8)                      C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           //RAM Operations                                                                 C:\fw\midicontroller\x011a\usbdescript.c
                                               0x85, 0x98,                    //       REPORT_ID (152)                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x09, 0xC2,                    //       USAGE (***RAM Read/Write Data)       C:\fw\midicontroller\x011a\usbdescript.c
                                               0xb1, 0x02,                    //       FEATURE (Data,Var,Abs)               C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                               0x75, 0x10,                    //       REPORT_SIZE (16)                     C:\fw\midicontroller\x011a\usbdescript.c
                                               0x85, 0x99,                    //       REPORT_ID (153)                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x09, 0xC3,                    //       USAGE (***RAM Address 16bit)         C:\fw\midicontroller\x011a\usbdescript.c
                                               0xb1, 0x02,                    //       FEATURE (Data,Var,Abs)               C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           //ROM Operations                                                                 C:\fw\midicontroller\x011a\usbdescript.c
                                               0x85, 0x9C,                    //       REPORT_ID (156)                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x09, 0xD4,                    //       USAGE (***ROM Read/Write Data)       C:\fw\midicontroller\x011a\usbdescript.c
                                               0xb1, 0x02,                    //       FEATURE (Data,Var,Abs)               C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                               0x75, 0x10,                    //       REPORT_SIZE (16)                     C:\fw\midicontroller\x011a\usbdescript.c
                                               0x85, 0x9D,                    //       REPORT_ID (157)                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x09, 0xD5,                    //       USAGE (***ROM Address 16bit)         C:\fw\midicontroller\x011a\usbdescript.c
                                               0xb1, 0x02,                    //       FEATURE (Data,Var,Abs)               C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           //Production test protocol #                                                     C:\fw\midicontroller\x011a\usbdescript.c
                                               0x85, 0x9B,                    //       REPORT_ID (155)                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x09, 0xC5,                    //       USAGE (***Production Test Protocol #) C:\fw\midicontroller\x011a\usbdescript.c
                                               0xb1, 0x02,                    //       FEATURE (Data,Var,Abs)               C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                               0x75, 0x20,                    //       REPORT_SIZE (32)                     C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                               0x85, 0xAF,                    //       REPORT_ID (175)                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x09, 0xE9,                    //       USAGE (***Voltage Data)              C:\fw\midicontroller\x011a\usbdescript.c
                                               0xb1, 0x02,                    //       FEATURE (Data,Var,Abs)               C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                               0x85, 0xAF,                    //       REPORT_ID (175)                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x09, 0xE9,                    //       USAGE (***Voltage Data)              C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x81, 0xa2,					   //	 	INPUT (Data,Var,Abs, Vol, NPrf)                         C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                               0x76, 0x00, 0x02,              //       REPORT_SIZE (512)                    C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                               0x85, 0xB0,                    //       REPORT_ID (176)                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x09, 0xEA,                    //       USAGE (***Voltage Data Bulk)         C:\fw\midicontroller\x011a\usbdescript.c
                                               0xb1, 0x02,                    //       FEATURE (Data,Var,Abs)               C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           //Firmware Partnumber                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x75, 0x20,						//	   REPORT_SIZE (32)                                         C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x85, 0xC2,						//	   REPORT_ID (194)                                          C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x09, 0xD6,						//	   USAGE (***Firmware Partnumber 32bit)                     C:\fw\midicontroller\x011a\usbdescript.c
                                           	0xb1, 0x02,						//	   FEATURE (Data,Var,Abs)                                   C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           //Production test password = 866E1942                                            C:\fw\midicontroller\x011a\usbdescript.c
                                               0x85, 0x9A,                    //       REPORT_ID (154)                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x09, 0xC4,                    //       USAGE (***Production test Password - 32bit) C:\fw\midicontroller\x011a\usbdescript.c
                                               0xb1, 0x02,                    //       FEATURE (Data,Var,Abs)               C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           //The input report		                                                             C:\fw\midicontroller\x011a\usbdescript.c
                                               0x75, 0x08,                    //       REPORT_SIZE (8)                      C:\fw\midicontroller\x011a\usbdescript.c
                                               0x95, 63,                    //       REPORT_COUNT (63)                      C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x85, 44,					// REPORT_ID 44                                                   C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x09, 0x04,					// usage - vendor defined                                       C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x81, 0x02,					// Input (Data, Variable, Absolute)                             C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x09, 0x04,					// usage - vendor defined                                       C:\fw\midicontroller\x011a\usbdescript.c
                                               0xb1, 0x02,                 //       FEATURE (Data,Var,Abs)                  C:\fw\midicontroller\x011a\usbdescript.c
                                           		                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                           //The output report		                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x09, 0x06,					// usage - vendor defined                                       C:\fw\midicontroller\x011a\usbdescript.c
                                           	0x91, 0x02,					// Output (Data, Variable, Absolute)                            C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                               0xc0                          //     END_COLLECTION                          C:\fw\midicontroller\x011a\usbdescript.c
                                           };                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                           //** Renaud : end_ReportDescriptor                                               C:\fw\midicontroller\x011a\usbdescript.c
                                           	                                                                                C:\fw\midicontroller\x011a\usbdescript.c
                                           rom const unsigned char *rom USB_CD_Ptr[]={&cfg01,&cfg01};                       C:\fw\midicontroller\x011a\usbdescript.c
                                           rom const unsigned char *rom USB_SD_Ptr[]={&sd000,&MfrString,&PrdString,&SerialNum}; C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           rom pFunc ClassReqHandler[1]=                                                    C:\fw\midicontroller\x011a\usbdescript.c
                                           {                                                                                C:\fw\midicontroller\x011a\usbdescript.c
                                               &USBCheckHIDRequest                                                          C:\fw\midicontroller\x011a\usbdescript.c
                                           };                                                                               C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           #pragma code                                                                     C:\fw\midicontroller\x011a\usbdescript.c
                                                                                                                            C:\fw\midicontroller\x011a\usbdescript.c
                                           /** EOF usbdsc.c ****************************************************/           C:\fw\midicontroller\x011a\usbdescript.c
                                           //############################################################################### C:\fw\midicontroller\x011a\rs232.c
                                           //#										       						       		#                                             C:\fw\midicontroller\x011a\rs232.c
                                           //#			Author: Joe Dunne											 		#                                           C:\fw\midicontroller\x011a\rs232.c
                                           //#			RS232 Communication ROUTINE											#                                    C:\fw\midicontroller\x011a\rs232.c
                                           //#			File Name: RXCOMM.ASM												#                                         C:\fw\midicontroller\x011a\rs232.c
                                           //#																				#                                                         C:\fw\midicontroller\x011a\rs232.c
                                           //#			Updated 2/02/05 by JD												#                                         C:\fw\midicontroller\x011a\rs232.c
                                           //#									      	       	       	       	       		#                            C:\fw\midicontroller\x011a\rs232.c
                                           //############################################################################### C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           #include	"c_system.h"                                                            C:\fw\midicontroller\x011a\rs232.c
                                           #include "typedefs.h"                                                            C:\fw\midicontroller\x011a\rs232.c
                                           #include "usb.h"                                                                 C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           #define	FW_REV						0x10                                                         C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           #define	UPS_TYPE					(2|FW_REV)                                                  C:\fw\midicontroller\x011a\rs232.c
                                           #define	INVALID_REQUEST				0xff                                                  C:\fw\midicontroller\x011a\rs232.c
                                           #define	PRODUCTION_TEST_PROTOCOL	0x0003                                          C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           extern rom struct{byte bLength;byte bDscType;word string[];}SerialNum;           C:\fw\midicontroller\x011a\rs232.c
                                           extern rom struct{byte bLength;byte bDscType;word string[24];}MfrString;         C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           void	RemCapCalculation(void);                                                    C:\fw\midicontroller\x011a\rs232.c
                                           void	EE_READ(void);                                                              C:\fw\midicontroller\x011a\rs232.c
                                           void	D_DIV(void);                                                                C:\fw\midicontroller\x011a\rs232.c
                                           void	SQRT_16BIT(void);		//result is stored in RES0.                              C:\fw\midicontroller\x011a\rs232.c
                                           void	HIDGetReportHandler(void);                                                  C:\fw\midicontroller\x011a\rs232.c
                                           unsigned char	READ_SYSTEM_NVR(void);                                             C:\fw\midicontroller\x011a\rs232.c
                                           void	EE_PAGE_WRITE(void);                                                        C:\fw\midicontroller\x011a\rs232.c
                                           void	BOOT_LOAD_MODE(void);                                                       C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           //--------------------------------------------------------------                 C:\fw\midicontroller\x011a\rs232.c
                                           //						Handle received query                                                    C:\fw\midicontroller\x011a\rs232.c
                                           //--------------------------------------------------------------                 C:\fw\midicontroller\x011a\rs232.c
002be0   cfd9     MOVFF     0xfd9,0xfe6    void	PROCESS_COMM_REQUEST(void) {                                                C:\fw\midicontroller\x011a\rs232.c
002be2   ffe6                                                                                                               
002be4   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002be6   ffd9                                                                                                               
002be8   0e11     MOVLW     0x11                                                                                            
002bea   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	unsigned char *RcvPtr;                                                          C:\fw\midicontroller\x011a\rs232.c
                                           	unsigned char tempvar1, tempvar0;                                               C:\fw\midicontroller\x011a\rs232.c
                                           	far unsigned char *Data;                                                        C:\fw\midicontroller\x011a\rs232.c
                                           	BitField ByteToSend;                                                            C:\fw\midicontroller\x011a\rs232.c
                                           	TwoBytes tempreg, tempnum0, value;                                              C:\fw\midicontroller\x011a\rs232.c
                                           	FourBytes longreg;                                                              C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
002bec   0100     MOVLB     0x0            	ResponseType = 0xFF;		//no response                                             C:\fw\midicontroller\x011a\rs232.c
002bee   69b1     SETF      0xb1,0x1                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           	//USB query                                                                     C:\fw\midicontroller\x011a\rs232.c
002bf0   0100     MOVLB     0x0            	USBDataPointer = 1;		//the 0th byte is the reportid                             C:\fw\midicontroller\x011a\rs232.c
002bf2   0e01     MOVLW     0x1                                                                                             
002bf4   6f70     MOVWF     0x70,0x1                                                                                        
002bf6   0e72     MOVLW     0x72           	RcvPtr = (unsigned char *)&USBEP0DataInBuffer[1];                               C:\fw\midicontroller\x011a\rs232.c
002bf8   6ede     MOVWF     0xde,0x0                                                                                        
002bfa   0e00     MOVLW     0x0                                                                                             
002bfc   6edd     MOVWF     0xdd,0x0                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           //Polling command:                                                               C:\fw\midicontroller\x011a\rs232.c
002bfe   0104     MOVLB     0x4            	if (SetupPkt.bRequest == GET_REPORT) {                                          C:\fw\midicontroller\x011a\rs232.c
002c00   0511     DECF      0x11,0x0,0x1                                                                                    
002c02   e001     BZ        0x2c06                                                                                          
002c04   d0a2     BRA       0x2d4a                                                                                          
002c06   5112     MOVF      0x12,0x0,0x1   		switch (SetupPkt._byte[2]) {                                                   C:\fw\midicontroller\x011a\rs232.c
002c08   0ab4     XORLW     0xb4                                                                                            
002c0a   e101     BNZ       0x2c0e                                                                                          
002c0c   d085     BRA       0x2d18                                                                                          
002c0e   0a2f     XORLW     0x2f                                                                                            
002c10   e101     BNZ       0x2c14                                                                                          
002c12   d077     BRA       0x2d02                                                                                          
002c14   0a06     XORLW     0x6                                                                                             
002c16   e069     BZ        0x2cea                                                                                          
002c18   0a01     XORLW     0x1                                                                                             
002c1a   e05a     BZ        0x2cd0                                                                                          
002c1c   0a05     XORLW     0x5                                                                                             
002c1e   e04c     BZ        0x2cb8                                                                                          
002c20   0a01     XORLW     0x1                                                                                             
002c22   e036     BZ        0x2c90                                                                                          
002c24   0a0f     XORLW     0xf                                                                                             
002c26   e028     BZ        0x2c78                                                                                          
002c28   0a01     XORLW     0x1                                                                                             
002c2a   e01b     BZ        0x2c62                                                                                          
002c2c   0aba     XORLW     0xba                                                                                            
002c2e   e013     BZ        0x2c56                                                                                          
002c30   0a83     XORLW     0x83                                                                                            
002c32   e001     BZ        0x2c36                                                                                          
002c34   d089     BRA       0x2d48                                                                                          
                                           			                                                                              C:\fw\midicontroller\x011a\rs232.c
                                           		case 175:		//voltage data                                                      C:\fw\midicontroller\x011a\rs232.c
002c36   0100     MOVLB     0x0            			ResponseType = DATA_RETURNED;                                                 C:\fw\midicontroller\x011a\rs232.c
002c38   0e05     MOVLW     0x5                                                                                             
002c3a   6fb1     MOVWF     0xb1,0x1                                                                                        
002c3c   6ae6     CLRF      0xe6,0x0       			TXENQ(0);                                                                     C:\fw\midicontroller\x011a\rs232.c
002c3e   d934     RCALL     0x2ea8                                                                                          
002c40   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002c42   6ae6     CLRF      0xe6,0x0       			TXENQ(0);                                                                     C:\fw\midicontroller\x011a\rs232.c
002c44   d931     RCALL     0x2ea8                                                                                          
002c46   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002c48   6ae6     CLRF      0xe6,0x0       			TXENQ(0);                                                                     C:\fw\midicontroller\x011a\rs232.c
002c4a   d92e     RCALL     0x2ea8                                                                                          
002c4c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002c4e   6ae6     CLRF      0xe6,0x0       			TXENQ(0);                                                                     C:\fw\midicontroller\x011a\rs232.c
002c50   d92b     RCALL     0x2ea8                                                                                          
002c52   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002c54   d07a     BRA       0x2d4a         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           		case 44:		//generic data transfer device to host                               C:\fw\midicontroller\x011a\rs232.c
002c56   0100     MOVLB     0x0            			ResponseType = DATA_RETURNED;                                                 C:\fw\midicontroller\x011a\rs232.c
002c58   0e05     MOVLW     0x5                                                                                             
002c5a   6fb1     MOVWF     0xb1,0x1                                                                                        
                                           			                                                                              C:\fw\midicontroller\x011a\rs232.c
002c5c   ece8     CALL      0x31d0,0x0     			ProcessGenericTransferd2h();                                                  C:\fw\midicontroller\x011a\rs232.c
002c5e   f018                                                                                                               
002c60   d074     BRA       0x2d4a         			break;	                                                                       C:\fw\midicontroller\x011a\rs232.c
                                           			                                                                              C:\fw\midicontroller\x011a\rs232.c
                                           //production test commands:			                                                   C:\fw\midicontroller\x011a\rs232.c
                                           		case 150:		//NVR Read                                                          C:\fw\midicontroller\x011a\rs232.c
002c62   0100     MOVLB     0x0            			ResponseType = DATA_RETURNED;                                                 C:\fw\midicontroller\x011a\rs232.c
002c64   0e05     MOVLW     0x5                                                                                             
002c66   6fb1     MOVWF     0xb1,0x1                                                                                        
002c68   a8a0     BTFSS     0xa0,0x4,0x0   			if (1 && !PIE2bits.EEIE) {                                                    C:\fw\midicontroller\x011a\rs232.c
                                           //				EEAddress = NVRCommAddr.b_form.low;                                        C:\fw\midicontroller\x011a\rs232.c
                                           //				DISABLE_ALL_INTERRUPTS();                                                  C:\fw\midicontroller\x011a\rs232.c
                                           //				Temp6 = READ_SYSTEM_NVR();		//returns data through wreg                    C:\fw\midicontroller\x011a\rs232.c
                                           //				ENABLE_ALL_INTERRUPTS();                                                   C:\fw\midicontroller\x011a\rs232.c
                                           //				TXENQ(Temp6);                                                              C:\fw\midicontroller\x011a\rs232.c
                                           			}                                                                             C:\fw\midicontroller\x011a\rs232.c
002c6a   d005     BRA       0x2c76         			else {                                                                        C:\fw\midicontroller\x011a\rs232.c
002c6c   0e01     MOVLW     0x1            				ResponseType = COMMAND_REJECTED;                                             C:\fw\midicontroller\x011a\rs232.c
002c6e   6fb1     MOVWF     0xb1,0x1                                                                                        
002c70   68e6     SETF      0xe6,0x0       				TXENQ(INVALID_REQUEST);                                                      C:\fw\midicontroller\x011a\rs232.c
002c72   d91a     RCALL     0x2ea8                                                                                          
002c74   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           			}                                                                             C:\fw\midicontroller\x011a\rs232.c
002c76   d069     BRA       0x2d4a         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           			                                                                              C:\fw\midicontroller\x011a\rs232.c
                                           		case 151:		//NVR Address                                                       C:\fw\midicontroller\x011a\rs232.c
002c78   0100     MOVLB     0x0            			ResponseType = DATA_RETURNED;                                                 C:\fw\midicontroller\x011a\rs232.c
002c7a   0e05     MOVLW     0x5                                                                                             
002c7c   6fb1     MOVWF     0xb1,0x1                                                                                        
002c7e   c0b2     MOVFF     0xb2,0xfe6     			TXENQ(NVRCommAddr.b_form.low);		//low byte                                    C:\fw\midicontroller\x011a\rs232.c
002c80   ffe6                                                                                                               
002c82   d912     RCALL     0x2ea8                                                                                          
002c84   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002c86   c0b3     MOVFF     0xb3,0xfe6     			TXENQ(NVRCommAddr.b_form.high);		//high byte                                  C:\fw\midicontroller\x011a\rs232.c
002c88   ffe6                                                                                                               
002c8a   d90e     RCALL     0x2ea8                                                                                          
002c8c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002c8e   d05d     BRA       0x2d4a         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           		case 152:		//RAM Read                                                          C:\fw\midicontroller\x011a\rs232.c
002c90   0100     MOVLB     0x0            			ResponseType = DATA_RETURNED;                                                 C:\fw\midicontroller\x011a\rs232.c
002c92   0e05     MOVLW     0x5                                                                                             
002c94   6fb1     MOVWF     0xb1,0x1                                                                                        
002c96   0e04     MOVLW     0x4            			Data = (far unsigned char *)RAMCommAddr.s_form;                               C:\fw\midicontroller\x011a\rs232.c
002c98   c0b4     MOVFF     0xb4,0xfdb                                                                                      
002c9a   ffdb                                                                                                               
002c9c   0e05     MOVLW     0x5                                                                                             
002c9e   c0b5     MOVFF     0xb5,0xfdb                                                                                      
002ca0   ffdb                                                                                                               
002ca2   0e04     MOVLW     0x4            			TXENQ(*Data);                                                                 C:\fw\midicontroller\x011a\rs232.c
002ca4   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
002ca6   ffe9                                                                                                               
002ca8   0e05     MOVLW     0x5                                                                                             
002caa   cfdb     MOVFF     0xfdb,0xfea                                                                                     
002cac   ffea                                                                                                               
002cae   50ef     MOVF      0xef,0x0,0x0                                                                                    
002cb0   6ee6     MOVWF     0xe6,0x0                                                                                        
002cb2   d8fa     RCALL     0x2ea8                                                                                          
002cb4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002cb6   d049     BRA       0x2d4a         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           	                                                                                C:\fw\midicontroller\x011a\rs232.c
                                           		case 153:		//RAM Address                                                       C:\fw\midicontroller\x011a\rs232.c
002cb8   0100     MOVLB     0x0            			ResponseType = DATA_RETURNED;                                                 C:\fw\midicontroller\x011a\rs232.c
002cba   0e05     MOVLW     0x5                                                                                             
002cbc   6fb1     MOVWF     0xb1,0x1                                                                                        
002cbe   c0b4     MOVFF     0xb4,0xfe6     			TXENQ(RAMCommAddr.b_form.low);		//low byte                                    C:\fw\midicontroller\x011a\rs232.c
002cc0   ffe6                                                                                                               
002cc2   d8f2     RCALL     0x2ea8                                                                                          
002cc4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002cc6   c0b5     MOVFF     0xb5,0xfe6     			TXENQ(RAMCommAddr.b_form.high);		//high byte                                  C:\fw\midicontroller\x011a\rs232.c
002cc8   ffe6                                                                                                               
002cca   d8ee     RCALL     0x2ea8                                                                                          
002ccc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
002cce   d03d     BRA       0x2d4a         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           	                                                                                C:\fw\midicontroller\x011a\rs232.c
                                           		case 156:		//ROM Read                                                          C:\fw\midicontroller\x011a\rs232.c
002cd0   0100     MOVLB     0x0            			ResponseType = DATA_RETURNED;                                                 C:\fw\midicontroller\x011a\rs232.c
002cd2   0e05     MOVLW     0x5                                                                                             
002cd4   6fb1     MOVWF     0xb1,0x1                                                                                        
002cd6   c0b6     MOVFF     0xb6,0xff6     			TXENQ(*(near unsigned char rom *)ROMCommAddr.s_form);                         C:\fw\midicontroller\x011a\rs232.c
002cd8   fff6                                                                                                               
002cda   c0b7     MOVFF     0xb7,0xff7                                                                                      
002cdc   fff7                                                                                                               
002cde   0008     TBLRD                                                                                                     
002ce0   50f5     MOVF      0xf5,0x0,0x0                                                                                    
002ce2   6ee6     MOVWF     0xe6,0x0                                                                                        
002ce4   d8e1     RCALL     0x2ea8                                                                                          
002ce6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002ce8   d030     BRA       0x2d4a         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           	                                                                                C:\fw\midicontroller\x011a\rs232.c
                                           		case 157:		//ROM Address                                                       C:\fw\midicontroller\x011a\rs232.c
002cea   0100     MOVLB     0x0            			ResponseType = DATA_RETURNED;                                                 C:\fw\midicontroller\x011a\rs232.c
002cec   0e05     MOVLW     0x5                                                                                             
002cee   6fb1     MOVWF     0xb1,0x1                                                                                        
002cf0   c0b6     MOVFF     0xb6,0xfe6     			TXENQ(ROMCommAddr.b_form.low);		//low byte                                    C:\fw\midicontroller\x011a\rs232.c
002cf2   ffe6                                                                                                               
002cf4   d8d9     RCALL     0x2ea8                                                                                          
002cf6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002cf8   c0b7     MOVFF     0xb7,0xfe6     			TXENQ(ROMCommAddr.b_form.high);		//high byte                                  C:\fw\midicontroller\x011a\rs232.c
002cfa   ffe6                                                                                                               
002cfc   d8d5     RCALL     0x2ea8                                                                                          
002cfe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002d00   d024     BRA       0x2d4a         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           		case 155:		//production test protocol                                          C:\fw\midicontroller\x011a\rs232.c
002d02   0100     MOVLB     0x0            			ResponseType = DATA_RETURNED;                                                 C:\fw\midicontroller\x011a\rs232.c
002d04   0e05     MOVLW     0x5                                                                                             
002d06   6fb1     MOVWF     0xb1,0x1                                                                                        
002d08   0e03     MOVLW     0x3            			TXENQ(PRODUCTION_TEST_PROTOCOL&255);                                          C:\fw\midicontroller\x011a\rs232.c
002d0a   6ee6     MOVWF     0xe6,0x0                                                                                        
002d0c   d8cd     RCALL     0x2ea8                                                                                          
002d0e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002d10   6ae6     CLRF      0xe6,0x0       			TXENQ(PRODUCTION_TEST_PROTOCOL>>8);                                           C:\fw\midicontroller\x011a\rs232.c
002d12   d8ca     RCALL     0x2ea8                                                                                          
002d14   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002d16   d019     BRA       0x2d4a         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           	                                                                                C:\fw\midicontroller\x011a\rs232.c
                                           		case 180:		//NVR Page Read                                                     C:\fw\midicontroller\x011a\rs232.c
002d18   0100     MOVLB     0x0            			ResponseType = DATA_RETURNED;                                                 C:\fw\midicontroller\x011a\rs232.c
002d1a   0e05     MOVLW     0x5                                                                                             
002d1c   6fb1     MOVWF     0xb1,0x1                                                                                        
002d1e   b8a0     BTFSC     0xa0,0x4,0x0   			if (1 && !PIE2bits.EEIE) {                                                    C:\fw\midicontroller\x011a\rs232.c
002d20   d004     BRA       0x2d2a                                                                                          
002d22   9ef2     BCF       0xf2,0x7,0x0   				DISABLE_ALL_INTERRUPTS();                                                    C:\fw\midicontroller\x011a\rs232.c
002d24   9cf2     BCF       0xf2,0x6,0x0                                                                                    
                                           //				EEAddress = NVRCommAddr.b_form.low;                                        C:\fw\midicontroller\x011a\rs232.c
                                           //				Temp6 = READ_SYSTEM_NVR();                                                 C:\fw\midicontroller\x011a\rs232.c
                                           //				TXENQ(Temp6);                                                              C:\fw\midicontroller\x011a\rs232.c
                                           //				EEAddress++;                                                               C:\fw\midicontroller\x011a\rs232.c
                                           //				Temp6 = READ_SYSTEM_NVR();                                                 C:\fw\midicontroller\x011a\rs232.c
                                           //				TXENQ(Temp6);                                                              C:\fw\midicontroller\x011a\rs232.c
                                           //				EEAddress++;                                                               C:\fw\midicontroller\x011a\rs232.c
                                           //				Temp6 = READ_SYSTEM_NVR();                                                 C:\fw\midicontroller\x011a\rs232.c
                                           //				TXENQ(Temp6);                                                              C:\fw\midicontroller\x011a\rs232.c
                                           //				EEAddress++;                                                               C:\fw\midicontroller\x011a\rs232.c
                                           //				Temp6 = READ_SYSTEM_NVR();                                                 C:\fw\midicontroller\x011a\rs232.c
                                           //				TXENQ(Temp6);                                                              C:\fw\midicontroller\x011a\rs232.c
                                           //				ENABLE_ALL_INTERRUPTS();                                                   C:\fw\midicontroller\x011a\rs232.c
002d26   d011     BRA       0x2d4a         				break;                                                                       C:\fw\midicontroller\x011a\rs232.c
                                           			}                                                                             C:\fw\midicontroller\x011a\rs232.c
002d28   d00f     BRA       0x2d48         			else {                                                                        C:\fw\midicontroller\x011a\rs232.c
002d2a   0e01     MOVLW     0x1            				ResponseType = COMMAND_REJECTED;                                             C:\fw\midicontroller\x011a\rs232.c
002d2c   6fb1     MOVWF     0xb1,0x1                                                                                        
002d2e   68e6     SETF      0xe6,0x0       				TXENQ(INVALID_REQUEST);                                                      C:\fw\midicontroller\x011a\rs232.c
002d30   d8bb     RCALL     0x2ea8                                                                                          
002d32   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002d34   68e6     SETF      0xe6,0x0       				TXENQ(INVALID_REQUEST);                                                      C:\fw\midicontroller\x011a\rs232.c
002d36   d8b8     RCALL     0x2ea8                                                                                          
002d38   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002d3a   68e6     SETF      0xe6,0x0       				TXENQ(INVALID_REQUEST);                                                      C:\fw\midicontroller\x011a\rs232.c
002d3c   d8b5     RCALL     0x2ea8                                                                                          
002d3e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002d40   68e6     SETF      0xe6,0x0       				TXENQ(INVALID_REQUEST);                                                      C:\fw\midicontroller\x011a\rs232.c
002d42   d8b2     RCALL     0x2ea8                                                                                          
002d44   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002d46   d001     BRA       0x2d4a         				break;                                                                       C:\fw\midicontroller\x011a\rs232.c
                                           			}				                                                                         C:\fw\midicontroller\x011a\rs232.c
                                           		default:                                                                       C:\fw\midicontroller\x011a\rs232.c
002d48   d000     BRA       0x2d4a         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           		}                                                                              C:\fw\midicontroller\x011a\rs232.c
                                           	}                                                                               C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           //Set command:                                                                   C:\fw\midicontroller\x011a\rs232.c
002d4a   0e09     MOVLW     0x9            	if (SetupPkt.bRequest == SET_REPORT) {                                          C:\fw\midicontroller\x011a\rs232.c
002d4c   0104     MOVLB     0x4                                                                                             
002d4e   5d11     SUBWF     0x11,0x0,0x1                                                                                    
002d50   e001     BZ        0x2d54                                                                                          
002d52   d08e     BRA       0x2e70                                                                                          
002d54   5112     MOVF      0x12,0x0,0x1   		switch (SetupPkt._byte[2]) {                                                   C:\fw\midicontroller\x011a\rs232.c
002d56   0ab4     XORLW     0xb4                                                                                            
002d58   e101     BNZ       0x2d5c                                                                                          
002d5a   d086     BRA       0x2e68                                                                                          
002d5c   0a29     XORLW     0x29                                                                                            
002d5e   e06c     BZ        0x2e38                                                                                          
002d60   0a01     XORLW     0x1                                                                                             
002d62   e066     BZ        0x2e30                                                                                          
002d64   0a06     XORLW     0x6                                                                                             
002d66   e060     BZ        0x2e28                                                                                          
002d68   0a03     XORLW     0x3                                                                                             
002d6a   e04a     BZ        0x2e00                                                                                          
002d6c   0a01     XORLW     0x1                                                                                             
002d6e   e03a     BZ        0x2de4                                                                                          
002d70   0a0f     XORLW     0xf                                                                                             
002d72   e01e     BZ        0x2db0                                                                                          
002d74   0a01     XORLW     0x1                                                                                             
002d76   e014     BZ        0x2da0                                                                                          
002d78   0aba     XORLW     0xba                                                                                            
002d7a   e001     BZ        0x2d7e                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           		case 44:		//generic data transfer host to device                               C:\fw\midicontroller\x011a\rs232.c
002d7e   ec2a     CALL      0x3254,0x0     			if (ProcessGenericTransferh2d()) ResponseType = COMMAND_ACCEPTED;             C:\fw\midicontroller\x011a\rs232.c
002d80   f019                                                                                                               
002d82   cff3     MOVFF     0xff3,0x10                                                                                      
002d84   f010                                                                                                               
002d86   cff4     MOVFF     0xff4,0x11                                                                                      
002d88   f011                                                                                                               
002d8a   5010     MOVF      0x10,0x0,0x0                                                                                    
002d8c   1011     IORWF     0x11,0x0,0x0                                                                                    
002d8e   e004     BZ        0x2d98                                                                                          
002d90   0100     MOVLB     0x0                                                                                             
002d92   0e02     MOVLW     0x2                                                                                             
002d94   6fb1     MOVWF     0xb1,0x1                                                                                        
002d96   d003     BRA       0x2d9e         			else ResponseType = COMMAND_REJECTED;                                         C:\fw\midicontroller\x011a\rs232.c
002d98   0100     MOVLB     0x0                                                                                             
002d9a   0e01     MOVLW     0x1                                                                                             
002d9c   6fb1     MOVWF     0xb1,0x1                                                                                        
002d9e   d068     BRA       0x2e70         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           //Production test commands                                                       C:\fw\midicontroller\x011a\rs232.c
                                           		case 150:		//NVR Write                                                         C:\fw\midicontroller\x011a\rs232.c
002da0   0100     MOVLB     0x0            			ResponseType = COMMAND_ACCEPTED;                                              C:\fw\midicontroller\x011a\rs232.c
002da2   0e02     MOVLW     0x2                                                                                             
002da4   6fb1     MOVWF     0xb1,0x1                                                                                        
002da6   a8a0     BTFSS     0xa0,0x4,0x0   			if (1 && !PIE2bits.EEIE) {                                                    C:\fw\midicontroller\x011a\rs232.c
                                           //				DISABLE_ALL_INTERRUPTS();                                                  C:\fw\midicontroller\x011a\rs232.c
                                           //				EECounterB = 1;						//Number of bytes to write.                           C:\fw\midicontroller\x011a\rs232.c
                                           //				EEAddress = NVRCommAddr.b_form.low;	//EEPROM register starting address byte. C:\fw\midicontroller\x011a\rs232.c
                                           //				EEData = RcvPtr[0];					//First byte of data to write.                     C:\fw\midicontroller\x011a\rs232.c
                                           //diag disable ee_page_write                                                     C:\fw\midicontroller\x011a\rs232.c
                                           //				EE_PAGE_WRITE();                                                           C:\fw\midicontroller\x011a\rs232.c
                                           //				ENABLE_ALL_INTERRUPTS();                                                   C:\fw\midicontroller\x011a\rs232.c
                                           			}                                                                             C:\fw\midicontroller\x011a\rs232.c
002da8   d002     BRA       0x2dae         			else ResponseType = COMMAND_REJECTED;                                         C:\fw\midicontroller\x011a\rs232.c
002daa   0e01     MOVLW     0x1                                                                                             
002dac   6fb1     MOVWF     0xb1,0x1                                                                                        
002dae   d060     BRA       0x2e70         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           			                                                                              C:\fw\midicontroller\x011a\rs232.c
                                           		case 151:		//NVR Address                                                       C:\fw\midicontroller\x011a\rs232.c
002db0   0100     MOVLB     0x0            			ResponseType = COMMAND_ACCEPTED;                                              C:\fw\midicontroller\x011a\rs232.c
002db2   0e02     MOVLW     0x2                                                                                             
002db4   6fb1     MOVWF     0xb1,0x1                                                                                        
002db6   0100     MOVLB     0x0            			Testvar = true;                                                               C:\fw\midicontroller\x011a\rs232.c
002db8   8360     BSF       0x60,0x1,0x1                                                                                    
                                           			if (1) {                                                                      C:\fw\midicontroller\x011a\rs232.c
002dba   cfde     MOVFF     0xfde,0xfe9    				NVRCommAddr.b_form.low = RcvPtr[0];		//low byte                              C:\fw\midicontroller\x011a\rs232.c
002dbc   ffe9                                                                                                               
002dbe   cfdd     MOVFF     0xfdd,0xfea                                                                                     
002dc0   ffea                                                                                                               
002dc2   cfef     MOVFF     0xfef,0xb2                                                                                      
002dc4   f0b2                                                                                                               
002dc6   cfde     MOVFF     0xfde,0xfe9    				NVRCommAddr.b_form.high = RcvPtr[1];	//high byte                             C:\fw\midicontroller\x011a\rs232.c
002dc8   ffe9                                                                                                               
002dca   cfdd     MOVFF     0xfdd,0xfea                                                                                     
002dcc   ffea                                                                                                               
002dce   0e01     MOVLW     0x1                                                                                             
002dd0   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002dd2   0e00     MOVLW     0x0                                                                                             
002dd4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002dd6   cfef     MOVFF     0xfef,0xb3                                                                                      
002dd8   f0b3                                                                                                               
                                           			}                                                                             C:\fw\midicontroller\x011a\rs232.c
002dda   d003     BRA       0x2de2         			else ResponseType = COMMAND_REJECTED;                                         C:\fw\midicontroller\x011a\rs232.c
002ddc   0100     MOVLB     0x0                                                                                             
002dde   0e01     MOVLW     0x1                                                                                             
002de0   6fb1     MOVWF     0xb1,0x1                                                                                        
002de2   d046     BRA       0x2e70         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           		case 152:		//RAM Write                                                         C:\fw\midicontroller\x011a\rs232.c
002de4   0100     MOVLB     0x0            			ResponseType = COMMAND_ACCEPTED;                                              C:\fw\midicontroller\x011a\rs232.c
002de6   0e02     MOVLW     0x2                                                                                             
002de8   6fb1     MOVWF     0xb1,0x1                                                                                        
002dea   cfde     MOVFF     0xfde,0xfe9    			*(far unsigned char *)RAMCommAddr.s_form = RcvPtr[0];                         C:\fw\midicontroller\x011a\rs232.c
002dec   ffe9                                                                                                               
002dee   cfdd     MOVFF     0xfdd,0xfea                                                                                     
002df0   ffea                                                                                                               
002df2   50ef     MOVF      0xef,0x0,0x0                                                                                    
002df4   c0b4     MOVFF     0xb4,0xfe9                                                                                      
002df6   ffe9                                                                                                               
002df8   c0b5     MOVFF     0xb5,0xfea                                                                                      
002dfa   ffea                                                                                                               
002dfc   6eef     MOVWF     0xef,0x0                                                                                        
002dfe   d038     BRA       0x2e70         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           	                                                                                C:\fw\midicontroller\x011a\rs232.c
                                           		case 153:		//RAM Address                                                       C:\fw\midicontroller\x011a\rs232.c
002e00   0100     MOVLB     0x0            			ResponseType = COMMAND_ACCEPTED;                                              C:\fw\midicontroller\x011a\rs232.c
002e02   0e02     MOVLW     0x2                                                                                             
002e04   6fb1     MOVWF     0xb1,0x1                                                                                        
002e06   cfde     MOVFF     0xfde,0xfe9    			RAMCommAddr.b_form.low = RcvPtr[0];		//low byte                               C:\fw\midicontroller\x011a\rs232.c
002e08   ffe9                                                                                                               
002e0a   cfdd     MOVFF     0xfdd,0xfea                                                                                     
002e0c   ffea                                                                                                               
002e0e   cfef     MOVFF     0xfef,0xb4                                                                                      
002e10   f0b4                                                                                                               
002e12   cfde     MOVFF     0xfde,0xfe9    			RAMCommAddr.b_form.high = RcvPtr[1];	//high byte                              C:\fw\midicontroller\x011a\rs232.c
002e14   ffe9                                                                                                               
002e16   cfdd     MOVFF     0xfdd,0xfea                                                                                     
002e18   ffea                                                                                                               
002e1a   0e01     MOVLW     0x1                                                                                             
002e1c   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002e1e   0e00     MOVLW     0x0                                                                                             
002e20   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002e22   cfef     MOVFF     0xfef,0xb5                                                                                      
002e24   f0b5                                                                                                               
002e26   d024     BRA       0x2e70         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           		case 154:		//Password write (starting with low byte)                           C:\fw\midicontroller\x011a\rs232.c
002e28   0100     MOVLB     0x0            			ResponseType = COMMAND_ACCEPTED;                                              C:\fw\midicontroller\x011a\rs232.c
002e2a   0e02     MOVLW     0x2                                                                                             
002e2c   6fb1     MOVWF     0xb1,0x1                                                                                        
002e2e   d020     BRA       0x2e70         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           		case 156:		//ROM Write (not supported)                                         C:\fw\midicontroller\x011a\rs232.c
                                           //Writing a single byte is not supported by the chip.                            C:\fw\midicontroller\x011a\rs232.c
002e30   0100     MOVLB     0x0            			ResponseType = COMMAND_REJECTED;                                              C:\fw\midicontroller\x011a\rs232.c
002e32   0e01     MOVLW     0x1                                                                                             
002e34   6fb1     MOVWF     0xb1,0x1                                                                                        
002e36   d01c     BRA       0x2e70         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           	                                                                                C:\fw\midicontroller\x011a\rs232.c
                                           		case 157:		//ROM Address                                                       C:\fw\midicontroller\x011a\rs232.c
002e38   0100     MOVLB     0x0            			ResponseType = COMMAND_ACCEPTED;                                              C:\fw\midicontroller\x011a\rs232.c
002e3a   0e02     MOVLW     0x2                                                                                             
002e3c   6fb1     MOVWF     0xb1,0x1                                                                                        
                                           			if (1) {                                                                      C:\fw\midicontroller\x011a\rs232.c
002e3e   cfde     MOVFF     0xfde,0xfe9    				ROMCommAddr.b_form.low = RcvPtr[0];		//low byte                              C:\fw\midicontroller\x011a\rs232.c
002e40   ffe9                                                                                                               
002e42   cfdd     MOVFF     0xfdd,0xfea                                                                                     
002e44   ffea                                                                                                               
002e46   cfef     MOVFF     0xfef,0xb6                                                                                      
002e48   f0b6                                                                                                               
002e4a   cfde     MOVFF     0xfde,0xfe9    				ROMCommAddr.b_form.high = RcvPtr[1];	//high byte                             C:\fw\midicontroller\x011a\rs232.c
002e4c   ffe9                                                                                                               
002e4e   cfdd     MOVFF     0xfdd,0xfea                                                                                     
002e50   ffea                                                                                                               
002e52   0e01     MOVLW     0x1                                                                                             
002e54   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002e56   0e00     MOVLW     0x0                                                                                             
002e58   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002e5a   cfef     MOVFF     0xfef,0xb7                                                                                      
002e5c   f0b7                                                                                                               
                                           			}                                                                             C:\fw\midicontroller\x011a\rs232.c
002e5e   d003     BRA       0x2e66         			else ResponseType = COMMAND_REJECTED;                                         C:\fw\midicontroller\x011a\rs232.c
002e60   0100     MOVLB     0x0                                                                                             
002e62   0e01     MOVLW     0x1                                                                                             
002e64   6fb1     MOVWF     0xb1,0x1                                                                                        
002e66   d004     BRA       0x2e70         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           		case 180:		//NVR Page Write                                                    C:\fw\midicontroller\x011a\rs232.c
002e68   0100     MOVLB     0x0            			ResponseType = COMMAND_ACCEPTED;                                              C:\fw\midicontroller\x011a\rs232.c
002e6a   0e02     MOVLW     0x2                                                                                             
002e6c   6fb1     MOVWF     0xb1,0x1                                                                                        
                                           //diag.. disable ee_page_write                                                   C:\fw\midicontroller\x011a\rs232.c
002e6e   d000     BRA       0x2e70         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           		default:                                                                       C:\fw\midicontroller\x011a\rs232.c
002d7c   d079     BRA       0x2e70         			break;                                                                        C:\fw\midicontroller\x011a\rs232.c
                                           		}                                                                              C:\fw\midicontroller\x011a\rs232.c
                                           	}                                                                               C:\fw\midicontroller\x011a\rs232.c
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
002e70   0eff     MOVLW     0xff           	if (ResponseType == 0xff) return;                                               C:\fw\midicontroller\x011a\rs232.c
002e72   0100     MOVLB     0x0                                                                                             
002e74   5db1     SUBWF     0xb1,0x0,0x1                                                                                    
002e76   e101     BNZ       0x2e7a                                                                                          
002e78   d00d     BRA       0x2e94                                                                                          
                                           //no response or ack?                                                            C:\fw\midicontroller\x011a\rs232.c
002e7a   0e09     MOVLW     0x9            	if (SetupPkt.bRequest == SET_REPORT) return;		//no response to set_report       C:\fw\midicontroller\x011a\rs232.c
002e7c   0104     MOVLB     0x4                                                                                             
002e7e   5d11     SUBWF     0x11,0x0,0x1                                                                                    
002e80   e101     BNZ       0x2e84                                                                                          
002e82   d008     BRA       0x2e94                                                                                          
                                           	                                                                                C:\fw\midicontroller\x011a\rs232.c
                                           //USB query setup data:                                                          C:\fw\midicontroller\x011a\rs232.c
002e84   c412     MOVFF     0x412,0x450    	CtrlTrfData._byte[0] = SetupPkt._byte[2];                                       C:\fw\midicontroller\x011a\rs232.c
002e86   f450                                                                                                               
002e88   0100     MOVLB     0x0            	wCount._word = USBDataPointer;		//Calculate number of bytes to send             C:\fw\midicontroller\x011a\rs232.c
002e8a   5170     MOVF      0x70,0x0,0x1                                                                                    
002e8c   0101     MOVLB     0x1                                                                                             
002e8e   6f91     MOVWF     0x91,0x1                                                                                        
002e90   6b92     CLRF      0x92,0x1                                                                                        
002e92   d000     BRA       0x2e94         	return;                                                                         C:\fw\midicontroller\x011a\rs232.c
002e94   0e11     MOVLW     0x11           }                                                                                C:\fw\midicontroller\x011a\rs232.c
002e96   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
002e98   e202     BC        0x2e9e                                                                                          
002e9a   6ae1     CLRF      0xe1,0x0                                                                                        
002e9c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002e9e   6ee1     MOVWF     0xe1,0x0                                                                                        
002ea0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002ea2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002ea4   ffd9                                                                                                               
002ea6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\rs232.c
                                           //-----------------------------------------------------------------------        C:\fw\midicontroller\x011a\rs232.c
                                           //This routine will store a character into the TxBuffer.                         C:\fw\midicontroller\x011a\rs232.c
002ea8   cfd9     MOVFF     0xfd9,0xfe6    void	TXENQ(unsigned char Input) {                                                C:\fw\midicontroller\x011a\rs232.c
002eaa   ffe6                                                                                                               
002eac   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002eae   ffd9                                                                                                               
                                           	//USB Query                                                                     C:\fw\midicontroller\x011a\rs232.c
002eb0   0e40     MOVLW     0x40           	if (USBDataPointer >= 64) return;		//Exit if buffer full.                       C:\fw\midicontroller\x011a\rs232.c
002eb2   0100     MOVLB     0x0                                                                                             
002eb4   5d70     SUBWF     0x70,0x0,0x1                                                                                    
002eb6   e301     BNC       0x2eba                                                                                          
002eb8   d00a     BRA       0x2ece                                                                                          
002eba   5170     MOVF      0x70,0x0,0x1   	CtrlTrfData._byte[USBDataPointer] = Input;                                      C:\fw\midicontroller\x011a\rs232.c
002ebc   6aea     CLRF      0xea,0x0                                                                                        
002ebe   0f50     ADDLW     0x50                                                                                            
002ec0   6ee9     MOVWF     0xe9,0x0                                                                                        
002ec2   0e04     MOVLW     0x4                                                                                             
002ec4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002ec6   0efe     MOVLW     0xfe                                                                                            
002ec8   cfdb     MOVFF     0xfdb,0xfef                                                                                     
002eca   ffef                                                                                                               
002ecc   2b70     INCF      0x70,0x1,0x1   	USBDataPointer++;                                                               C:\fw\midicontroller\x011a\rs232.c
002ece   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\rs232.c
002ed0   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002ed2   ffd9                                                                                                               
002ed4   0012     RETURN    0x0                                                                                             
                                           //-----------------------------------------------------------------------        C:\fw\midicontroller\x011a\rs232.c
                                           /*********************************************************************           C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            *             Microchip USB C18 Firmware -  HID Version 1.0                     C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            *********************************************************************           C:\fw\midicontroller\x011a\hid.c
                                            * FileName:        hid.c                                                        C:\fw\midicontroller\x011a\hid.c
                                            * Dependencies:    See INCLUDES section below                                   C:\fw\midicontroller\x011a\hid.c
                                            * Processor:       PIC18                                                        C:\fw\midicontroller\x011a\hid.c
                                            * Compiler:        C18 2.30.01+                                                 C:\fw\midicontroller\x011a\hid.c
                                            * Company:         Microchip Technology, Inc.                                   C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Software License Agreement                                                    C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * The software supplied herewith by Microchip Technology Incorporated           C:\fw\midicontroller\x011a\hid.c
                                            * (the “Company”) for its PICmicro® Microcontroller is intended and             C:\fw\midicontroller\x011a\hid.c
                                            * supplied to you, the Company’s customer, for use solely and                   C:\fw\midicontroller\x011a\hid.c
                                            * exclusively on Microchip PICmicro Microcontroller products. The               C:\fw\midicontroller\x011a\hid.c
                                            * software is owned by the Company and/or its supplier, and is                  C:\fw\midicontroller\x011a\hid.c
                                            * protected under applicable copyright laws. All rights are reserved.           C:\fw\midicontroller\x011a\hid.c
                                            * Any use in violation of the foregoing restrictions may subject the            C:\fw\midicontroller\x011a\hid.c
                                            * user to criminal sanctions under applicable laws, as well as to               C:\fw\midicontroller\x011a\hid.c
                                            * civil liability for the breach of the terms and conditions of this            C:\fw\midicontroller\x011a\hid.c
                                            * license.                                                                      C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * THIS SOFTWARE IS PROVIDED IN AN “AS IS” CONDITION. NO WARRANTIES,             C:\fw\midicontroller\x011a\hid.c
                                            * WHETHER EXPRESS, IMPLIED OR STATUTORY, INCLUDING, BUT NOT LIMITED             C:\fw\midicontroller\x011a\hid.c
                                            * TO, IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A                   C:\fw\midicontroller\x011a\hid.c
                                            * PARTICULAR PURPOSE APPLY TO THIS SOFTWARE. THE COMPANY SHALL NOT,             C:\fw\midicontroller\x011a\hid.c
                                            * IN ANY CIRCUMSTANCES, BE LIABLE FOR SPECIAL, INCIDENTAL OR                    C:\fw\midicontroller\x011a\hid.c
                                            * CONSEQUENTIAL DAMAGES, FOR ANY REASON WHATSOEVER.                             C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Author               Date        Comment                                      C:\fw\midicontroller\x011a\hid.c
                                            *~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~           C:\fw\midicontroller\x011a\hid.c
                                            * Rawin Rojvanit       11/19/04    Original.                                    C:\fw\midicontroller\x011a\hid.c
                                            ********************************************************************/           C:\fw\midicontroller\x011a\hid.c
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                           /** I N C L U D E S **********************************************************/  C:\fw\midicontroller\x011a\hid.c
                                           #include "p18f4455.h"                                                            C:\fw\midicontroller\x011a\hid.c
                                           #include "c_system.h"                                                            C:\fw\midicontroller\x011a\hid.c
                                           #include "typedefs.h"                                                            C:\fw\midicontroller\x011a\hid.c
                                           #include "usb.h"                                                                 C:\fw\midicontroller\x011a\hid.c
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                           #ifdef USB_USE_HID                                                               C:\fw\midicontroller\x011a\hid.c
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                           /** P R I V A T E  P R O T O T Y P E S ***************************************/  C:\fw\midicontroller\x011a\hid.c
                                           void HIDGetReportHandler(void);                                                  C:\fw\midicontroller\x011a\hid.c
                                           void HIDSetReportHandler(void);                                                  C:\fw\midicontroller\x011a\hid.c
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                           /** V A R I A B L E S ********************************************************/  C:\fw\midicontroller\x011a\hid.c
                                           #pragma udata usb5                                                               C:\fw\midicontroller\x011a\hid.c
                                           byte idle_rate;                                                                  C:\fw\midicontroller\x011a\hid.c
                                           byte active_protocol;               // [0] Boot Protocol [1] Report Protocol     C:\fw\midicontroller\x011a\hid.c
                                           byte hid_rpt_rx_len;                                                             C:\fw\midicontroller\x011a\hid.c
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                           /** D E C L A R A T I O N S **************************************************/  C:\fw\midicontroller\x011a\hid.c
                                           #pragma code                                                                     C:\fw\midicontroller\x011a\hid.c
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                           /** C L A S S  S P E C I F I C  R E Q ****************************************/  C:\fw\midicontroller\x011a\hid.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\hid.c
                                            * Function:        void USBCheckHIDRequest(void)                                C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Overview:        This routine checks the setup data packet to see if it       C:\fw\midicontroller\x011a\hid.c
                                            *                  knows how to handle it                                       C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\hid.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\hid.c
                                           void USBCheckHIDRequest(void)                                                    C:\fw\midicontroller\x011a\hid.c
                                           {                                                                                C:\fw\midicontroller\x011a\hid.c
002ed6   0104     MOVLB     0x4                if(SetupPkt.Recipient != RCPT_INTF) return;                                  C:\fw\midicontroller\x011a\hid.c
002ed8   5110     MOVF      0x10,0x0,0x1                                                                                    
002eda   0b1f     ANDLW     0x1f                                                                                            
002edc   0801     SUBLW     0x1                                                                                             
002ede   e001     BZ        0x2ee2                                                                                          
002ee0   d086     BRA       0x2fee                                                                                          
002ee2   5114     MOVF      0x14,0x0,0x1       if(SetupPkt.bIntfID != HID_INTF_ID) return;                                  C:\fw\midicontroller\x011a\hid.c
002ee4   e001     BZ        0x2ee8                                                                                          
002ee6   d083     BRA       0x2fee                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                               /*                                                                           C:\fw\midicontroller\x011a\hid.c
                                                * There are two standard requests that hid.c may support.                   C:\fw\midicontroller\x011a\hid.c
                                                * 1. GET_DSC(DSC_HID,DSC_RPT,DSC_PHY);                                      C:\fw\midicontroller\x011a\hid.c
                                                * 2. SET_DSC(DSC_HID,DSC_RPT,DSC_PHY);                                      C:\fw\midicontroller\x011a\hid.c
                                                */                                                                          C:\fw\midicontroller\x011a\hid.c
002ee8   0e06     MOVLW     0x6                if(SetupPkt.bRequest == GET_DSC)                                             C:\fw\midicontroller\x011a\hid.c
002eea   5d11     SUBWF     0x11,0x0,0x1                                                                                    
002eec   e12e     BNZ       0x2f4a                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\hid.c
002eee   5113     MOVF      0x13,0x0,0x1           switch(SetupPkt.bDscType)                                                C:\fw\midicontroller\x011a\hid.c
002ef0   0a23     XORLW     0x23                                                                                            
002ef2   e028     BZ        0x2f44                                                                                          
002ef4   0a01     XORLW     0x1                                                                                             
002ef6   e013     BZ        0x2f1e                                                                                          
002ef8   0a03     XORLW     0x3                                                                                             
002efa   e001     BZ        0x2efe                                                                                          
002efc   d024     BRA       0x2f46                                                                                          
                                                   {                                                                        C:\fw\midicontroller\x011a\hid.c
                                                       case DSC_HID:                                                        C:\fw\midicontroller\x011a\hid.c
002efe   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_HID;                               C:\fw\midicontroller\x011a\hid.c
002f00   0e02     MOVLW     0x2                                                                                             
002f02   6f8c     MOVWF     0x8c,0x1                                                                                        
002f04   0101     MOVLB     0x1                            mUSBGetHIDDscAdr(pSrc.bRom);        // See usbcfg.h              C:\fw\midicontroller\x011a\hid.c
002f06   0589     DECF      0x89,0x0,0x1                                                                                    
002f08   e105     BNZ       0x2f14                                                                                          
002f0a   0101     MOVLB     0x1                                                                                             
002f0c   0ec2     MOVLW     0xc2                                                                                            
002f0e   6f8d     MOVWF     0x8d,0x1                                                                                        
002f10   0e32     MOVLW     0x32                                                                                            
002f12   6f8e     MOVWF     0x8e,0x1                                                                                        
002f14   0e09     MOVLW     0x9                            wCount._word = sizeof(USB_HID_DSC);                              C:\fw\midicontroller\x011a\hid.c
002f16   0101     MOVLB     0x1                                                                                             
002f18   6f91     MOVWF     0x91,0x1                                                                                        
002f1a   6b92     CLRF      0x92,0x1                                                                                        
002f1c   d014     BRA       0x2f46                         break;                                                           C:\fw\midicontroller\x011a\hid.c
                                                       case DSC_RPT:                                                        C:\fw\midicontroller\x011a\hid.c
002f1e   0101     MOVLB     0x1                            ctrl_trf_session_owner = MUID_HID;                               C:\fw\midicontroller\x011a\hid.c
002f20   0e02     MOVLW     0x2                                                                                             
002f22   6f8c     MOVWF     0x8c,0x1                                                                                        
002f24   0101     MOVLB     0x1                            mUSBGetHIDRptDscAdr(pSrc.bRom);     // See usbcfg.h              C:\fw\midicontroller\x011a\hid.c
002f26   0589     DECF      0x89,0x0,0x1                                                                                    
002f28   e105     BNZ       0x2f34                                                                                          
002f2a   0101     MOVLB     0x1                                                                                             
002f2c   0e43     MOVLW     0x43                                                                                            
002f2e   6f8d     MOVWF     0x8d,0x1                                                                                        
002f30   0e33     MOVLW     0x33                                                                                            
002f32   6f8e     MOVWF     0x8e,0x1                                                                                        
002f34   0101     MOVLB     0x1                            mUSBGetHIDRptDscSize(wCount._word); // See usbcfg.h              C:\fw\midicontroller\x011a\hid.c
002f36   0589     DECF      0x89,0x0,0x1                                                                                    
002f38   e104     BNZ       0x2f42                                                                                          
002f3a   0e82     MOVLW     0x82                                                                                            
002f3c   0101     MOVLB     0x1                                                                                             
002f3e   6f91     MOVWF     0x91,0x1                                                                                        
002f40   6b92     CLRF      0x92,0x1                                                                                        
002f42   d001     BRA       0x2f46                         break;                                                           C:\fw\midicontroller\x011a\hid.c
                                                       case DSC_PHY:                                                        C:\fw\midicontroller\x011a\hid.c
                                                           // ctrl_trf_session_owner = MUID_HID;                            C:\fw\midicontroller\x011a\hid.c
002f44   d000     BRA       0x2f46                         break;                                                           C:\fw\midicontroller\x011a\hid.c
                                                   }//end switch(SetupPkt.bDscType)                                         C:\fw\midicontroller\x011a\hid.c
002f46   0101     MOVLB     0x1                    usb_stat.ctrl_trf_mem = _ROM;                                            C:\fw\midicontroller\x011a\hid.c
002f48   8388     BSF       0x88,0x1,0x1                                                                                    
                                               }//end if(SetupPkt.bRequest == GET_DSC)                                      C:\fw\midicontroller\x011a\hid.c
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
002f4a   0104     MOVLB     0x4                if(SetupPkt.RequestType != CLASS) return;                                    C:\fw\midicontroller\x011a\hid.c
002f4c   5110     MOVF      0x10,0x0,0x1                                                                                    
002f4e   0b60     ANDLW     0x60                                                                                            
002f50   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
002f52   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
002f54   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
002f56   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
002f58   42e8     RRNCF     0xe8,0x1,0x0                                                                                    
002f5a   0801     SUBLW     0x1                                                                                             
002f5c   e001     BZ        0x2f60                                                                                          
002f5e   d047     BRA       0x2fee                                                                                          
002f60   5111     MOVF      0x11,0x0,0x1       switch(SetupPkt.bRequest)                                                    C:\fw\midicontroller\x011a\hid.c
002f62   0a0b     XORLW     0xb                                                                                             
002f64   e03e     BZ        0x2fe2                                                                                          
002f66   0a08     XORLW     0x8                                                                                             
002f68   e02e     BZ        0x2fc6                                                                                          
002f6a   0a09     XORLW     0x9                                                                                             
002f6c   e026     BZ        0x2fba                                                                                          
002f6e   0a08     XORLW     0x8                                                                                             
002f70   e016     BZ        0x2f9e                                                                                          
002f72   0a0b     XORLW     0xb                                                                                             
002f74   e006     BZ        0x2f82                                                                                          
002f76   0a08     XORLW     0x8                                                                                             
002f78   e001     BZ        0x2f7c                                                                                          
002f7a   d039     BRA       0x2fee                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\hid.c
                                                   case GET_REPORT:                                                         C:\fw\midicontroller\x011a\hid.c
002f7c   ec8e     CALL      0x311c,0x0                 HIDGetReportHandler();                                               C:\fw\midicontroller\x011a\hid.c
002f7e   f018                                                                                                               
002f80   d036     BRA       0x2fee                     break;                                                               C:\fw\midicontroller\x011a\hid.c
                                                   case SET_REPORT:                                                         C:\fw\midicontroller\x011a\hid.c
                                           //            HIDSetReportHandler();      //2/8/05 JD this was not at the right location. C:\fw\midicontroller\x011a\hid.c
002f82   0101     MOVLB     0x1            			pDst.bRam = (byte*)&USBEP0DataInBuffer;	//Set destination for report data.    C:\fw\midicontroller\x011a\hid.c
002f84   0e71     MOVLW     0x71                                                                                            
002f86   6f8f     MOVWF     0x8f,0x1                                                                                        
002f88   0e00     MOVLW     0x0                                                                                             
002f8a   6f90     MOVWF     0x90,0x1                                                                                        
002f8c   0101     MOVLB     0x1            			usb_stat.ctrl_trf_mem = _RAM;		//Set memory type                              C:\fw\midicontroller\x011a\hid.c
002f8e   9388     BCF       0x88,0x1,0x1                                                                                    
002f90   0101     MOVLB     0x1            			wCount._word = 0;					//reset counter                                         C:\fw\midicontroller\x011a\hid.c
002f92   6b91     CLRF      0x91,0x1                                                                                        
002f94   6b92     CLRF      0x92,0x1                                                                                        
002f96   0101     MOVLB     0x1            			ctrl_trf_session_owner = MUID_HID;  //set owner to HID, service this when we have some data..	 C:\fw\midicontroller\x011a\hid.c
002f98   0e02     MOVLW     0x2                                                                                             
002f9a   6f8c     MOVWF     0x8c,0x1                                                                                        
002f9c   d028     BRA       0x2fee                     break;                                                               C:\fw\midicontroller\x011a\hid.c
                                                   case GET_IDLE:                                                           C:\fw\midicontroller\x011a\hid.c
002f9e   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_HID;                                   C:\fw\midicontroller\x011a\hid.c
002fa0   0e02     MOVLW     0x2                                                                                             
002fa2   6f8c     MOVWF     0x8c,0x1                                                                                        
002fa4   0101     MOVLB     0x1                        pSrc.bRam = (byte*)&idle_rate;      // Set source                    C:\fw\midicontroller\x011a\hid.c
002fa6   0e95     MOVLW     0x95                                                                                            
002fa8   6f8d     MOVWF     0x8d,0x1                                                                                        
002faa   0e01     MOVLW     0x1                                                                                             
002fac   6f8e     MOVWF     0x8e,0x1                                                                                        
002fae   0101     MOVLB     0x1                        usb_stat.ctrl_trf_mem = _RAM;       // Set memory type               C:\fw\midicontroller\x011a\hid.c
002fb0   9388     BCF       0x88,0x1,0x1                                                                                    
002fb2   0101     MOVLB     0x1                        LSB(wCount) = 1;                    // Set data count                C:\fw\midicontroller\x011a\hid.c
002fb4   0e01     MOVLW     0x1                                                                                             
002fb6   6f91     MOVWF     0x91,0x1                                                                                        
002fb8   d01a     BRA       0x2fee                     break;                                                               C:\fw\midicontroller\x011a\hid.c
                                                   case SET_IDLE:                                                           C:\fw\midicontroller\x011a\hid.c
002fba   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_HID;                                   C:\fw\midicontroller\x011a\hid.c
002fbc   0e02     MOVLW     0x2                                                                                             
002fbe   6f8c     MOVWF     0x8c,0x1                                                                                        
002fc0   c413     MOVFF     0x413,0x195                idle_rate = MSB(SetupPkt.W_Value);                                   C:\fw\midicontroller\x011a\hid.c
002fc2   f195                                                                                                               
002fc4   d014     BRA       0x2fee                     break;                                                               C:\fw\midicontroller\x011a\hid.c
                                                   case GET_PROTOCOL:                                                       C:\fw\midicontroller\x011a\hid.c
002fc6   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_HID;                                   C:\fw\midicontroller\x011a\hid.c
002fc8   0e02     MOVLW     0x2                                                                                             
002fca   6f8c     MOVWF     0x8c,0x1                                                                                        
002fcc   0101     MOVLB     0x1                        pSrc.bRam = (byte*)&active_protocol;// Set source                    C:\fw\midicontroller\x011a\hid.c
002fce   0e96     MOVLW     0x96                                                                                            
002fd0   6f8d     MOVWF     0x8d,0x1                                                                                        
002fd2   0e01     MOVLW     0x1                                                                                             
002fd4   6f8e     MOVWF     0x8e,0x1                                                                                        
002fd6   0101     MOVLB     0x1                        usb_stat.ctrl_trf_mem = _RAM;       // Set memory type               C:\fw\midicontroller\x011a\hid.c
002fd8   9388     BCF       0x88,0x1,0x1                                                                                    
002fda   0101     MOVLB     0x1                        LSB(wCount) = 1;                    // Set data count                C:\fw\midicontroller\x011a\hid.c
002fdc   0e01     MOVLW     0x1                                                                                             
002fde   6f91     MOVWF     0x91,0x1                                                                                        
002fe0   d006     BRA       0x2fee                     break;                                                               C:\fw\midicontroller\x011a\hid.c
                                                   case SET_PROTOCOL:                                                       C:\fw\midicontroller\x011a\hid.c
002fe2   0101     MOVLB     0x1                        ctrl_trf_session_owner = MUID_HID;                                   C:\fw\midicontroller\x011a\hid.c
002fe4   0e02     MOVLW     0x2                                                                                             
002fe6   6f8c     MOVWF     0x8c,0x1                                                                                        
002fe8   c412     MOVFF     0x412,0x196                active_protocol = LSB(SetupPkt.W_Value);                             C:\fw\midicontroller\x011a\hid.c
002fea   f196                                                                                                               
002fec   d000     BRA       0x2fee                     break;                                                               C:\fw\midicontroller\x011a\hid.c
                                               }//end switch(SetupPkt.bRequest)                                             C:\fw\midicontroller\x011a\hid.c
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
002fee   0012     RETURN    0x0            }//end USBCheckHIDRequest                                                        C:\fw\midicontroller\x011a\hid.c
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                           /** U S E R  A P I ***********************************************************/  C:\fw\midicontroller\x011a\hid.c
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\hid.c
                                            * Function:        void HIDInitEP(void)                                         C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * PreCondition:    None                                                         C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Input:           None                                                         C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Overview:        HIDInitEP initializes HID endpoints, buffer descriptors,     C:\fw\midicontroller\x011a\hid.c
                                            *                  internal state-machine, and variables.                       C:\fw\midicontroller\x011a\hid.c
                                            *                  It should be called after the USB host has sent out a        C:\fw\midicontroller\x011a\hid.c
                                            *                  SET_CONFIGURATION request.                                   C:\fw\midicontroller\x011a\hid.c
                                            *                  See USBStdSetCfgHandler() in usb9.c for examples.            C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\hid.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\hid.c
                                           void HIDInitEP(void)                                                             C:\fw\midicontroller\x011a\hid.c
                                           {                                                                                C:\fw\midicontroller\x011a\hid.c
002ff0   0101     MOVLB     0x1                hid_rpt_rx_len =0;                                                           C:\fw\midicontroller\x011a\hid.c
002ff2   6b97     CLRF      0x97,0x1                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
002ff4   0e1e     MOVLW     0x1e               HID_UEP = EP_OUT_IN|HSHK_EN;                // Enable 2 data pipes           C:\fw\midicontroller\x011a\hid.c
002ff6   6e71     MOVWF     0x71,0x0                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
002ff8   0104     MOVLB     0x4                HID_BD_OUT.Cnt = sizeof(hid_report_out);    // Set buffer size               C:\fw\midicontroller\x011a\hid.c
002ffa   0e40     MOVLW     0x40                                                                                            
002ffc   6f09     MOVWF     0x9,0x1                                                                                         
002ffe   0e90     MOVLW     0x90               HID_BD_OUT.ADR = (byte*)&hid_report_out;    // Set buffer address            C:\fw\midicontroller\x011a\hid.c
003000   6f0a     MOVWF     0xa,0x1                                                                                         
003002   0e04     MOVLW     0x4                                                                                             
003004   6f0b     MOVWF     0xb,0x1                                                                                         
003006   0e88     MOVLW     0x88               HID_BD_OUT.Stat._byte = _USIE|_DAT0|_DTSEN; // Set status                    C:\fw\midicontroller\x011a\hid.c
003008   6f08     MOVWF     0x8,0x1                                                                                         
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                               /*                                                                           C:\fw\midicontroller\x011a\hid.c
                                                * Do not have to init Cnt of IN pipes here.                                 C:\fw\midicontroller\x011a\hid.c
                                                * Reason:  Number of bytes to send to the host                              C:\fw\midicontroller\x011a\hid.c
                                                *          varies from one transaction to                                   C:\fw\midicontroller\x011a\hid.c
                                                *          another. Cnt should equal the exact                              C:\fw\midicontroller\x011a\hid.c
                                                *          number of bytes to transmit for                                  C:\fw\midicontroller\x011a\hid.c
                                                *          a given IN transaction.                                          C:\fw\midicontroller\x011a\hid.c
                                                *          This number of bytes will only                                   C:\fw\midicontroller\x011a\hid.c
                                                *          be known right before the data is                                C:\fw\midicontroller\x011a\hid.c
                                                *          sent.                                                            C:\fw\midicontroller\x011a\hid.c
                                                */                                                                          C:\fw\midicontroller\x011a\hid.c
00300a   0104     MOVLB     0x4                HID_BD_IN.ADR = (byte*)&hid_report_in;      // Set buffer address            C:\fw\midicontroller\x011a\hid.c
00300c   0ed0     MOVLW     0xd0                                                                                            
00300e   6f0e     MOVWF     0xe,0x1                                                                                         
003010   0e04     MOVLW     0x4                                                                                             
003012   6f0f     MOVWF     0xf,0x1                                                                                         
003014   0e40     MOVLW     0x40               HID_BD_IN.Stat._byte = _UCPU|_DAT1;         // Set status                    C:\fw\midicontroller\x011a\hid.c
003016   6f0c     MOVWF     0xc,0x1                                                                                         
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
003018   0012     RETURN    0x0            }//end HIDInitEP                                                                 C:\fw\midicontroller\x011a\hid.c
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\hid.c
                                            * Function:        void HIDTxReport(char *buffer, byte len)                     C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * PreCondition:    mHIDTxIsBusy() must return false.                            C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            *                  Value of 'len' must be equal to or smaller than              C:\fw\midicontroller\x011a\hid.c
                                            *                  HID_INT_IN_EP_SIZE                                           C:\fw\midicontroller\x011a\hid.c
                                            *                  For an interrupt endpoint, the largest buffer size is        C:\fw\midicontroller\x011a\hid.c
                                            *                  64 bytes.                                                    C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Input:           buffer  : Pointer to the starting location of data bytes     C:\fw\midicontroller\x011a\hid.c
                                            *                  len     : Number of bytes to be transferred                  C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Output:          None                                                         C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Side Effects:    None                                                         C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Overview:        Use this macro to transfer data located in data memory.      C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            *                  Remember: mHIDTxIsBusy() must return false before user       C:\fw\midicontroller\x011a\hid.c
                                            *                  can call this function.                                      C:\fw\midicontroller\x011a\hid.c
                                            *                  Unexpected behavior will occur if this function is called    C:\fw\midicontroller\x011a\hid.c
                                            *                  when mHIDTxIsBusy() == 0                                     C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            *                  Typical Usage:                                               C:\fw\midicontroller\x011a\hid.c
                                            *                  if(!mHIDTxIsBusy())                                          C:\fw\midicontroller\x011a\hid.c
                                            *                      HIDTxReport(buffer, 3);                                  C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Note:            None                                                         C:\fw\midicontroller\x011a\hid.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\hid.c
00301a   cfd9     MOVFF     0xfd9,0xfe6    void HIDTxReport(char *buffer, byte len)                                         C:\fw\midicontroller\x011a\hid.c
00301c   ffe6                                                                                                               
00301e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003020   ffd9                                                                                                               
003022   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\fw\midicontroller\x011a\hid.c
                                           	byte i;                                                                         C:\fw\midicontroller\x011a\hid.c
                                           	                                                                                C:\fw\midicontroller\x011a\hid.c
                                               /*                                                                           C:\fw\midicontroller\x011a\hid.c
                                                * Value of len should be equal to or smaller than HID_INT_IN_EP_SIZE.       C:\fw\midicontroller\x011a\hid.c
                                                * This check forces the value of len to meet the precondition.              C:\fw\midicontroller\x011a\hid.c
                                                */                                                                          C:\fw\midicontroller\x011a\hid.c
003024   0efc     MOVLW     0xfc           	if(len > HID_INT_IN_EP_SIZE)                                                    C:\fw\midicontroller\x011a\hid.c
003026   50db     MOVF      0xdb,0x0,0x0                                                                                    
003028   0840     SUBLW     0x40                                                                                            
00302a   e205     BC        0x3036                                                                                          
00302c   0e40     MOVLW     0x40           	    len = HID_INT_IN_EP_SIZE;                                                   C:\fw\midicontroller\x011a\hid.c
00302e   6ef3     MOVWF     0xf3,0x0                                                                                        
003030   0efc     MOVLW     0xfc                                                                                            
003032   cff3     MOVFF     0xff3,0xfdb                                                                                     
003034   ffdb                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                              /*                                                                            C:\fw\midicontroller\x011a\hid.c
                                               * Copy data from user's buffer to dual-ram buffer                            C:\fw\midicontroller\x011a\hid.c
                                               */                                                                           C:\fw\midicontroller\x011a\hid.c
003036   6adf     CLRF      0xdf,0x0           for (i = 0; i < len; i++)                                                    C:\fw\midicontroller\x011a\hid.c
003038   0efc     MOVLW     0xfc                                                                                            
00303a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00303c   5cdf     SUBWF     0xdf,0x0,0x0                                                                                    
00303e   e219     BC        0x3072                                                                                          
00306e   2adf     INCF      0xdf,0x1,0x0                                                                                    
003070   d7e3     BRA       0x3038                                                                                          
003040   50df     MOVF      0xdf,0x0,0x0       	hid_report_in[i] = buffer[i];                                               C:\fw\midicontroller\x011a\hid.c
003042   6ee7     MOVWF     0xe7,0x0                                                                                        
003044   0efd     MOVLW     0xfd                                                                                            
003046   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
003048   ffe9                                                                                                               
00304a   0efe     MOVLW     0xfe                                                                                            
00304c   cfdb     MOVFF     0xfdb,0xfea                                                                                     
00304e   ffea                                                                                                               
003050   50e7     MOVF      0xe7,0x0,0x0                                                                                    
003052   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
003054   0e00     MOVLW     0x0                                                                                             
003056   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003058   50ef     MOVF      0xef,0x0,0x0                                                                                    
00305a   6ee6     MOVWF     0xe6,0x0                                                                                        
00305c   50df     MOVF      0xdf,0x0,0x0                                                                                    
00305e   6aea     CLRF      0xea,0x0                                                                                        
003060   0fd0     ADDLW     0xd0                                                                                            
003062   6ee9     MOVWF     0xe9,0x0                                                                                        
003064   0e04     MOVLW     0x4                                                                                             
003066   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
003068   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00306a   50e7     MOVF      0xe7,0x0,0x0                                                                                    
00306c   6eef     MOVWF     0xef,0x0                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
003072   0efc     MOVLW     0xfc               HID_BD_IN.Cnt = len;                                                         C:\fw\midicontroller\x011a\hid.c
003074   cfdb     MOVFF     0xfdb,0x40d                                                                                     
003076   f40d                                                                                                               
003078   0e40     MOVLW     0x40               mUSBBufferReady(HID_BD_IN);                                                  C:\fw\midicontroller\x011a\hid.c
00307a   0104     MOVLB     0x4                                                                                             
00307c   170c     ANDWF     0xc,0x1,0x1                                                                                     
00307e   7d0c     BTG       0xc,0x6,0x1                                                                                     
003080   0e88     MOVLW     0x88                                                                                            
003082   130c     IORWF     0xc,0x1,0x1                                                                                     
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
003084   52e5     MOVF      0xe5,0x1,0x0   }//end HIDTxReport                                                               C:\fw\midicontroller\x011a\hid.c
003086   52e5     MOVF      0xe5,0x1,0x0                                                                                    
003088   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00308a   ffd9                                                                                                               
00308c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                           /******************************************************************************  C:\fw\midicontroller\x011a\hid.c
                                            * Function:        byte HIDRxReport(char *buffer, byte len)                     C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * PreCondition:    Value of input argument 'len' should be smaller than the     C:\fw\midicontroller\x011a\hid.c
                                            *                  maximum endpoint size responsible for receiving report       C:\fw\midicontroller\x011a\hid.c
                                            *                  data from USB host for HID class.                            C:\fw\midicontroller\x011a\hid.c
                                            *                  Input argument 'buffer' should point to a buffer area that   C:\fw\midicontroller\x011a\hid.c
                                            *                  is bigger or equal to the size specified by 'len'.           C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Input:           buffer  : Pointer to where received bytes are to be stored   C:\fw\midicontroller\x011a\hid.c
                                            *                  len     : The number of bytes expected.                      C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Output:          The number of bytes copied to buffer.                        C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Side Effects:    Publicly accessible variable hid_rpt_rx_len is updated       C:\fw\midicontroller\x011a\hid.c
                                            *                  with the number of bytes copied to buffer.                   C:\fw\midicontroller\x011a\hid.c
                                            *                  Once HIDRxReport is called, subsequent retrieval of          C:\fw\midicontroller\x011a\hid.c
                                            *                  hid_rpt_rx_len can be done by calling macro                  C:\fw\midicontroller\x011a\hid.c
                                            *                  mHIDGetRptRxLength().                                        C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Overview:        HIDRxReport copies a string of bytes received through        C:\fw\midicontroller\x011a\hid.c
                                            *                  USB HID OUT endpoint to a user's specified location.         C:\fw\midicontroller\x011a\hid.c
                                            *                  It is a non-blocking function. It does not wait              C:\fw\midicontroller\x011a\hid.c
                                            *                  for data if there is no data available. Instead it returns   C:\fw\midicontroller\x011a\hid.c
                                            *                  '0' to notify the caller that there is no data available.    C:\fw\midicontroller\x011a\hid.c
                                            *                                                                               C:\fw\midicontroller\x011a\hid.c
                                            * Note:            If the actual number of bytes received is larger than the    C:\fw\midicontroller\x011a\hid.c
                                            *                  number of bytes expected (len), only the expected number     C:\fw\midicontroller\x011a\hid.c
                                            *                  of bytes specified will be copied to buffer.                 C:\fw\midicontroller\x011a\hid.c
                                            *                  If the actual number of bytes received is smaller than the   C:\fw\midicontroller\x011a\hid.c
                                            *                  number of bytes expected (len), only the actual number       C:\fw\midicontroller\x011a\hid.c
                                            *                  of bytes received will be copied to buffer.                  C:\fw\midicontroller\x011a\hid.c
                                            *****************************************************************************/  C:\fw\midicontroller\x011a\hid.c
00308e   cfd9     MOVFF     0xfd9,0xfe6    byte HIDRxReport(char *buffer, byte len)                                         C:\fw\midicontroller\x011a\hid.c
003090   ffe6                                                                                                               
003092   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
003094   ffd9                                                                                                               
                                           {                                                                                C:\fw\midicontroller\x011a\hid.c
003096   0101     MOVLB     0x1                hid_rpt_rx_len = 0;                                                          C:\fw\midicontroller\x011a\hid.c
003098   6b97     CLRF      0x97,0x1                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
00309a   0104     MOVLB     0x4                if(!mHIDRxIsBusy())                                                          C:\fw\midicontroller\x011a\hid.c
00309c   bf08     BTFSC     0x8,0x7,0x1                                                                                     
00309e   d030     BRA       0x3100                                                                                          
                                               {                                                                            C:\fw\midicontroller\x011a\hid.c
                                                   /*                                                                       C:\fw\midicontroller\x011a\hid.c
                                                    * Adjust the expected number of bytes to equal                          C:\fw\midicontroller\x011a\hid.c
                                                    * the actual number of bytes received.                                  C:\fw\midicontroller\x011a\hid.c
                                                    */                                                                      C:\fw\midicontroller\x011a\hid.c
0030a0   0efc     MOVLW     0xfc                   if(len > HID_BD_OUT.Cnt)                                                 C:\fw\midicontroller\x011a\hid.c
0030a2   cfdb     MOVFF     0xfdb,0x10                                                                                      
0030a4   f010                                                                                                               
0030a6   5109     MOVF      0x9,0x0,0x1                                                                                     
0030a8   80d8     BSF       0xd8,0x0,0x0                                                                                    
0030aa   5410     SUBFWB    0x10,0x0,0x0                                                                                    
0030ac   e203     BC        0x30b4                                                                                          
0030ae   0efc     MOVLW     0xfc                       len = HID_BD_OUT.Cnt;                                                C:\fw\midicontroller\x011a\hid.c
0030b0   c409     MOVFF     0x409,0xfdb                                                                                     
0030b2   ffdb                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                                   /*                                                                       C:\fw\midicontroller\x011a\hid.c
                                                    * Copy data from dual-ram buffer to user's buffer                       C:\fw\midicontroller\x011a\hid.c
                                                    */                                                                      C:\fw\midicontroller\x011a\hid.c
0030b4   0101     MOVLB     0x1                    for(hid_rpt_rx_len = 0; hid_rpt_rx_len < len; hid_rpt_rx_len++)          C:\fw\midicontroller\x011a\hid.c
0030b6   6b97     CLRF      0x97,0x1                                                                                        
0030b8   0efc     MOVLW     0xfc                                                                                            
0030ba   50db     MOVF      0xdb,0x0,0x0                                                                                    
0030bc   5d97     SUBWF     0x97,0x0,0x1                                                                                    
0030be   e219     BC        0x30f2                                                                                          
0030ee   2b97     INCF      0x97,0x1,0x1                                                                                    
0030f0   d7e3     BRA       0x30b8                                                                                          
0030c0   5197     MOVF      0x97,0x0,0x1               buffer[hid_rpt_rx_len] = hid_report_out[hid_rpt_rx_len];             C:\fw\midicontroller\x011a\hid.c
0030c2   6aea     CLRF      0xea,0x0                                                                                        
0030c4   0f90     ADDLW     0x90                                                                                            
0030c6   6ee9     MOVWF     0xe9,0x0                                                                                        
0030c8   0e04     MOVLW     0x4                                                                                             
0030ca   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0030cc   50ef     MOVF      0xef,0x0,0x0                                                                                    
0030ce   6ee6     MOVWF     0xe6,0x0                                                                                        
0030d0   5197     MOVF      0x97,0x0,0x1                                                                                    
0030d2   6ee7     MOVWF     0xe7,0x0                                                                                        
0030d4   0efd     MOVLW     0xfd                                                                                            
0030d6   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
0030d8   ffe9                                                                                                               
0030da   0efe     MOVLW     0xfe                                                                                            
0030dc   cfdb     MOVFF     0xfdb,0xfea                                                                                     
0030de   ffea                                                                                                               
0030e0   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0030e2   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
0030e4   0e00     MOVLW     0x0                                                                                             
0030e6   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0030e8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0030ea   50e7     MOVF      0xe7,0x0,0x0                                                                                    
0030ec   6eef     MOVWF     0xef,0x0                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                                   /*                                                                       C:\fw\midicontroller\x011a\hid.c
                                                    * Prepare dual-ram buffer for next OUT transaction                      C:\fw\midicontroller\x011a\hid.c
                                                    */                                                                      C:\fw\midicontroller\x011a\hid.c
0030f2   0104     MOVLB     0x4                    HID_BD_OUT.Cnt = sizeof(hid_report_out);                                 C:\fw\midicontroller\x011a\hid.c
0030f4   0e40     MOVLW     0x40                                                                                            
0030f6   6f09     MOVWF     0x9,0x1                                                                                         
0030f8   1708     ANDWF     0x8,0x1,0x1            mUSBBufferReady(HID_BD_OUT);                                             C:\fw\midicontroller\x011a\hid.c
0030fa   7d08     BTG       0x8,0x6,0x1                                                                                     
0030fc   0e88     MOVLW     0x88                                                                                            
0030fe   1308     IORWF     0x8,0x1,0x1                                                                                     
                                               }//end if                                                                    C:\fw\midicontroller\x011a\hid.c
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
003100   0101     MOVLB     0x1                return hid_rpt_rx_len;                                                       C:\fw\midicontroller\x011a\hid.c
003102   5197     MOVF      0x97,0x0,0x1                                                                                    
003104   d000     BRA       0x3106                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
003106   52e5     MOVF      0xe5,0x1,0x0   }//end HIDRxReport                                                               C:\fw\midicontroller\x011a\hid.c
003108   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00310a   ffd9                                                                                                               
00310c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                           #endif //def USB_USE_HID                                                         C:\fw\midicontroller\x011a\hid.c
                                                                                                                            C:\fw\midicontroller\x011a\hid.c
                                           /** EOF hid.c ***************************************************************/   C:\fw\midicontroller\x011a\hid.c
                                           //This file contains the global ram definitions for the project                  C:\fw\midicontroller\x011a\ram_def.c
                                           #include	"c_system.h"                                                            C:\fw\midicontroller\x011a\ram_def.c
                                                                                                                            C:\fw\midicontroller\x011a\ram_def.c
                                           //----------------------------Main variables---------------------------------------- C:\fw\midicontroller\x011a\ram_def.c
                                           TwoBytes NVRCommAddr;                                                            C:\fw\midicontroller\x011a\ram_def.c
                                           TwoBytes RAMCommAddr;                                                            C:\fw\midicontroller\x011a\ram_def.c
                                           TwoBytes ROMCommAddr;                                                            C:\fw\midicontroller\x011a\ram_def.c
                                                                                                                            C:\fw\midicontroller\x011a\ram_def.c
                                           BitField	CommFlags1;                                                             C:\fw\midicontroller\x011a\ram_def.c
                                                                                                                            C:\fw\midicontroller\x011a\ram_def.c
                                           unsigned char WpmCounter;                                                        C:\fw\midicontroller\x011a\ram_def.c
                                           unsigned char WpmCounter1;                                                       C:\fw\midicontroller\x011a\ram_def.c
                                           unsigned char ProgmemBuffer[64];                                                 C:\fw\midicontroller\x011a\ram_def.c
                                                                                                                            C:\fw\midicontroller\x011a\ram_def.c
                                           #pragma udata RamData                                                            C:\fw\midicontroller\x011a\ram_def.c
                                           BitField ArbFlags1;                                                              C:\fw\midicontroller\x011a\ram_def.c
                                           BitField MiscFlags1;                                                             C:\fw\midicontroller\x011a\ram_def.c
                                           BitField DispSegData[5];                                                         C:\fw\midicontroller\x011a\ram_def.c
                                           unsigned char DispNumOfCommons;                                                  C:\fw\midicontroller\x011a\ram_def.c
                                           unsigned char LedStates;			//footswitch leds                                     C:\fw\midicontroller\x011a\ram_def.c
                                           unsigned long	ButtonState;                                                       C:\fw\midicontroller\x011a\ram_def.c
                                           unsigned char ExpPedalInst;                                                      C:\fw\midicontroller\x011a\ram_def.c
                                                                                                                            C:\fw\midicontroller\x011a\ram_def.c
                                           TwoBytes ExpPedalAvg;                                                            C:\fw\midicontroller\x011a\ram_def.c
                                                                                                                            C:\fw\midicontroller\x011a\ram_def.c
                                           //----------------------------USB stuff----------------------------------        C:\fw\midicontroller\x011a\ram_def.c
                                           unsigned char USBDataPointer;                                                    C:\fw\midicontroller\x011a\ram_def.c
                                           unsigned char USBEP0DataInBuffer[64];                                            C:\fw\midicontroller\x011a\ram_def.c
                                           unsigned char ResponseType;                                                      C:\fw\midicontroller\x011a\ram_def.c
                                                                                                                            C:\fw\midicontroller\x011a\ram_def.c
                                           ;###########################################################################     C:\fw\midicontroller\x011a\config.asm
                                           ;#			Author: Joe Dunne				  #                                                    C:\fw\midicontroller\x011a\config.asm
                                           ;#			Date 4/06/07					  #                                                        C:\fw\midicontroller\x011a\config.asm
                                           ;#			Main arbitrator					  #                                                     C:\fw\midicontroller\x011a\config.asm
                                           ;#			File Name: config.asm  				  #                                              C:\fw\midicontroller\x011a\config.asm
                                           ;#									  #                                                                   C:\fw\midicontroller\x011a\config.asm
                                           ;############################################################################    C:\fw\midicontroller\x011a\config.asm
                                                                                                                            C:\fw\midicontroller\x011a\config.asm
                                           	ERRORLEVEL -208, -216                                                           C:\fw\midicontroller\x011a\config.asm
                                                                                                                            C:\fw\midicontroller\x011a\config.asm
                                           	LIST R=DEC                                                                      C:\fw\midicontroller\x011a\config.asm
                                                                                                                            C:\fw\midicontroller\x011a\config.asm
                                           	INCLUDE "a_MICRDEF.INC"                                                         C:\fw\midicontroller\x011a\config.asm
                                                   LIST                                                                     C:\fw\midicontroller\x011a\a_MICRDEF.INC
                                                                                                                            C:\fw\midicontroller\x011a\a_MICRDEF.INC
                                           ;==========================================================================      C:\fw\midicontroller\x011a\a_MICRDEF.INC
                                           ;  $Id: P18F4550.INC,v 1.7 2004/10/06 13:56:45 curtiss Exp $                     C:\fw\midicontroller\x011a\a_MICRDEF.INC
                                           ;  MPASM PIC18F4550 processor include                                            C:\fw\midicontroller\x011a\a_MICRDEF.INC
                                           ;                                                                                C:\fw\midicontroller\x011a\a_MICRDEF.INC
                                           ;  (c) Copyright 1999-2004 Microchip Technology, All rights reserved             C:\fw\midicontroller\x011a\a_MICRDEF.INC
                                           ;==========================================================================      C:\fw\midicontroller\x011a\a_MICRDEF.INC
                                                                                                                            C:\fw\midicontroller\x011a\a_MICRDEF.INC
                                                   LIST                                                                     C:\fw\midicontroller\x011a\a_MICRDEF.INC
                                                                                                                            C:\fw\midicontroller\x011a\config.asm
                                                                                                                            C:\fw\midicontroller\x011a\config.asm
                                           ;This section contains configuration bits for the processor                      C:\fw\midicontroller\x011a\config.asm
                                           ;Don't change this unless you know what you're doing.                            C:\fw\midicontroller\x011a\config.asm
                                           ;300000                                                                          C:\fw\midicontroller\x011a\config.asm
                                           	CONFIG USBDIV=2, CPUDIV=OSC2_PLL3, PLLDIV=2                                     C:\fw\midicontroller\x011a\config.asm
                                           ;300001                                                                          C:\fw\midicontroller\x011a\config.asm
                                           	CONFIG FOSC=HSPLL_HS, FCMEN=OFF, IESO=OFF                                       C:\fw\midicontroller\x011a\config.asm
                                           ;300002                                                                          C:\fw\midicontroller\x011a\config.asm
                                           	CONFIG VREGEN=ON, PWRT=ON, BOR=ON, BORV=2		;2 = 2.7V..                          C:\fw\midicontroller\x011a\config.asm
                                           ;300003                                                                          C:\fw\midicontroller\x011a\config.asm
                                           	CONFIG WDT=OFF, WDTPS=128                                                       C:\fw\midicontroller\x011a\config.asm
                                           ;300005                                                                          C:\fw\midicontroller\x011a\config.asm
                                           	CONFIG CCP2MX=ON, PBADEN=OFF, LPT1OSC=OFF, MCLRE=ON                             C:\fw\midicontroller\x011a\config.asm
                                           ;300006                                                                          C:\fw\midicontroller\x011a\config.asm
                                           	CONFIG STVREN=ON, LVP=OFF, ICPRT=OFF, XINST=OFF, DEBUG=OFF                      C:\fw\midicontroller\x011a\config.asm
                                           ;300008                                                                          C:\fw\midicontroller\x011a\config.asm
                                           	CONFIG CP0=OFF, CP1=OFF, CP2=OFF                                                C:\fw\midicontroller\x011a\config.asm
                                           ;300009                                                                          C:\fw\midicontroller\x011a\config.asm
                                           	CONFIG CPB=OFF, CPD=OFF                                                         C:\fw\midicontroller\x011a\config.asm
                                           ;30000A                                                                          C:\fw\midicontroller\x011a\config.asm
                                           	CONFIG WRT0=OFF, WRT1=OFF, WRT2=OFF                                             C:\fw\midicontroller\x011a\config.asm
                                           ;30000B                                                                          C:\fw\midicontroller\x011a\config.asm
                                           	CONFIG WRTC=OFF, WRTB=OFF, WRTD=OFF                                             C:\fw\midicontroller\x011a\config.asm
                                           ;30000C                                                                          C:\fw\midicontroller\x011a\config.asm
                                           	CONFIG EBTR0=OFF, EBTR1=OFF, EBTR2=OFF                                          C:\fw\midicontroller\x011a\config.asm
                                           ;30000D                                                                          C:\fw\midicontroller\x011a\config.asm
                                           	CONFIG EBTRB=OFF                                                                C:\fw\midicontroller\x011a\config.asm
                                                                                                                            C:\fw\midicontroller\x011a\config.asm
                                           	global	CLEAR_RAM                                                                C:\fw\midicontroller\x011a\config.asm
                                                                                                                            C:\fw\midicontroller\x011a\config.asm
                                           	code                                                                            C:\fw\midicontroller\x011a\config.asm
                                                                                                                            C:\fw\midicontroller\x011a\config.asm
                                           ;clear general purpose registers 0x000 through 0x7FF.                            C:\fw\midicontroller\x011a\config.asm
                                           CLEAR_RAM                                                                        C:\fw\midicontroller\x011a\config.asm
0034d4   6aea     CLRF      0xea,0x0       	clrf	FSR0H                                                                      C:\fw\midicontroller\x011a\config.asm
0034d6   6ae9     CLRF      0xe9,0x0       	clrf	FSR0L                                                                      C:\fw\midicontroller\x011a\config.asm
                                                                                                                            C:\fw\midicontroller\x011a\config.asm
                                           RAMCLEAR                                                                         C:\fw\midicontroller\x011a\config.asm
0034d8   0004     CLRWDT                   	CLRWDT                                                                          C:\fw\midicontroller\x011a\config.asm
0034da   6aee     CLRF      0xee,0x0       	clrf	POSTINC0                                                                   C:\fw\midicontroller\x011a\config.asm
0034dc   a6ea     BTFSS     0xea,0x3,0x0   	btfss	FSR0H, 3                                                                  C:\fw\midicontroller\x011a\config.asm
0034de   d7fc     BRA       0x34d8         	bra	RAMCLEAR                                                                    C:\fw\midicontroller\x011a\config.asm
0034e0   0012     RETURN    0x0            	return                                                                          C:\fw\midicontroller\x011a\config.asm
                                                                                                                            C:\fw\midicontroller\x011a\config.asm
                                           	END                                                                             C:\fw\midicontroller\x011a\config.asm
                                           //#######################################################################        C:\fw\midicontroller\x011a\intslct.c
                                           /**                                                                              C:\fw\midicontroller\x011a\intslct.c
                                           * @file intslct.c                                                                C:\fw\midicontroller\x011a\intslct.c
                                           * interrupt handler                                                              C:\fw\midicontroller\x011a\intslct.c
                                           *                                                                                C:\fw\midicontroller\x011a\intslct.c
                                           * @author Joe Dunne                                                              C:\fw\midicontroller\x011a\intslct.c
                                           * @date 2/02/05                                                                  C:\fw\midicontroller\x011a\intslct.c
                                           * @brief RS232/USB communication routine                                         C:\fw\midicontroller\x011a\intslct.c
                                           */                                                                               C:\fw\midicontroller\x011a\intslct.c
                                           //			*See Updates section at bottom of file*                                     C:\fw\midicontroller\x011a\intslct.c
                                           //#######################################################################        C:\fw\midicontroller\x011a\intslct.c
                                                                                                                            C:\fw\midicontroller\x011a\intslct.c
                                           #include "c_system.h"                                                            C:\fw\midicontroller\x011a\intslct.c
                                                                                                                            C:\fw\midicontroller\x011a\intslct.c
                                           #pragma code InterruptVectorHigh = 0xA08                                         C:\fw\midicontroller\x011a\intslct.c
                                           void                                                                             C:\fw\midicontroller\x011a\intslct.c
                                           InterruptVectorHigh (void)                                                       C:\fw\midicontroller\x011a\intslct.c
                                           {                                                                                C:\fw\midicontroller\x011a\intslct.c
                                             _asm                                                                           C:\fw\midicontroller\x011a\intslct.c
000a08   effd     GOTO      0x35fa         	goto InterruptHandlerHigh //jump to interrupt routine                           C:\fw\midicontroller\x011a\intslct.c
000a0a   f01a                                                                                                               
                                             _endasm                                                                        C:\fw\midicontroller\x011a\intslct.c
000a0c   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\intslct.c
                                                                                                                            C:\fw\midicontroller\x011a\intslct.c
                                                                                                                            C:\fw\midicontroller\x011a\intslct.c
                                           //----------------------------------------------------------------------------   C:\fw\midicontroller\x011a\intslct.c
                                           // High priority interrupt routine                                               C:\fw\midicontroller\x011a\intslct.c
                                                                                                                            C:\fw\midicontroller\x011a\intslct.c
                                           #pragma code                                                                     C:\fw\midicontroller\x011a\intslct.c
                                                                                                                            C:\fw\midicontroller\x011a\intslct.c
                                           #pragma interruptlow InterruptHandlerHigh                                        C:\fw\midicontroller\x011a\intslct.c
0035fa   cfd8     MOVFF     0xfd8,0xfe4    void	InterruptHandlerHigh ()                                                     C:\fw\midicontroller\x011a\intslct.c
0035fc   ffe4                                                                                                               
0035fe   cfe0     MOVFF     0xfe0,0xfe4                                                                                     
003600   ffe4                                                                                                               
003602   6ee4     MOVWF     0xe4,0x0                                                                                        
003604   cfda     MOVFF     0xfda,0xfe4                                                                                     
003606   ffe4                                                                                                               
003608   cfe2     MOVFF     0xfe2,0xfda                                                                                     
00360a   ffda                                                                                                               
00360c   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           {                                                                                C:\fw\midicontroller\x011a\intslct.c
00360e   a4f2     BTFSS     0xf2,0x2,0x0     if (INTCONbits.TMR0IF)                                                         C:\fw\midicontroller\x011a\intslct.c
003610   d003     BRA       0x3618                                                                                          
                                               {                                   //check for TMR0 overflow                C:\fw\midicontroller\x011a\intslct.c
003612   94f2     BCF       0xf2,0x2,0x0         INTCONbits.TMR0IF = 0;            //clear interrupt flag                   C:\fw\midicontroller\x011a\intslct.c
003614   0100     MOVLB     0x0                  Systick = true;                                                            C:\fw\midicontroller\x011a\intslct.c
003616   8160     BSF       0x60,0x0,0x1                                                                                    
                                               }                                                                            C:\fw\midicontroller\x011a\intslct.c
003618   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\intslct.c
00361a   cfe5     MOVFF     0xfe5,0xfda                                                                                     
00361c   ffda                                                                                                               
00361e   50e5     MOVF      0xe5,0x0,0x0                                                                                    
003620   cfe5     MOVFF     0xfe5,0xfe0                                                                                     
003622   ffe0                                                                                                               
003624   cfe5     MOVFF     0xfe5,0xfd8                                                                                     
003626   ffd8                                                                                                               
003628   0010     RETFIE    0x0                                                                                             
                                           #pragma code                                                                     C:\fw\midicontroller\x011a\intslct.c
                                           //----------------------------------------------------------------------------   C:\fw\midicontroller\x011a\intslct.c
                                           //*;###########################################################################  C:\fw\midicontroller\x011a\init.c
                                           //;#			Author: Joe Dunne											  #                                           C:\fw\midicontroller\x011a\init.c
                                           //;#			Date 4/06/07					      						  #                                          C:\fw\midicontroller\x011a\init.c
                                           //;#			Main arbitrator									  			  #                                          C:\fw\midicontroller\x011a\init.c
                                           //;#			File Name: main.c   										  #                                         C:\fw\midicontroller\x011a\init.c
                                           //;#																		  #                                                        C:\fw\midicontroller\x011a\init.c
                                           //;############################################################################  C:\fw\midicontroller\x011a\init.c
                                                                                                                            C:\fw\midicontroller\x011a\init.c
                                                                                                                            C:\fw\midicontroller\x011a\init.c
                                           #include "c_system.h"                                                            C:\fw\midicontroller\x011a\init.c
                                           #include "usb.h"                                                                 C:\fw\midicontroller\x011a\init.c
                                                                                                                            C:\fw\midicontroller\x011a\init.c
                                                                                                                            C:\fw\midicontroller\x011a\init.c
                                           void init(void) {                                                                C:\fw\midicontroller\x011a\init.c
00353c   ec6a     CALL      0x34d4,0x0     	CLEAR_RAM();                                                                    C:\fw\midicontroller\x011a\init.c
00353e   f01a                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\init.c
003540   6a89     CLRF      0x89,0x0       	LATA = 0;                                                                       C:\fw\midicontroller\x011a\init.c
003542   6a8a     CLRF      0x8a,0x0       	LATB = 0;                                                                       C:\fw\midicontroller\x011a\init.c
003544   6a8b     CLRF      0x8b,0x0       	LATC = 0;                                                                       C:\fw\midicontroller\x011a\init.c
003546   6a8c     CLRF      0x8c,0x0       	LATD = 0;                                                                       C:\fw\midicontroller\x011a\init.c
003548   6a8d     CLRF      0x8d,0x0       	LATE = 0;                                                                       C:\fw\midicontroller\x011a\init.c
                                                                                                                            C:\fw\midicontroller\x011a\init.c
00354a   0e01     MOVLW     0x1            	TRISA = INIT_TRISA;                                                             C:\fw\midicontroller\x011a\init.c
00354c   6e92     MOVWF     0x92,0x0                                                                                        
00354e   0e10     MOVLW     0x10           	TRISB = INIT_TRISB;                                                             C:\fw\midicontroller\x011a\init.c
003550   6e93     MOVWF     0x93,0x0                                                                                        
003552   0ef8     MOVLW     0xf8           	TRISC = INIT_TRISC;                                                             C:\fw\midicontroller\x011a\init.c
003554   6e94     MOVWF     0x94,0x0                                                                                        
003556   6a95     CLRF      0x95,0x0       	TRISD = INIT_TRISD;                                                             C:\fw\midicontroller\x011a\init.c
003558   0e02     MOVLW     0x2            	TRISE = INIT_TRISE;                                                             C:\fw\midicontroller\x011a\init.c
00355a   6e96     MOVWF     0x96,0x0                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\init.c
00355c   0100     MOVLB     0x0            	DispNumOfCommons = DISP_NUMBER_OF_COMMONS;                                      C:\fw\midicontroller\x011a\init.c
00355e   0e05     MOVLW     0x5                                                                                             
003560   6f67     MOVWF     0x67,0x1                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\init.c
                                           //	TRISCbits.TRISC6 = false;                                                     C:\fw\midicontroller\x011a\init.c
                                           //	RCSTA = 0x90;                                                                 C:\fw\midicontroller\x011a\init.c
                                           //	TXSTA = 0xA2;		//0x46;                                                        C:\fw\midicontroller\x011a\init.c
                                                                                                                            C:\fw\midicontroller\x011a\init.c
                                           //	SPBRG = 204;                                                                  C:\fw\midicontroller\x011a\init.c
                                                                                                                            C:\fw\midicontroller\x011a\init.c
                                                                                                                            C:\fw\midicontroller\x011a\init.c
                                           #ifdef UARTISRS232                                                               C:\fw\midicontroller\x011a\init.c
                                           //	TRISD = 0x00;		//assert all pins on portd as outputs                          C:\fw\midicontroller\x011a\init.c
                                           //Initialize the USART control registers                                         C:\fw\midicontroller\x011a\init.c
                                           	TXSTA = 0xA6;			//master,8bit,async,high speed                                  C:\fw\midicontroller\x011a\init.c
                                           	RCSTA = 0x90;			//enabled,8bit, continuous                                      C:\fw\midicontroller\x011a\init.c
                                           //	BAUDCONbits.BRG16 = true;                                                     C:\fw\midicontroller\x011a\init.c
                                           	SPBRG = 16;			//115200 baud                                                     C:\fw\midicontroller\x011a\init.c
                                           	SPBRGH = 0x01;                                                                  C:\fw\midicontroller\x011a\init.c
                                           #else                                                                            C:\fw\midicontroller\x011a\init.c
                                           //	TRISD = 0x00;		//assert all pins on portd as outputs                          C:\fw\midicontroller\x011a\init.c
                                           //Initialize the USART control registers                                         C:\fw\midicontroller\x011a\init.c
003562   0ee6     MOVLW     0xe6           	TXSTA = 0xE6;			//master,8bit,async, BRGH=1                                     C:\fw\midicontroller\x011a\init.c
003564   6eac     MOVWF     0xac,0x0                                                                                        
003566   0e90     MOVLW     0x90           	RCSTA = 0x90;			//enabled,8bit, continuous                                      C:\fw\midicontroller\x011a\init.c
003568   6eab     MOVWF     0xab,0x0                                                                                        
                                           //	BAUDCONbits.BRG16 = true;                                                     C:\fw\midicontroller\x011a\init.c
00356a   0e3f     MOVLW     0x3f           	SPBRG = 63;			//31250 baud                                                      C:\fw\midicontroller\x011a\init.c
00356c   6eaf     MOVWF     0xaf,0x0                                                                                        
00356e   6ab0     CLRF      0xb0,0x0       	SPBRGH = 0x00;                                                                  C:\fw\midicontroller\x011a\init.c
                                           #endif                                                                           C:\fw\midicontroller\x011a\init.c
                                                                                                                            C:\fw\midicontroller\x011a\init.c
                                           //These constants setup the application's MCU Analog-to-Digital Converter module. C:\fw\midicontroller\x011a\init.c
003570   0e40     MOVLW     0x40           	ADCON0	= 0b01000000;		//AN0, off                                                C:\fw\midicontroller\x011a\init.c
003572   6ec2     MOVWF     0xc2,0x0                                                                                        
003574   0e0e     MOVLW     0xe            	ADCON1	= 0b00001110;		//1 analog channels                                       C:\fw\midicontroller\x011a\init.c
003576   6ec1     MOVWF     0xc1,0x0                                                                                        
003578   0e86     MOVLW     0x86           	ADCON2	= 0b10000110;		//Right justified, 0 TAD(manual), FOSC/32                 C:\fw\midicontroller\x011a\init.c
00357a   6ec0     MOVWF     0xc0,0x0                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\init.c
                                           //set up timer0 to interrupt at some interval..                                  C:\fw\midicontroller\x011a\init.c
00357c   0e20     MOVLW     0x20           	INTCON = 0x20;                //disable global and enable TMR0 interrupt        C:\fw\midicontroller\x011a\init.c
00357e   6ef2     MOVWF     0xf2,0x0                                                                                        
003580   0e84     MOVLW     0x84           	INTCON2 = 0x84;               //TMR0 high priority                              C:\fw\midicontroller\x011a\init.c
003582   6ef1     MOVWF     0xf1,0x0                                                                                        
003584   8ed0     BSF       0xd0,0x7,0x0   	RCONbits.IPEN = 1;            //enable priority levels                          C:\fw\midicontroller\x011a\init.c
003586   6ad7     CLRF      0xd7,0x0       	TMR0H = 0;                    //clear timer                                     C:\fw\midicontroller\x011a\init.c
003588   6ad6     CLRF      0xd6,0x0       	TMR0L = 0;                    //clear timer                                     C:\fw\midicontroller\x011a\init.c
00358a   0e80     MOVLW     0x80           	T0CON = 0x80;                 //set up timer0 - prescaler 1:8                   C:\fw\midicontroller\x011a\init.c
00358c   6ed5     MOVWF     0xd5,0x0                                                                                        
00358e   8ef2     BSF       0xf2,0x7,0x0   	INTCONbits.GIEH = 1;          //enable interrupts                               C:\fw\midicontroller\x011a\init.c
                                                                                                                            C:\fw\midicontroller\x011a\init.c
                                                                                                                            C:\fw\midicontroller\x011a\init.c
003590   0e14     MOVLW     0x14           	mInitializeUSBDriver();                                                         C:\fw\midicontroller\x011a\init.c
003592   6e6f     MOVWF     0x6f,0x0                                                                                        
003594   0101     MOVLB     0x1                                                                                             
003596   6b87     CLRF      0x87,0x1                                                                                        
003598   0101     MOVLB     0x1                                                                                             
00359a   6b88     CLRF      0x88,0x1                                                                                        
00359c   0101     MOVLB     0x1                                                                                             
00359e   6b89     CLRF      0x89,0x1                                                                                        
0035a0   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\init.c
                                           //*;###########################################################################  C:\fw\midicontroller\x011a\hwcalls.c
                                           //;#			Author: Joe Dunne											  #                                           C:\fw\midicontroller\x011a\hwcalls.c
                                           //;#			Date 4/06/07					      						  #                                          C:\fw\midicontroller\x011a\hwcalls.c
                                           //;#			Main arbitrator									  			  #                                          C:\fw\midicontroller\x011a\hwcalls.c
                                           //;#			File Name: hwcalls.c   										  #                                      C:\fw\midicontroller\x011a\hwcalls.c
                                           //;#																		  #                                                        C:\fw\midicontroller\x011a\hwcalls.c
                                           //;############################################################################  C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           #include "c_system.h"                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           #include "typedefs.h"                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           #include "hardware.h"                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
0024be   cfd9     MOVFF     0xfd9,0xfe6    unsigned char	ADC_CONVERSION(unsigned char Channel) {                            C:\fw\midicontroller\x011a\hwcalls.c
0024c0   ffe6                                                                                                               
0024c2   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0024c4   ffd9                                                                                                               
0024c6   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	unsigned char tempcntr;                                                         C:\fw\midicontroller\x011a\hwcalls.c
0024c8   0efe     MOVLW     0xfe           	ADCON0 = Channel;                                                               C:\fw\midicontroller\x011a\hwcalls.c
0024ca   50db     MOVF      0xdb,0x0,0x0                                                                                    
0024cc   6ec2     MOVWF     0xc2,0x0                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           //Wait for the converter's holding capacitor to charge up.                       C:\fw\midicontroller\x011a\hwcalls.c
                                           ADC_CHARGING_DELAY_LOOP:                                                         C:\fw\midicontroller\x011a\hwcalls.c
0024ce   0e0a     MOVLW     0xa            	for(tempcntr = 10;tempcntr!=0;tempcntr--);                                      C:\fw\midicontroller\x011a\hwcalls.c
0024d0   6edf     MOVWF     0xdf,0x0                                                                                        
0024d2   50df     MOVF      0xdf,0x0,0x0                                                                                    
0024d4   e002     BZ        0x24da                                                                                          
0024d6   06df     DECF      0xdf,0x1,0x0                                                                                    
0024d8   d7fc     BRA       0x24d2                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           //Start the conversion                                                           C:\fw\midicontroller\x011a\hwcalls.c
0024da   82c2     BSF       0xc2,0x1,0x0   	ADCON0bits.GO = true;                                                           C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           //Wait for the conversion to complete, then exit                                 C:\fw\midicontroller\x011a\hwcalls.c
                                           ADC_CONVERSION_DELAY:                                                            C:\fw\midicontroller\x011a\hwcalls.c
0024dc   b2c2     BTFSC     0xc2,0x1,0x0   	for(;ADCON0bits.GO;);                                                           C:\fw\midicontroller\x011a\hwcalls.c
0024de   d7fe     BRA       0x24dc                                                                                          
                                           	                                                                                C:\fw\midicontroller\x011a\hwcalls.c
0024e0   50c4     MOVF      0xc4,0x0,0x0   	return ADRESH;                                                                  C:\fw\midicontroller\x011a\hwcalls.c
0024e2   d000     BRA       0x24e4                                                                                          
0024e4   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
0024e6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0024e8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0024ea   ffd9                                                                                                               
0024ec   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /* Send a single MIDI byte. */                                                   C:\fw\midicontroller\x011a\hwcalls.c
0024ee   cfd9     MOVFF     0xfd9,0xfe6    void midi_send_byte(u8 data) {                                                   C:\fw\midicontroller\x011a\hwcalls.c
0024f0   ffe6                                                                                                               
0024f2   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0024f4   ffd9                                                                                                               
0024f6   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	unsigned char temp;                                                             C:\fw\midicontroller\x011a\hwcalls.c
                                           	//send out first byte.                                                          C:\fw\midicontroller\x011a\hwcalls.c
0024f8   0efe     MOVLW     0xfe           	TXREG = data;                                                                   C:\fw\midicontroller\x011a\hwcalls.c
0024fa   50db     MOVF      0xdb,0x0,0x0                                                                                    
0024fc   6ead     MOVWF     0xad,0x0                                                                                        
0024fe   509e     MOVF      0x9e,0x0,0x0   	temp = PIR1;			//clear TXIF..                                                   C:\fw\midicontroller\x011a\hwcalls.c
002500   6edf     MOVWF     0xdf,0x0                                                                                        
002502   a89e     BTFSS     0x9e,0x4,0x0   	while(!PIR1bits.TXIF);                                                          C:\fw\midicontroller\x011a\hwcalls.c
002504   d7fe     BRA       0x2502                                                                                          
002506   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
002508   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00250a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00250c   ffd9                                                                                                               
00250e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           //****************************************************************************** C:\fw\midicontroller\x011a\hwcalls.c
                                           //JDunne 5/27/07 - Converted routine from assembly to C.  (used to be called SEND_TO_LATCHES) C:\fw\midicontroller\x011a\hwcalls.c
                                           //------------------------------------------------------------------------------ C:\fw\midicontroller\x011a\hwcalls.c
002510   cfd9     MOVFF     0xfd9,0xfe6    void	SendDataToShiftReg(unsigned char dataToSend) {                              C:\fw\midicontroller\x011a\hwcalls.c
002512   ffe6                                                                                                               
002514   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002516   ffd9                                                                                                               
002518   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	unsigned char DataCounter;                                                      C:\fw\midicontroller\x011a\hwcalls.c
                                           //SEND_SPEC_TO_LATCHES                                                           C:\fw\midicontroller\x011a\hwcalls.c
00251a   0e08     MOVLW     0x8            	DataCounter = 8;								//Load number of bits to be transfered                  C:\fw\midicontroller\x011a\hwcalls.c
00251c   6edf     MOVWF     0xdf,0x0                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           //	bcf	SRCK_LAT_BIT						//Control clock signal, also prevent IIC start          C:\fw\midicontroller\x011a\hwcalls.c
00251e   8489     BSF       0x89,0x2,0x0   	SHIFTREG_RCK_LAT_BIT = true;			//Flush out garbage                              C:\fw\midicontroller\x011a\hwcalls.c
002520   9489     BCF       0x89,0x2,0x0   	SHIFTREG_RCK_LAT_BIT = false;                                                   C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           //STL_TRANSMIT_BIT                                                               C:\fw\midicontroller\x011a\hwcalls.c
                                           	do {                                                                            C:\fw\midicontroller\x011a\hwcalls.c
002522   9289     BCF       0x89,0x1,0x0   		SHIFTREG_SRCK_LAT_BIT = false;				//Clear strobe pin                           C:\fw\midicontroller\x011a\hwcalls.c
002524   0efe     MOVLW     0xfe           		if (!chkbit(dataToSend, 7)) {		//MSB high?                                     C:\fw\midicontroller\x011a\hwcalls.c
002526   bedb     BTFSC     0xdb,0x7,0x0                                                                                    
002528   d002     BRA       0x252e                                                                                          
00252a   9689     BCF       0x89,0x3,0x0   			SHIFTREG_SER_IN_LAT_BIT = false;		//No, set data signal low                   C:\fw\midicontroller\x011a\hwcalls.c
                                           		}                                                                              C:\fw\midicontroller\x011a\hwcalls.c
00252c   d001     BRA       0x2530         		else {								//MSB low?                                                       C:\fw\midicontroller\x011a\hwcalls.c
00252e   8689     BSF       0x89,0x3,0x0   			SHIFTREG_SER_IN_LAT_BIT = true;		//No, release data signal                    C:\fw\midicontroller\x011a\hwcalls.c
                                           		}                                                                              C:\fw\midicontroller\x011a\hwcalls.c
002530   cfdb     MOVFF     0xfdb,0xff3    		dataToSend <<=1;					//Shift next bit to MSB position                          C:\fw\midicontroller\x011a\hwcalls.c
002532   fff3                                                                                                               
002534   9ef3     BCF       0xf3,0x7,0x0                                                                                    
002536   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
002538   cff3     MOVFF     0xff3,0xfdb                                                                                     
00253a   ffdb                                                                                                               
00253c   8289     BSF       0x89,0x1,0x0   		SHIFTREG_SRCK_LAT_BIT = true;                                                  C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           //STL_RESET_CLOCK_LEVEL                                                          C:\fw\midicontroller\x011a\hwcalls.c
00253e   06df     DECF      0xdf,0x1,0x0   	} while (--DataCounter!=0);				//All 8 bits transfered? No, go transfer next bit C:\fw\midicontroller\x011a\hwcalls.c
002540   e1f0     BNZ       0x2522                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           //STL_STROBE                                                                     C:\fw\midicontroller\x011a\hwcalls.c
002542   8489     BSF       0x89,0x2,0x0   	SHIFTREG_RCK_LAT_BIT = true;			//Strobe the data                                C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           //STL_STROBE_DELAY                                                               C:\fw\midicontroller\x011a\hwcalls.c
002544   0e10     MOVLW     0x10           	for (DataCounter = LATCH_STROBE_DELAY; DataCounter !=0;DataCounter--);		//Pause for data transfer from external latch_1's input to its output C:\fw\midicontroller\x011a\hwcalls.c
002546   6edf     MOVWF     0xdf,0x0                                                                                        
002548   50df     MOVF      0xdf,0x0,0x0                                                                                    
00254a   e002     BZ        0x2550                                                                                          
00254c   06df     DECF      0xdf,0x1,0x0                                                                                    
00254e   d7fc     BRA       0x2548                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
002550   9489     BCF       0x89,0x2,0x0   	SHIFTREG_RCK_LAT_BIT = false;                                                   C:\fw\midicontroller\x011a\hwcalls.c
002552   8689     BSF       0x89,0x3,0x0   	SHIFTREG_SER_IN_LAT_BIT = true;				//Release data signal                        C:\fw\midicontroller\x011a\hwcalls.c
002554   8289     BSF       0x89,0x1,0x0   	SHIFTREG_SRCK_LAT_BIT = true;			//Release serial clk                            C:\fw\midicontroller\x011a\hwcalls.c
002556   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
002558   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00255a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00255c   ffd9                                                                                                               
00255e   0012     RETURN    0x0                                                                                             
                                           //------------------------------------------------------------------------------ C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           //returns data into ButtonState.                                                 C:\fw\midicontroller\x011a\hwcalls.c
002560   cfd9     MOVFF     0xfd9,0xfe6    void	ReadButtons(void) {                                                         C:\fw\midicontroller\x011a\hwcalls.c
002562   ffe6                                                                                                               
002564   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002566   ffd9                                                                                                               
002568   0e04     MOVLW     0x4                                                                                             
00256a   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	unsigned char BtnAddress, bitloc, i;                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           	BitField TempButtons;                                                           C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           //the following only reads 7 buttons from the multiplexor, and the 8th from the pin directly. C:\fw\midicontroller\x011a\hwcalls.c
                                           //the 7th bit of the multiplexor is the modeswitch which is read below.          C:\fw\midicontroller\x011a\hwcalls.c
00256c   52de     MOVF      0xde,0x1,0x0   	bitloc = 1;                                                                     C:\fw\midicontroller\x011a\hwcalls.c
00256e   0e01     MOVLW     0x1                                                                                             
002570   6edd     MOVWF     0xdd,0x0                                                                                        
002572   0e03     MOVLW     0x3            	TempButtons.byte = 0;                                                           C:\fw\midicontroller\x011a\hwcalls.c
002574   6adb     CLRF      0xdb,0x0                                                                                        
002576   6adf     CLRF      0xdf,0x0       	for (BtnAddress = 0;BtnAddress<=6;BtnAddress++) {                               C:\fw\midicontroller\x011a\hwcalls.c
002578   50df     MOVF      0xdf,0x0,0x0                                                                                    
00257a   0806     SUBLW     0x6                                                                                             
00257c   e322     BNC       0x25c2                                                                                          
0025be   2adf     INCF      0xdf,0x1,0x0                                                                                    
0025c0   d7db     BRA       0x2578                                                                                          
00257e   cfdf     MOVFF     0xfdf,0xfe6    		SetDipAddress(BtnAddress);                                                     C:\fw\midicontroller\x011a\hwcalls.c
002580   ffe6                                                                                                               
002582   d8dd     RCALL     0x273e                                                                                          
002584   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
002586   0e05     MOVLW     0x5            		for (i = BTN_SAMPLE_DELAY;i!=0;i--);		//delay for a sampling delay             C:\fw\midicontroller\x011a\hwcalls.c
002588   6ef3     MOVWF     0xf3,0x0                                                                                        
00258a   0e02     MOVLW     0x2                                                                                             
00258c   cff3     MOVFF     0xff3,0xfdb                                                                                     
00258e   ffdb                                                                                                               
002590   50db     MOVF      0xdb,0x0,0x0                                                                                    
002592   e003     BZ        0x259a                                                                                          
002594   0e02     MOVLW     0x2                                                                                             
002596   06db     DECF      0xdb,0x1,0x0                                                                                    
002598   d7fb     BRA       0x2590                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
00259a   a284     BTFSS     0x84,0x1,0x0   		if (BTN_IN_PIN) TempButtons.byte |= bitloc;		//Or in the current bit if it is set. C:\fw\midicontroller\x011a\hwcalls.c
00259c   d009     BRA       0x25b0                                                                                          
00259e   0e03     MOVLW     0x3                                                                                             
0025a0   cfdb     MOVFF     0xfdb,0xfe7                                                                                     
0025a2   ffe7                                                                                                               
0025a4   0e01     MOVLW     0x1                                                                                             
0025a6   50db     MOVF      0xdb,0x0,0x0                                                                                    
0025a8   12e7     IORWF     0xe7,0x1,0x0                                                                                    
0025aa   0e03     MOVLW     0x3                                                                                             
0025ac   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
0025ae   ffdb                                                                                                               
0025b0   0e01     MOVLW     0x1            		bitloc <<= 1;										//shift the bit over to the next                        C:\fw\midicontroller\x011a\hwcalls.c
0025b2   cfdb     MOVFF     0xfdb,0xff3                                                                                     
0025b4   fff3                                                                                                               
0025b6   9ef3     BCF       0xf3,0x7,0x0                                                                                    
0025b8   46f3     RLNCF     0xf3,0x1,0x0                                                                                    
0025ba   cff3     MOVFF     0xff3,0xfdb                                                                                     
0025bc   ffdb                                                                                                               
                                           	}                                                                               C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
0025c2   0e03     MOVLW     0x3            	ButtonState = TempButtons.byte;                                                 C:\fw\midicontroller\x011a\hwcalls.c
0025c4   cfdb     MOVFF     0xfdb,0x69                                                                                      
0025c6   f069                                                                                                               
0025c8   0100     MOVLB     0x0                                                                                             
0025ca   6b6a     CLRF      0x6a,0x1                                                                                        
0025cc   6b6b     CLRF      0x6b,0x1                                                                                        
0025ce   6b6c     CLRF      0x6c,0x1                                                                                        
0025d0   90d8     BCF       0xd8,0x0,0x0   	ButtonState <<=1;			//shift everything over one because the 0th bit is supposed C:\fw\midicontroller\x011a\hwcalls.c
0025d2   3769     RLCF      0x69,0x1,0x1                                                                                    
0025d4   376a     RLCF      0x6a,0x1,0x1                                                                                    
0025d6   376b     RLCF      0x6b,0x1,0x1                                                                                    
0025d8   376c     RLCF      0x6c,0x1,0x1                                                                                    
                                           								//to be PRESET_1, which is on another pin.                               C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
0025da   696a     SETF      0x6a,0x1       	ButtonState |= 0xFFFFFF00;                                                      C:\fw\midicontroller\x011a\hwcalls.c
0025dc   696b     SETF      0x6b,0x1                                                                                        
0025de   696c     SETF      0x6c,0x1                                                                                        
0025e0   b881     BTFSC     0x81,0x4,0x0   	if (BTN_PRESET_1_PIN) setbit(ButtonState,0);                                    C:\fw\midicontroller\x011a\hwcalls.c
0025e2   8169     BSF       0x69,0x0,0x1                                                                                    
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           	//all buttons are backwards logic, so simply invert the state of ButtonState.   C:\fw\midicontroller\x011a\hwcalls.c
0025e4   1f69     COMF      0x69,0x1,0x1   	ButtonState = ~ButtonState;                                                     C:\fw\midicontroller\x011a\hwcalls.c
0025e6   1f6a     COMF      0x6a,0x1,0x1                                                                                    
0025e8   1f6b     COMF      0x6b,0x1,0x1                                                                                    
0025ea   1f6c     COMF      0x6c,0x1,0x1                                                                                    
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           	//read the 7th bit of the shift register.  (Which is the slider mode switch)    C:\fw\midicontroller\x011a\hwcalls.c
0025ec   0e07     MOVLW     0x7            	BtnAddress = 0x07;                                                              C:\fw\midicontroller\x011a\hwcalls.c
0025ee   6edf     MOVWF     0xdf,0x0                                                                                        
0025f0   cfdf     MOVFF     0xfdf,0xfe6    	SetDipAddress(BtnAddress);                                                      C:\fw\midicontroller\x011a\hwcalls.c
0025f2   ffe6                                                                                                               
0025f4   d8a4     RCALL     0x273e                                                                                          
0025f6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0025f8   0100     MOVLB     0x0            	ModeSwitchState = true;                                                         C:\fw\midicontroller\x011a\hwcalls.c
0025fa   8161     BSF       0x61,0x0,0x1                                                                                    
0025fc   b284     BTFSC     0x84,0x1,0x0   	if (BTN_IN_PIN) ModeSwitchState = false;                                        C:\fw\midicontroller\x011a\hwcalls.c
0025fe   9161     BCF       0x61,0x0,0x1                                                                                    
002600   0e04     MOVLW     0x4            }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
002602   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
002604   e202     BC        0x260a                                                                                          
002606   6ae1     CLRF      0xe1,0x0                                                                                        
002608   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00260a   6ee1     MOVWF     0xe1,0x0                                                                                        
00260c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00260e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002610   ffd9                                                                                                               
002612   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           ///Average = ((Inst-Avg)/(2^Tau))+Avg                                            C:\fw\midicontroller\x011a\hwcalls.c
002614   cfd9     MOVFF     0xfd9,0xfe6    TwoBytes Filtered2SampleAvg(TwoBytes Avg, unsigned char Inst, unsigned char Tau) { C:\fw\midicontroller\x011a\hwcalls.c
002616   ffe6                                                                                                               
002618   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00261a   ffd9                                                                                                               
00261c   0e03     MOVLW     0x3                                                                                             
00261e   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	unsigned char positive;                                                         C:\fw\midicontroller\x011a\hwcalls.c
                                           	TwoBytes diff;                                                                  C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
002620   0e01     MOVLW     0x1            	diff.s_form = 0;                                                                C:\fw\midicontroller\x011a\hwcalls.c
002622   6adb     CLRF      0xdb,0x0                                                                                        
002624   0e02     MOVLW     0x2                                                                                             
002626   6adb     CLRF      0xdb,0x0                                                                                        
002628   0efe     MOVLW     0xfe           	if (Inst >= Avg.b_form.high) {                                                  C:\fw\midicontroller\x011a\hwcalls.c
00262a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00262c   6ef3     MOVWF     0xf3,0x0                                                                                        
00262e   0efc     MOVLW     0xfc                                                                                            
002630   cfdb     MOVFF     0xfdb,0xff4                                                                                     
002632   fff4                                                                                                               
002634   50f3     MOVF      0xf3,0x0,0x0                                                                                    
002636   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
002638   e30e     BNC       0x2656                                                                                          
00263a   0efc     MOVLW     0xfc           		diff.b_form.high = Inst - Avg.b_form.high;                                     C:\fw\midicontroller\x011a\hwcalls.c
00263c   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00263e   ffe6                                                                                                               
002640   0efe     MOVLW     0xfe                                                                                            
002642   50db     MOVF      0xdb,0x0,0x0                                                                                    
002644   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002646   5ce7     SUBWF     0xe7,0x0,0x0                                                                                    
002648   6ee7     MOVWF     0xe7,0x0                                                                                        
00264a   0e02     MOVLW     0x2                                                                                             
00264c   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
00264e   ffdb                                                                                                               
002650   0e00     MOVLW     0x0            		setbit(positive,0);                                                            C:\fw\midicontroller\x011a\hwcalls.c
002652   80df     BSF       0xdf,0x0,0x0                                                                                    
                                           	}                                                                               C:\fw\midicontroller\x011a\hwcalls.c
002654   d00d     BRA       0x2670         	else {                                                                          C:\fw\midicontroller\x011a\hwcalls.c
002656   0efe     MOVLW     0xfe           		diff.b_form.high = Avg.b_form.high - Inst;                                     C:\fw\midicontroller\x011a\hwcalls.c
002658   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
00265a   ffe6                                                                                                               
00265c   0efc     MOVLW     0xfc                                                                                            
00265e   50db     MOVF      0xdb,0x0,0x0                                                                                    
002660   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002662   5ce7     SUBWF     0xe7,0x0,0x0                                                                                    
002664   6ee7     MOVWF     0xe7,0x0                                                                                        
002666   0e02     MOVLW     0x2                                                                                             
002668   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
00266a   ffdb                                                                                                               
00266c   0e00     MOVLW     0x0            		clrbit(positive,0);                                                            C:\fw\midicontroller\x011a\hwcalls.c
00266e   90df     BCF       0xdf,0x0,0x0                                                                                    
                                           	}                                                                               C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
002670   0efb     MOVLW     0xfb           	diff.s_form >>= Tau;                                                            C:\fw\midicontroller\x011a\hwcalls.c
002672   cfdb     MOVFF     0xfdb,0x10                                                                                      
002674   f010                                                                                                               
002676   50d9     MOVF      0xd9,0x0,0x0                                                                                    
002678   0f01     ADDLW     0x1                                                                                             
00267a   6ee9     MOVWF     0xe9,0x0                                                                                        
00267c   cfda     MOVFF     0xfda,0xfea                                                                                     
00267e   ffea                                                                                                               
002680   5010     MOVF      0x10,0x0,0x0                                                                                    
002682   0b0f     ANDLW     0xf                                                                                             
002684   e006     BZ        0x2692                                                                                          
002686   52ec     MOVF      0xec,0x1,0x0                                                                                    
002688   90d8     BCF       0xd8,0x0,0x0                                                                                    
00268a   32ed     RRCF      0xed,0x1,0x0                                                                                    
00268c   32ef     RRCF      0xef,0x1,0x0                                                                                    
00268e   06e8     DECF      0xe8,0x1,0x0                                                                                    
002690   e1fa     BNZ       0x2686                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
002692   a0df     BTFSS     0xdf,0x0,0x0   	if (chkbit(positive,0)) {                                                       C:\fw\midicontroller\x011a\hwcalls.c
002694   d011     BRA       0x26b8                                                                                          
002696   0e01     MOVLW     0x1            		Avg.s_form += diff.s_form;                                                     C:\fw\midicontroller\x011a\hwcalls.c
002698   cfdb     MOVFF     0xfdb,0x10                                                                                      
00269a   f010                                                                                                               
00269c   0e02     MOVLW     0x2                                                                                             
00269e   cfdb     MOVFF     0xfdb,0x11                                                                                      
0026a0   f011                                                                                                               
0026a2   50d9     MOVF      0xd9,0x0,0x0                                                                                    
0026a4   0ffd     ADDLW     0xfd                                                                                            
0026a6   6ee9     MOVWF     0xe9,0x0                                                                                        
0026a8   0eff     MOVLW     0xff                                                                                            
0026aa   20da     ADDWFC    0xda,0x0,0x0                                                                                    
0026ac   6eea     MOVWF     0xea,0x0                                                                                        
0026ae   5010     MOVF      0x10,0x0,0x0                                                                                    
0026b0   26ee     ADDWF     0xee,0x1,0x0                                                                                    
0026b2   5011     MOVF      0x11,0x0,0x0                                                                                    
0026b4   22ed     ADDWFC    0xed,0x1,0x0                                                                                    
                                           	}                                                                               C:\fw\midicontroller\x011a\hwcalls.c
0026b6   d010     BRA       0x26d8         	else {                                                                          C:\fw\midicontroller\x011a\hwcalls.c
0026b8   0e01     MOVLW     0x1            		Avg.s_form -= diff.s_form;                                                     C:\fw\midicontroller\x011a\hwcalls.c
0026ba   cfdb     MOVFF     0xfdb,0x10                                                                                      
0026bc   f010                                                                                                               
0026be   0e02     MOVLW     0x2                                                                                             
0026c0   cfdb     MOVFF     0xfdb,0x11                                                                                      
0026c2   f011                                                                                                               
0026c4   50d9     MOVF      0xd9,0x0,0x0                                                                                    
0026c6   0ffd     ADDLW     0xfd                                                                                            
0026c8   6ee9     MOVWF     0xe9,0x0                                                                                        
0026ca   0eff     MOVLW     0xff                                                                                            
0026cc   20da     ADDWFC    0xda,0x0,0x0                                                                                    
0026ce   6eea     MOVWF     0xea,0x0                                                                                        
0026d0   5010     MOVF      0x10,0x0,0x0                                                                                    
0026d2   5eee     SUBWF     0xee,0x1,0x0                                                                                    
0026d4   5011     MOVF      0x11,0x0,0x0                                                                                    
0026d6   5aed     SUBWFB    0xed,0x1,0x0                                                                                    
                                           	}                                                                               C:\fw\midicontroller\x011a\hwcalls.c
0026d8   0efd     MOVLW     0xfd           	return Avg;                                                                     C:\fw\midicontroller\x011a\hwcalls.c
0026da   cfdb     MOVFF     0xfdb,0x10                                                                                      
0026dc   f010                                                                                                               
0026de   0efe     MOVLW     0xfe                                                                                            
0026e0   cfdb     MOVFF     0xfdb,0x11                                                                                      
0026e2   f011                                                                                                               
0026e4   c010     MOVFF     0x10,0xff3                                                                                      
0026e6   fff3                                                                                                               
0026e8   c011     MOVFF     0x11,0xff4                                                                                      
0026ea   fff4                                                                                                               
0026ec   0e03     MOVLW     0x3            }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
0026ee   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0026f0   e203     BC        0x26f8                                                                                          
0026f2   d000     BRA       0x26f4                                                                                          
0026f4   6ae1     CLRF      0xe1,0x0                                                                                        
0026f6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0026f8   6ee1     MOVWF     0xe1,0x0                                                                                        
0026fa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0026fc   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0026fe   ffd9                                                                                                               
002700   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
002702   cfd9     MOVFF     0xfd9,0xfe6    void	Write64BytesProgMem(rom unsigned char *RomPtr, unsigned char *RamPtr) {     C:\fw\midicontroller\x011a\hwcalls.c
002704   ffe6                                                                                                               
002706   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002708   ffd9                                                                                                               
00270a   0efd     MOVLW     0xfd           	TBLPTR = (unsigned long)RomPtr;                                                 C:\fw\midicontroller\x011a\hwcalls.c
00270c   cfdb     MOVFF     0xfdb,0x10                                                                                      
00270e   f010                                                                                                               
002710   0efe     MOVLW     0xfe                                                                                            
002712   cfdb     MOVFF     0xfdb,0x11                                                                                      
002714   f011                                                                                                               
002716   6a12     CLRF      0x12,0x0                                                                                        
002718   6a13     CLRF      0x13,0x0                                                                                        
00271a   c010     MOVFF     0x10,0xff6                                                                                      
00271c   fff6                                                                                                               
00271e   c011     MOVFF     0x11,0xff7                                                                                      
002720   fff7                                                                                                               
002722   c012     MOVFF     0x12,0xff8                                                                                      
002724   fff8                                                                                                               
002726   0efb     MOVLW     0xfb           	FSR0 = (unsigned short)RamPtr;                                                  C:\fw\midicontroller\x011a\hwcalls.c
002728   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
00272a   ffe9                                                                                                               
00272c   0efc     MOVLW     0xfc                                                                                            
00272e   cfdb     MOVFF     0xfdb,0xfea                                                                                     
002730   ffea                                                                                                               
002732   ec7a     CALL      0x34f4,0x0     	WRITE_BLOCK_INTO_ROM();                                                         C:\fw\midicontroller\x011a\hwcalls.c
002734   f01a                                                                                                               
002736   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
002738   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00273a   ffd9                                                                                                               
00273c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
00273e   cfd9     MOVFF     0xfd9,0xfe6    void	SetDipAddress(unsigned char Address) {                                      C:\fw\midicontroller\x011a\hwcalls.c
002740   ffe6                                                                                                               
002742   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002744   ffd9                                                                                                               
002746   9889     BCF       0x89,0x4,0x0   	BTN_S0_LAT_BIT = false;                                                         C:\fw\midicontroller\x011a\hwcalls.c
002748   9a89     BCF       0x89,0x5,0x0   	BTN_S1_LAT_BIT = false;                                                         C:\fw\midicontroller\x011a\hwcalls.c
00274a   908d     BCF       0x8d,0x0,0x0   	BTN_S2_LAT_BIT = false;                                                         C:\fw\midicontroller\x011a\hwcalls.c
00274c   0efe     MOVLW     0xfe           	if (chkbit(Address,0)) BTN_S0_LAT_BIT = true;                                   C:\fw\midicontroller\x011a\hwcalls.c
00274e   b0db     BTFSC     0xdb,0x0,0x0                                                                                    
002750   8889     BSF       0x89,0x4,0x0                                                                                    
002752   b2db     BTFSC     0xdb,0x1,0x0   	if (chkbit(Address,1)) BTN_S1_LAT_BIT = true;                                   C:\fw\midicontroller\x011a\hwcalls.c
002754   8a89     BSF       0x89,0x5,0x0                                                                                    
002756   b4db     BTFSC     0xdb,0x2,0x0   	if (chkbit(Address,2)) BTN_S2_LAT_BIT = true;                                   C:\fw\midicontroller\x011a\hwcalls.c
002758   808d     BSF       0x8d,0x0,0x0                                                                                    
00275a   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
00275c   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00275e   ffd9                                                                                                               
002760   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /* --------------- LED read-out display functions: */                            C:\fw\midicontroller\x011a\hwcalls.c
002762   cfd9     MOVFF     0xfd9,0xfe6    u32 fsw_poll(){                                                                  C:\fw\midicontroller\x011a\hwcalls.c
002764   ffe6                                                                                                               
002766   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002768   ffd9                                                                                                               
00276a   0e04     MOVLW     0x4                                                                                             
00276c   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	FourBytes TempButtons;                                                          C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
00276e   6ade     CLRF      0xde,0x0       	TempButtons.l_form = 0;                                                         C:\fw\midicontroller\x011a\hwcalls.c
002770   6ade     CLRF      0xde,0x0                                                                                        
002772   6ade     CLRF      0xde,0x0                                                                                        
002774   6add     CLRF      0xdd,0x0                                                                                        
002776   52dd     MOVF      0xdd,0x1,0x0                                                                                    
002778   52dd     MOVF      0xdd,0x1,0x0                                                                                    
00277a   c069     MOVFF     0x69,0x10      	TempButtons.b_form.byte3 = ButtonState&0xF0;                                    C:\fw\midicontroller\x011a\hwcalls.c
00277c   f010                                                                                                               
00277e   c06a     MOVFF     0x6a,0x11                                                                                       
002780   f011                                                                                                               
002782   c06b     MOVFF     0x6b,0x12                                                                                       
002784   f012                                                                                                               
002786   c06c     MOVFF     0x6c,0x13                                                                                       
002788   f013                                                                                                               
00278a   0ef0     MOVLW     0xf0                                                                                            
00278c   1610     ANDWF     0x10,0x1,0x0                                                                                    
00278e   6a11     CLRF      0x11,0x0                                                                                        
002790   6a12     CLRF      0x12,0x0                                                                                        
002792   6a13     CLRF      0x13,0x0                                                                                        
002794   0e03     MOVLW     0x3                                                                                             
002796   c010     MOVFF     0x10,0xfdb                                                                                      
002798   ffdb                                                                                                               
00279a   c069     MOVFF     0x69,0x10      	TempButtons.b_form.byte0 = ButtonState&0x0F;                                    C:\fw\midicontroller\x011a\hwcalls.c
00279c   f010                                                                                                               
00279e   c06a     MOVFF     0x6a,0x11                                                                                       
0027a0   f011                                                                                                               
0027a2   c06b     MOVFF     0x6b,0x12                                                                                       
0027a4   f012                                                                                                               
0027a6   c06c     MOVFF     0x6c,0x13                                                                                       
0027a8   f013                                                                                                               
0027aa   0e0f     MOVLW     0xf                                                                                             
0027ac   1610     ANDWF     0x10,0x1,0x0                                                                                    
0027ae   6a11     CLRF      0x11,0x0                                                                                        
0027b0   6a12     CLRF      0x12,0x0                                                                                        
0027b2   6a13     CLRF      0x13,0x0                                                                                        
0027b4   5010     MOVF      0x10,0x0,0x0                                                                                    
0027b6   6edf     MOVWF     0xdf,0x0                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
0027b8   cfdf     MOVFF     0xfdf,0x10     	return TempButtons.l_form;                                                      C:\fw\midicontroller\x011a\hwcalls.c
0027ba   f010                                                                                                               
0027bc   0e01     MOVLW     0x1                                                                                             
0027be   cfdb     MOVFF     0xfdb,0x11                                                                                      
0027c0   f011                                                                                                               
0027c2   c010     MOVFF     0x10,0xff3                                                                                      
0027c4   fff3                                                                                                               
0027c6   c011     MOVFF     0x11,0xff4                                                                                      
0027c8   fff4                                                                                                               
0027ca   0e04     MOVLW     0x4            }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
0027cc   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
0027ce   e203     BC        0x27d6                                                                                          
0027d0   d000     BRA       0x27d2                                                                                          
0027d2   6ae1     CLRF      0xe1,0x0                                                                                        
0027d4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0027d6   6ee1     MOVWF     0xe1,0x0                                                                                        
0027d8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0027da   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0027dc   ffd9                                                                                                               
0027de   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           void	UpdateLeds(void) {                                                          C:\fw\midicontroller\x011a\hwcalls.c
0027e0   c068     MOVFF     0x68,0xfe6     	SendDataToShiftReg(LedStates);                                                  C:\fw\midicontroller\x011a\hwcalls.c
0027e2   ffe6                                                                                                               
0027e4   de95     RCALL     0x2510                                                                                          
0027e6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0027e8   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
                                           /* Set currently active program foot-switch's LED indicator and disable all others */ C:\fw\midicontroller\x011a\hwcalls.c
0027ea   cfd9     MOVFF     0xfd9,0xfe6    void fsw_led_set_active(int idx){                                                C:\fw\midicontroller\x011a\hwcalls.c
0027ec   ffe6                                                                                                               
0027ee   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0027f0   ffd9                                                                                                               
0027f2   0100     MOVLB     0x0            	LedStates = 0;                                                                  C:\fw\midicontroller\x011a\hwcalls.c
0027f4   6b68     CLRF      0x68,0x1                                                                                        
0027f6   0e01     MOVLW     0x1            	setbit(LedStates,idx);                                                          C:\fw\midicontroller\x011a\hwcalls.c
0027f8   6ef3     MOVWF     0xf3,0x0                                                                                        
0027fa   0efd     MOVLW     0xfd                                                                                            
0027fc   50db     MOVF      0xdb,0x0,0x0                                                                                    
0027fe   e004     BZ        0x2808                                                                                          
002800   90d8     BCF       0xd8,0x0,0x0                                                                                    
002802   36f3     RLCF      0xf3,0x1,0x0                                                                                    
002804   06e8     DECF      0xe8,0x1,0x0                                                                                    
002806   e1fc     BNZ       0x2800                                                                                          
002808   50f3     MOVF      0xf3,0x0,0x0                                                                                    
00280a   0100     MOVLB     0x0                                                                                             
00280c   1368     IORWF     0x68,0x1,0x1                                                                                    
00280e   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
002810   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002812   ffd9                                                                                                               
002814   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /* Explicitly enable a single LED without affecting the others */                C:\fw\midicontroller\x011a\hwcalls.c
002816   cfd9     MOVFF     0xfd9,0xfe6    void fsw_led_enable(int idx){                                                    C:\fw\midicontroller\x011a\hwcalls.c
002818   ffe6                                                                                                               
00281a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00281c   ffd9                                                                                                               
00281e   0e01     MOVLW     0x1            	setbit(LedStates,idx);                                                          C:\fw\midicontroller\x011a\hwcalls.c
002820   6ef3     MOVWF     0xf3,0x0                                                                                        
002822   0efd     MOVLW     0xfd                                                                                            
002824   50db     MOVF      0xdb,0x0,0x0                                                                                    
002826   e004     BZ        0x2830                                                                                          
002828   90d8     BCF       0xd8,0x0,0x0                                                                                    
00282a   36f3     RLCF      0xf3,0x1,0x0                                                                                    
00282c   06e8     DECF      0xe8,0x1,0x0                                                                                    
00282e   e1fc     BNZ       0x2828                                                                                          
002830   50f3     MOVF      0xf3,0x0,0x0                                                                                    
002832   0100     MOVLB     0x0                                                                                             
002834   1368     IORWF     0x68,0x1,0x1                                                                                    
002836   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
002838   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00283a   ffd9                                                                                                               
00283c   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /* Explicitly disable a single LED without affecting the others */               C:\fw\midicontroller\x011a\hwcalls.c
00283e   cfd9     MOVFF     0xfd9,0xfe6    void fsw_led_disable(int idx){                                                   C:\fw\midicontroller\x011a\hwcalls.c
002840   ffe6                                                                                                               
002842   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002844   ffd9                                                                                                               
002846   0e01     MOVLW     0x1            	clrbit(LedStates,idx);                                                          C:\fw\midicontroller\x011a\hwcalls.c
002848   6ef3     MOVWF     0xf3,0x0                                                                                        
00284a   0efd     MOVLW     0xfd                                                                                            
00284c   50db     MOVF      0xdb,0x0,0x0                                                                                    
00284e   e004     BZ        0x2858                                                                                          
002850   90d8     BCF       0xd8,0x0,0x0                                                                                    
002852   36f3     RLCF      0xf3,0x1,0x0                                                                                    
002854   06e8     DECF      0xe8,0x1,0x0                                                                                    
002856   e1fc     BNZ       0x2850                                                                                          
002858   50f3     MOVF      0xf3,0x0,0x0                                                                                    
00285a   6e10     MOVWF     0x10,0x0                                                                                        
00285c   6a11     CLRF      0x11,0x0                                                                                        
00285e   be10     BTFSC     0x10,0x7,0x0                                                                                    
002860   6811     SETF      0x11,0x0                                                                                        
002862   0eff     MOVLW     0xff                                                                                            
002864   1810     XORWF     0x10,0x0,0x0                                                                                    
002866   0100     MOVLB     0x0                                                                                             
002868   1768     ANDWF     0x68,0x1,0x1                                                                                    
00286a   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
00286c   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
00286e   ffd9                                                                                                               
002870   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /* Poll the slider switch to see which mode we're in: */                         C:\fw\midicontroller\x011a\hwcalls.c
                                           u8 slider_poll(){                                                                C:\fw\midicontroller\x011a\hwcalls.c
002872   0100     MOVLB     0x0            	return	ModeSwitchState;                                                         C:\fw\midicontroller\x011a\hwcalls.c
002874   5161     MOVF      0x61,0x0,0x1                                                                                    
002876   0b01     ANDLW     0x1                                                                                             
002878   d000     BRA       0x287a                                                                                          
00287a   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /* Poll the expression pedal's data (0-127): */                                  C:\fw\midicontroller\x011a\hwcalls.c
                                           u8 expr_poll(){                                                                  C:\fw\midicontroller\x011a\hwcalls.c
                                           	                                                                                C:\fw\midicontroller\x011a\hwcalls.c
00287c   0e01     MOVLW     0x1            	ADC_CONVERSION(EXP_PEDAL_CHANNEL);                                              C:\fw\midicontroller\x011a\hwcalls.c
00287e   6ee6     MOVWF     0xe6,0x0                                                                                        
002880   de1e     RCALL     0x24be                                                                                          
002882   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002884   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /* --------------- Data persistence functions: */                                C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /* Gets number of stored banks */                                                C:\fw\midicontroller\x011a\hwcalls.c
                                           u16 banks_count(){                                                               C:\fw\midicontroller\x011a\hwcalls.c
002886   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /* Loads a bank into the specified arrays: */                                    C:\fw\midicontroller\x011a\hwcalls.c
002888   cfd9     MOVFF     0xfd9,0xfe6    void bank_load(u16 bank_index, char name[BANK_NAME_MAXLENGTH], u8 bank[BANK_PRESET_COUNT], u8 bankcontroller[BANK_PRESET_COUNT], u8 bankmap[BANK_MAP_COUNT], u8 *bankmap_count){ C:\fw\midicontroller\x011a\hwcalls.c
00288a   ffe6                                                                                                               
00288c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00288e   ffd9                                                                                                               
002890   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
002892   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002894   ffd9                                                                                                               
002896   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /* Stores the programs back to the bank: */                                      C:\fw\midicontroller\x011a\hwcalls.c
002898   cfd9     MOVFF     0xfd9,0xfe6    void bank_store(u16 bank_index, u8 bank[BANK_PRESET_COUNT], u8 bankcontroller[BANK_PRESET_COUNT], u8 bankmap[BANK_MAP_COUNT], u8 bankmap_count){ C:\fw\midicontroller\x011a\hwcalls.c
00289a   ffe6                                                                                                               
00289c   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
00289e   ffd9                                                                                                               
0028a0   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
0028a2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0028a4   ffd9                                                                                                               
0028a6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /* Load bank name for browsing through banks: */                                 C:\fw\midicontroller\x011a\hwcalls.c
0028a8   cfd9     MOVFF     0xfd9,0xfe6    void bank_loadname(u16 bank_index, char name[BANK_NAME_MAXLENGTH]){              C:\fw\midicontroller\x011a\hwcalls.c
0028aa   ffe6                                                                                                               
0028ac   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0028ae   ffd9                                                                                                               
0028b0   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
0028b2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0028b4   ffd9                                                                                                               
0028b6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /* Get the alphabetically sorted bank index */                                   C:\fw\midicontroller\x011a\hwcalls.c
0028b8   cfd9     MOVFF     0xfd9,0xfe6    u16 bank_getsortedindex(u16 sort_index){                                         C:\fw\midicontroller\x011a\hwcalls.c
0028ba   ffe6                                                                                                               
0028bc   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0028be   ffd9                                                                                                               
0028c0   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
0028c2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0028c4   ffd9                                                                                                               
0028c6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /* --------------- MIDI I/O functions: */                                        C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /* Send formatted MIDI commands.                                                 C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                               0 <= cmd <= F       - MIDI command                                           C:\fw\midicontroller\x011a\hwcalls.c
                                               0 <= channel <= F   - MIDI channel to send command to                        C:\fw\midicontroller\x011a\hwcalls.c
                                               00 <= data1 <= FF   - first data byte of MIDI command                        C:\fw\midicontroller\x011a\hwcalls.c
                                               00 <= data2 <= FF   - second (optional) data byte of MIDI command            C:\fw\midicontroller\x011a\hwcalls.c
                                           */                                                                               C:\fw\midicontroller\x011a\hwcalls.c
0028c8   cfd9     MOVFF     0xfd9,0xfe6    void midi_send_cmd1(u8 cmd, u8 channel, u8 data1){                               C:\fw\midicontroller\x011a\hwcalls.c
0028ca   ffe6                                                                                                               
0028cc   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0028ce   ffd9                                                                                                               
0028d0   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
0028d2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0028d4   ffd9                                                                                                               
0028d6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
0028d8   cfd9     MOVFF     0xfd9,0xfe6    void midi_send_cmd2(u8 cmd, u8 channel, u8 data1, u8 data2){                     C:\fw\midicontroller\x011a\hwcalls.c
0028da   ffe6                                                                                                               
0028dc   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0028de   ffd9                                                                                                               
0028e0   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\hwcalls.c
0028e2   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0028e4   ffd9                                                                                                               
0028e6   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                                                                                                            C:\fw\midicontroller\x011a\hwcalls.c
                                           /*                                                                               C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	A programmable MIDI foot controller.                                            C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	Written by James S. Dunne                                                       C:\fw\midicontroller\x011a\controller.c
                                           	04/05/2007                                                                      C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	Possible hardware layout diagram:                                               C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	(o)     = SPST rugged foot-switch                                               C:\fw\midicontroller\x011a\controller.c
                                           	(*)     = Single on/off LED                                                     C:\fw\midicontroller\x011a\controller.c
                                           	[ ... ] = LED 7-segment (or more) display                                       C:\fw\midicontroller\x011a\controller.c
                                           	{\}		= slider switch                                                            C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                            PWR  MIDI OUT EXPR IN (opt)                                                     C:\fw\midicontroller\x011a\controller.c
                                             |      ||      ||                                                              C:\fw\midicontroller\x011a\controller.c
                                           /--------------------\                                                           C:\fw\midicontroller\x011a\controller.c
                                           |                    |                                                           C:\fw\midicontroller\x011a\controller.c
                                           | [8 8 8 8] {\}  [8] |                                                           C:\fw\midicontroller\x011a\controller.c
                                           |                    |                                                           C:\fw\midicontroller\x011a\controller.c
                                           | (*)  (*)  (*)  (*) |                                                           C:\fw\midicontroller\x011a\controller.c
                                           | (o)  (o)  (o)  (o) |                                                           C:\fw\midicontroller\x011a\controller.c
                                           |  1    2    3    4  |                                                           C:\fw\midicontroller\x011a\controller.c
                                           |                    |                                                           C:\fw\midicontroller\x011a\controller.c
                                           | (o)  (o)  (o)  (o) |                                                           C:\fw\midicontroller\x011a\controller.c
                                           | DEC  INC  ENTR NEXT|                                                           C:\fw\midicontroller\x011a\controller.c
                                           |                    |                                                           C:\fw\midicontroller\x011a\controller.c
                                           \--------------------/                                                           C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           NOTE:   CONCERT mode: Implement hold-down of preset button to                    C:\fw\midicontroller\x011a\controller.c
                                           quick-switch to said preset, but on release switch back to last                  C:\fw\midicontroller\x011a\controller.c
                                           preset.                                                                          C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           */                                                                               C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           #include "types.h"                                                               C:\fw\midicontroller\x011a\controller.c
                                           #include "hardware.h"                                                            C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           const u8 midi_channel = 0;                                                       C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           u8      bank[BANK_PRESET_COUNT];                                                 C:\fw\midicontroller\x011a\controller.c
                                           u8		bankcontroller[BANK_PRESET_COUNT];                                           C:\fw\midicontroller\x011a\controller.c
                                           u8		bankmap[BANK_MAP_COUNT];                                                     C:\fw\midicontroller\x011a\controller.c
                                           u8		bankmap_count;                                                               C:\fw\midicontroller\x011a\controller.c
                                           char	bankname[BANK_NAME_MAXLENGTH];                                              C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* current settings */                                                           C:\fw\midicontroller\x011a\controller.c
                                           u8      curr_program;                                                            C:\fw\midicontroller\x011a\controller.c
                                           u8      curr_preset;                                                             C:\fw\midicontroller\x011a\controller.c
                                           u8      curr_mapindex;                                                           C:\fw\midicontroller\x011a\controller.c
                                           u16     curr_bank, loaded_bank;                                                  C:\fw\midicontroller\x011a\controller.c
                                           u16		curr_sortedbank;                                                            C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           u16		bank_count;                                                                 C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           u32		preset_held = 0;                                                            C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* decrement timer in ms: */                                                     C:\fw\midicontroller\x011a\controller.c
                                           u16		accel_time;                                                                 C:\fw\midicontroller\x011a\controller.c
                                           u8		accel_count;                                                                 C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           u16		cdtimer_value = 0;                                                          C:\fw\midicontroller\x011a\controller.c
                                           u16		cdtimer_flash = 0;                                                          C:\fw\midicontroller\x011a\controller.c
                                           u16		cdtimer_store = 0;                                                          C:\fw\midicontroller\x011a\controller.c
                                           u16		cdtimer_incdec_held = 0;                                                    C:\fw\midicontroller\x011a\controller.c
                                           u16		cdtimer_holdenter = 0;                                                      C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           enum acceleration_state {                                                        C:\fw\midicontroller\x011a\controller.c
                                           	ACCEL_NONE,                                                                     C:\fw\midicontroller\x011a\controller.c
                                           	ACCEL_INC_SLOW,                                                                 C:\fw\midicontroller\x011a\controller.c
                                           	ACCEL_INC_MEDIUM,                                                               C:\fw\midicontroller\x011a\controller.c
                                           	ACCEL_INC_FAST,                                                                 C:\fw\midicontroller\x011a\controller.c
                                           	ACCEL_DEC_SLOW,                                                                 C:\fw\midicontroller\x011a\controller.c
                                           	ACCEL_DEC_MEDIUM,                                                               C:\fw\midicontroller\x011a\controller.c
                                           	ACCEL_DEC_FAST                                                                  C:\fw\midicontroller\x011a\controller.c
                                           } accel_state = ACCEL_NONE;                                                      C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           enum flashing_led_state {                                                        C:\fw\midicontroller\x011a\controller.c
                                           	FLASH_NONE,                                                                     C:\fw\midicontroller\x011a\controller.c
                                           	FLASH_STORE,                                                                    C:\fw\midicontroller\x011a\controller.c
                                           	FLASH_BANK_SELECT_MODE,                                                         C:\fw\midicontroller\x011a\controller.c
                                           	FLASH_PRGM_SELECT_MODE                                                          C:\fw\midicontroller\x011a\controller.c
                                           } flash_state = FLASH_NONE;                                                      C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           enum program_modes {                                                             C:\fw\midicontroller\x011a\controller.c
                                           	PROGRAM_NONE,                                                                   C:\fw\midicontroller\x011a\controller.c
                                           	PROGRAM_SEQUENCE,                                                               C:\fw\midicontroller\x011a\controller.c
                                           	PROGRAM_COMPLETE                                                                C:\fw\midicontroller\x011a\controller.c
                                           } program_mode = PROGRAM_NONE;                                                   C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           u8		flash_led = 0;                                                               C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* time period in ms before value is changed */                                  C:\fw\midicontroller\x011a\controller.c
                                           const u16 accel_time_slow	= 15;                                                  C:\fw\midicontroller\x011a\controller.c
                                           const u16 accel_time_medium	=  5;                                                C:\fw\midicontroller\x011a\controller.c
                                           const u16 accel_time_fast	=  2;                                                  C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           const u16 value_flashtime	= 75;                                                  C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* concert/practice main mode switch */                                          C:\fw\midicontroller\x011a\controller.c
                                           enum mainmode {                                                                  C:\fw\midicontroller\x011a\controller.c
                                           	MODE_PRACTICE = 0,                                                              C:\fw\midicontroller\x011a\controller.c
                                           	MODE_CONCERT = 1                                                                C:\fw\midicontroller\x011a\controller.c
                                           } mode;                                                                          C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* convert integer to ASCII in fixed number of chars, right-aligned */           C:\fw\midicontroller\x011a\controller.c
000b24   cfd9     MOVFF     0xfd9,0xfe6    void itoa_fixed(u8 n, char s[LEDS_MAX_ALPHAS]) {                                 C:\fw\midicontroller\x011a\controller.c
000b26   ffe6                                                                                                               
000b28   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000b2a   ffd9                                                                                                               
000b2c   52e6     MOVF      0xe6,0x1,0x0                                                                                    
000b2e   0e03     MOVLW     0x3            	u8 i = LEDS_MAX_ALPHAS - 1;                                                     C:\fw\midicontroller\x011a\controller.c
000b30   6edf     MOVWF     0xdf,0x0                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	do {                                                                            C:\fw\midicontroller\x011a\controller.c
000b32   0e0a     MOVLW     0xa            		s[i--] = (n%10) + '0';                                                         C:\fw\midicontroller\x011a\controller.c
000b34   6e10     MOVWF     0x10,0x0                                                                                        
000b36   c010     MOVFF     0x10,0xc                                                                                        
000b38   f00c                                                                                                               
000b3a   0efe     MOVLW     0xfe                                                                                            
000b3c   cfdb     MOVFF     0xfdb,0x7                                                                                       
000b3e   f007                                                                                                               
000b40   ec27     CALL      0x364e,0x0                                                                                      
000b42   f01b                                                                                                               
000b44   5003     MOVF      0x3,0x0,0x0                                                                                     
000b46   0f30     ADDLW     0x30                                                                                            
000b48   6ee6     MOVWF     0xe6,0x0                                                                                        
000b4a   50df     MOVF      0xdf,0x0,0x0                                                                                    
000b4c   06df     DECF      0xdf,0x1,0x0                                                                                    
000b4e   6ee7     MOVWF     0xe7,0x0                                                                                        
000b50   0efc     MOVLW     0xfc                                                                                            
000b52   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
000b54   ffe9                                                                                                               
000b56   0efd     MOVLW     0xfd                                                                                            
000b58   cfdb     MOVFF     0xfdb,0xfea                                                                                     
000b5a   ffea                                                                                                               
000b5c   50e7     MOVF      0xe7,0x0,0x0                                                                                    
000b5e   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
000b60   0e00     MOVLW     0x0                                                                                             
000b62   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000b64   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000b66   50e7     MOVF      0xe7,0x0,0x0                                                                                    
000b68   6eef     MOVWF     0xef,0x0                                                                                        
000b6a   0e0a     MOVLW     0xa            	} while ((n /= 10) > 0);                                                        C:\fw\midicontroller\x011a\controller.c
000b6c   6e10     MOVWF     0x10,0x0                                                                                        
000b6e   c010     MOVFF     0x10,0xc                                                                                        
000b70   f00c                                                                                                               
000b72   0efe     MOVLW     0xfe                                                                                            
000b74   cfdb     MOVFF     0xfdb,0x7                                                                                       
000b76   f007                                                                                                               
000b78   ec27     CALL      0x364e,0x0                                                                                      
000b7a   f01b                                                                                                               
000b7c   0efe     MOVLW     0xfe                                                                                            
000b7e   c007     MOVFF     0x7,0xfdb                                                                                       
000b80   ffdb                                                                                                               
000b82   5007     MOVF      0x7,0x0,0x0                                                                                     
000b84   0800     SUBLW     0x0                                                                                             
000b86   e3d5     BNC       0xb32                                                                                           
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	/* pad the left chars with spaces: */                                           C:\fw\midicontroller\x011a\controller.c
000b88   50df     MOVF      0xdf,0x0,0x0   	for (;i > 0;--i) s[i] = ' ';                                                    C:\fw\midicontroller\x011a\controller.c
000b8a   0800     SUBLW     0x0                                                                                             
000b8c   e210     BC        0xbae                                                                                           
000b8e   50df     MOVF      0xdf,0x0,0x0                                                                                    
000b90   6ee7     MOVWF     0xe7,0x0                                                                                        
000b92   0efc     MOVLW     0xfc                                                                                            
000b94   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
000b96   ffe9                                                                                                               
000b98   0efd     MOVLW     0xfd                                                                                            
000b9a   cfdb     MOVFF     0xfdb,0xfea                                                                                     
000b9c   ffea                                                                                                               
000b9e   50e7     MOVF      0xe7,0x0,0x0                                                                                    
000ba0   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
000ba2   0e00     MOVLW     0x0                                                                                             
000ba4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000ba6   0e20     MOVLW     0x20                                                                                            
000ba8   6eef     MOVWF     0xef,0x0                                                                                        
000baa   06df     DECF      0xdf,0x1,0x0                                                                                    
000bac   d7ed     BRA       0xb88                                                                                           
000bae   50df     MOVF      0xdf,0x0,0x0   	s[i] = ' ';                                                                     C:\fw\midicontroller\x011a\controller.c
000bb0   6ee7     MOVWF     0xe7,0x0                                                                                        
000bb2   0efc     MOVLW     0xfc                                                                                            
000bb4   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
000bb6   ffe9                                                                                                               
000bb8   0efd     MOVLW     0xfd                                                                                            
000bba   cfdb     MOVFF     0xfdb,0xfea                                                                                     
000bbc   ffea                                                                                                               
000bbe   50e7     MOVF      0xe7,0x0,0x0                                                                                    
000bc0   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
000bc2   0e00     MOVLW     0x0                                                                                             
000bc4   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000bc6   0e20     MOVLW     0x20                                                                                            
000bc8   6eef     MOVWF     0xef,0x0                                                                                        
000bca   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\controller.c
000bcc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bce   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000bd0   ffd9                                                                                                               
000bd2   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* display a program value in decimal with a leading 'P': */                     C:\fw\midicontroller\x011a\controller.c
000bd4   cfd9     MOVFF     0xfd9,0xfe6    void show_program() {                                                            C:\fw\midicontroller\x011a\controller.c
000bd6   ffe6                                                                                                               
000bd8   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000bda   ffd9                                                                                                               
000bdc   0e04     MOVLW     0x4                                                                                             
000bde   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	char	a[LEDS_MAX_ALPHAS];                                                        C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	/* convert curr_program to ASCII: */                                            C:\fw\midicontroller\x011a\controller.c
000be0   cfd9     MOVFF     0xfd9,0xfe6    	itoa_fixed(curr_program + 1, a);                                                C:\fw\midicontroller\x011a\controller.c
000be2   ffe6                                                                                                               
000be4   cfda     MOVFF     0xfda,0xfe6                                                                                     
000be6   ffe6                                                                                                               
000be8   0101     MOVLB     0x1                                                                                             
000bea   2956     INCF      0x56,0x0,0x1                                                                                    
000bec   6ee6     MOVWF     0xe6,0x0                                                                                        
000bee   df9a     RCALL     0xb24                                                                                           
000bf0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bf2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000bf4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	/* leading 'P' char: */                                                         C:\fw\midicontroller\x011a\controller.c
000bf6   0e50     MOVLW     0x50           	a[0] = 'P';                                                                     C:\fw\midicontroller\x011a\controller.c
000bf8   6edf     MOVWF     0xdf,0x0                                                                                        
000bfa   cfd9     MOVFF     0xfd9,0xfe6    	leds_show_4alphas(a);                                                           C:\fw\midicontroller\x011a\controller.c
000bfc   ffe6                                                                                                               
000bfe   cfda     MOVFF     0xfda,0xfe6                                                                                     
000c00   ffe6                                                                                                               
000c02   ec45     CALL      0x2a8a,0x0                                                                                      
000c04   f015                                                                                                               
000c06   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c08   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	/* start timer to revert the display: */                                        C:\fw\midicontroller\x011a\controller.c
000c0a   c17c     MOVFF     0x17c,0x168    	cdtimer_value = value_flashtime;                                                C:\fw\midicontroller\x011a\controller.c
000c0c   f168                                                                                                               
000c0e   c17d     MOVFF     0x17d,0x169                                                                                     
000c10   f169                                                                                                               
000c12   0e04     MOVLW     0x4            }                                                                                C:\fw\midicontroller\x011a\controller.c
000c14   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
000c16   e202     BC        0xc1c                                                                                           
000c18   6ae1     CLRF      0xe1,0x0                                                                                        
000c1a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c1c   6ee1     MOVWF     0xe1,0x0                                                                                        
000c1e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c20   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000c22   ffd9                                                                                                               
000c24   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* send the MIDI program change message */                                       C:\fw\midicontroller\x011a\controller.c
000c26   cfd9     MOVFF     0xfd9,0xfe6    void program_activate(u8 notify) {                                               C:\fw\midicontroller\x011a\controller.c
000c28   ffe6                                                                                                               
000c2a   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000c2c   ffd9                                                                                                               
000c2e   c156     MOVFF     0x156,0xfe6    	midi_send_cmd1(0xC, midi_channel, curr_program);                                C:\fw\midicontroller\x011a\controller.c
000c30   ffe6                                                                                                               
000c32   c165     MOVFF     0x165,0xfe6                                                                                     
000c34   ffe6                                                                                                               
000c36   0e0c     MOVLW     0xc                                                                                             
000c38   6ee6     MOVWF     0xe6,0x0                                                                                        
000c3a   ec64     CALL      0x28c8,0x0                                                                                      
000c3c   f014                                                                                                               
000c3e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c40   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c42   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c44   0efe     MOVLW     0xfe           	if (notify) {                                                                   C:\fw\midicontroller\x011a\controller.c
000c46   50db     MOVF      0xdb,0x0,0x0                                                                                    
000c48   e001     BZ        0xc4c                                                                                           
                                           		/* show the program value: */                                                  C:\fw\midicontroller\x011a\controller.c
000c4a   dfc4     RCALL     0xbd4          		show_program();                                                                C:\fw\midicontroller\x011a\controller.c
                                           	}                                                                               C:\fw\midicontroller\x011a\controller.c
000c4c   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\controller.c
000c4e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000c50   ffd9                                                                                                               
000c52   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* activate current preset */                                                    C:\fw\midicontroller\x011a\controller.c
000c54   cfd9     MOVFF     0xfd9,0xfe6    void preset_activate(u8 notify) {                                                C:\fw\midicontroller\x011a\controller.c
000c56   ffe6                                                                                                               
000c58   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000c5a   ffd9                                                                                                               
                                           	/* grab the program # from the bank */                                          C:\fw\midicontroller\x011a\controller.c
000c5c   0101     MOVLB     0x1            	curr_program = bank[curr_preset];                                               C:\fw\midicontroller\x011a\controller.c
000c5e   5157     MOVF      0x57,0x0,0x1                                                                                    
000c60   6aea     CLRF      0xea,0x0                                                                                        
000c62   0f41     ADDLW     0x41                                                                                            
000c64   6ee9     MOVWF     0xe9,0x0                                                                                        
000c66   0e01     MOVLW     0x1                                                                                             
000c68   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000c6a   cfef     MOVFF     0xfef,0x156                                                                                     
000c6c   f156                                                                                                               
000c6e   0efe     MOVLW     0xfe           	program_activate(notify);                                                       C:\fw\midicontroller\x011a\controller.c
000c70   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
000c72   ffe6                                                                                                               
000c74   dfd8     RCALL     0xc26                                                                                           
000c76   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	/* activate the footswitch LED: */                                              C:\fw\midicontroller\x011a\controller.c
000c78   0101     MOVLB     0x1            	fsw_led_set_active(curr_preset);                                                C:\fw\midicontroller\x011a\controller.c
000c7a   5157     MOVF      0x57,0x0,0x1                                                                                    
000c7c   6ee6     MOVWF     0xe6,0x0                                                                                        
000c7e   6ae6     CLRF      0xe6,0x0                                                                                        
000c80   ecf5     CALL      0x27ea,0x0                                                                                      
000c82   f013                                                                                                               
000c84   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c86   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c88   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\controller.c
000c8a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000c8c   ffd9                                                                                                               
000c8e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* display the sequence index on the 1-digit LED display: */                     C:\fw\midicontroller\x011a\controller.c
                                           void bankmap_show() {                                                            C:\fw\midicontroller\x011a\controller.c
000c90   0101     MOVLB     0x1            	leds_show_1digit(curr_mapindex + 1);                                            C:\fw\midicontroller\x011a\controller.c
000c92   2958     INCF      0x58,0x0,0x1                                                                                    
000c94   6ee6     MOVWF     0xe6,0x0                                                                                        
000c96   ec80     CALL      0x2b00,0x0                                                                                      
000c98   f015                                                                                                               
000c9a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000c9c   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* activate the preset for the current bank map index */                         C:\fw\midicontroller\x011a\controller.c
000c9e   cfd9     MOVFF     0xfd9,0xfe6    void bankmap_activate(u8 notify) {                                               C:\fw\midicontroller\x011a\controller.c
000ca0   ffe6                                                                                                               
000ca2   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000ca4   ffd9                                                                                                               
                                           	/* switch preset */                                                             C:\fw\midicontroller\x011a\controller.c
000ca6   c159     MOVFF     0x159,0x15b    	loaded_bank = curr_bank;                                                        C:\fw\midicontroller\x011a\controller.c
000ca8   f15b                                                                                                               
000caa   c15a     MOVFF     0x15a,0x15c                                                                                     
000cac   f15c                                                                                                               
000cae   0101     MOVLB     0x1            	curr_preset = bankmap[curr_mapindex];                                           C:\fw\midicontroller\x011a\controller.c
000cb0   5158     MOVF      0x58,0x0,0x1                                                                                    
000cb2   6aea     CLRF      0xea,0x0                                                                                        
000cb4   0f49     ADDLW     0x49                                                                                            
000cb6   6ee9     MOVWF     0xe9,0x0                                                                                        
000cb8   0e01     MOVLW     0x1                                                                                             
000cba   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
000cbc   cfef     MOVFF     0xfef,0x157                                                                                     
000cbe   f157                                                                                                               
000cc0   0efe     MOVLW     0xfe           	preset_activate(notify);                                                        C:\fw\midicontroller\x011a\controller.c
000cc2   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
000cc4   ffe6                                                                                                               
000cc6   dfc6     RCALL     0xc54                                                                                           
000cc8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	/* always show the bank map index */                                            C:\fw\midicontroller\x011a\controller.c
000cca   dfe2     RCALL     0xc90          	bankmap_show();                                                                 C:\fw\midicontroller\x011a\controller.c
000ccc   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\controller.c
000cce   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000cd0   ffd9                                                                                                               
000cd2   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* load current bank but do not switch to a preset */                            C:\fw\midicontroller\x011a\controller.c
000cd4   cfd9     MOVFF     0xfd9,0xfe6    void bank_activate(u8 notify) {                                                  C:\fw\midicontroller\x011a\controller.c
000cd6   ffe6                                                                                                               
000cd8   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000cda   ffd9                                                                                                               
                                           	/* load up the selected bank: */                                                C:\fw\midicontroller\x011a\controller.c
000cdc   0e51     MOVLW     0x51           	bank_load(curr_bank, bankname, bank, bankcontroller, bankmap, &bankmap_count);  C:\fw\midicontroller\x011a\controller.c
000cde   6ee6     MOVWF     0xe6,0x0                                                                                        
000ce0   0e01     MOVLW     0x1                                                                                             
000ce2   6ee6     MOVWF     0xe6,0x0                                                                                        
000ce4   0e49     MOVLW     0x49                                                                                            
000ce6   6ee6     MOVWF     0xe6,0x0                                                                                        
000ce8   0e01     MOVLW     0x1                                                                                             
000cea   6ee6     MOVWF     0xe6,0x0                                                                                        
000cec   0e45     MOVLW     0x45                                                                                            
000cee   6ee6     MOVWF     0xe6,0x0                                                                                        
000cf0   0e01     MOVLW     0x1                                                                                             
000cf2   6ee6     MOVWF     0xe6,0x0                                                                                        
000cf4   0e41     MOVLW     0x41                                                                                            
000cf6   6ee6     MOVWF     0xe6,0x0                                                                                        
000cf8   0e01     MOVLW     0x1                                                                                             
000cfa   6ee6     MOVWF     0xe6,0x0                                                                                        
000cfc   0e52     MOVLW     0x52                                                                                            
000cfe   6ee6     MOVWF     0xe6,0x0                                                                                        
000d00   0e01     MOVLW     0x1                                                                                             
000d02   6ee6     MOVWF     0xe6,0x0                                                                                        
000d04   c159     MOVFF     0x159,0xfe6                                                                                     
000d06   ffe6                                                                                                               
000d08   c15a     MOVFF     0x15a,0xfe6                                                                                     
000d0a   ffe6                                                                                                               
000d0c   ec44     CALL      0x2888,0x0                                                                                      
000d0e   f014                                                                                                               
000d10   6e10     MOVWF     0x10,0x0                                                                                        
000d12   0e0c     MOVLW     0xc                                                                                             
000d14   5ee1     SUBWF     0xe1,0x1,0x0                                                                                    
000d16   5010     MOVF      0x10,0x0,0x0                                                                                    
000d18   0101     MOVLB     0x1            	curr_mapindex = 0;                                                              C:\fw\midicontroller\x011a\controller.c
000d1a   6b58     CLRF      0x58,0x1                                                                                        
                                           	/* always show the bank map index */                                            C:\fw\midicontroller\x011a\controller.c
000d1c   2958     INCF      0x58,0x0,0x1   	leds_show_1digit(curr_mapindex + 1);                                            C:\fw\midicontroller\x011a\controller.c
000d1e   6ee6     MOVWF     0xe6,0x0                                                                                        
000d20   ec80     CALL      0x2b00,0x0                                                                                      
000d22   f015                                                                                                               
000d24   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d26   0efe     MOVLW     0xfe           	if (notify) {                                                                   C:\fw\midicontroller\x011a\controller.c
000d28   50db     MOVF      0xdb,0x0,0x0                                                                                    
000d2a   e008     BZ        0xd3c                                                                                           
                                           		/* display bank name: */                                                       C:\fw\midicontroller\x011a\controller.c
000d2c   0e52     MOVLW     0x52           		leds_show_4alphas(bankname);                                                   C:\fw\midicontroller\x011a\controller.c
000d2e   6ee6     MOVWF     0xe6,0x0                                                                                        
000d30   0e01     MOVLW     0x1                                                                                             
000d32   6ee6     MOVWF     0xe6,0x0                                                                                        
000d34   ec45     CALL      0x2a8a,0x0                                                                                      
000d36   f015                                                                                                               
000d38   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d3a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	}                                                                               C:\fw\midicontroller\x011a\controller.c
000d3c   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\controller.c
000d3e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000d40   ffd9                                                                                                               
000d42   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* load the real bank # from the sorted index */                                 C:\fw\midicontroller\x011a\controller.c
000d44   cfd9     MOVFF     0xfd9,0xfe6    void sortedbank_activate(u8 notify) {                                            C:\fw\midicontroller\x011a\controller.c
000d46   ffe6                                                                                                               
000d48   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000d4a   ffd9                                                                                                               
000d4c   c15d     MOVFF     0x15d,0xfe6    	curr_bank = bank_getsortedindex(curr_sortedbank);                               C:\fw\midicontroller\x011a\controller.c
000d4e   ffe6                                                                                                               
000d50   c15e     MOVFF     0x15e,0xfe6                                                                                     
000d52   ffe6                                                                                                               
000d54   ec5c     CALL      0x28b8,0x0                                                                                      
000d56   f014                                                                                                               
000d58   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d5a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d5c   cff3     MOVFF     0xff3,0x159                                                                                     
000d5e   f159                                                                                                               
000d60   cff4     MOVFF     0xff4,0x15a                                                                                     
000d62   f15a                                                                                                               
000d64   0efe     MOVLW     0xfe           	bank_activate(notify);                                                          C:\fw\midicontroller\x011a\controller.c
000d66   cfdb     MOVFF     0xfdb,0xfe6                                                                                     
000d68   ffe6                                                                                                               
000d6a   dfb4     RCALL     0xcd4                                                                                           
000d6c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d6e   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\controller.c
000d70   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000d72   ffd9                                                                                                               
000d74   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* load only current bank name and display it on 4-digit display */              C:\fw\midicontroller\x011a\controller.c
                                           void bank_showname() {                                                           C:\fw\midicontroller\x011a\controller.c
000d76   0e52     MOVLW     0x52           	bank_loadname(curr_bank, bankname);                                             C:\fw\midicontroller\x011a\controller.c
000d78   6ee6     MOVWF     0xe6,0x0                                                                                        
000d7a   0e01     MOVLW     0x1                                                                                             
000d7c   6ee6     MOVWF     0xe6,0x0                                                                                        
000d7e   c159     MOVFF     0x159,0xfe6                                                                                     
000d80   ffe6                                                                                                               
000d82   c15a     MOVFF     0x15a,0xfe6                                                                                     
000d84   ffe6                                                                                                               
000d86   ec54     CALL      0x28a8,0x0                                                                                      
000d88   f014                                                                                                               
000d8a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d8c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d8e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d90   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000d92   0e52     MOVLW     0x52           	leds_show_4alphas(bankname);                                                    C:\fw\midicontroller\x011a\controller.c
000d94   6ee6     MOVWF     0xe6,0x0                                                                                        
000d96   0e01     MOVLW     0x1                                                                                             
000d98   6ee6     MOVWF     0xe6,0x0                                                                                        
000d9a   ec45     CALL      0x2a8a,0x0                                                                                      
000d9c   f015                                                                                                               
000d9e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000da0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000da2   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* load only current bank name from the sorted index and display it on 4-digit display */ C:\fw\midicontroller\x011a\controller.c
                                           void sortedbank_showname() {                                                     C:\fw\midicontroller\x011a\controller.c
000da4   0101     MOVLB     0x1            	if (program_mode != PROGRAM_NONE) {                                             C:\fw\midicontroller\x011a\controller.c
000da6   5174     MOVF      0x74,0x0,0x1                                                                                    
000da8   e009     BZ        0xdbc                                                                                           
000daa   0e7e     MOVLW     0x7e           		leds_show_4alphas("SEQ-");                                                     C:\fw\midicontroller\x011a\controller.c
000dac   6ee6     MOVWF     0xe6,0x0                                                                                        
000dae   0e36     MOVLW     0x36                                                                                            
000db0   6ee6     MOVWF     0xe6,0x0                                                                                        
000db2   ec45     CALL      0x2a8a,0x0                                                                                      
000db4   f015                                                                                                               
000db6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000db8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000dba   d022     BRA       0xe00          	} else {                                                                        C:\fw\midicontroller\x011a\controller.c
000dbc   c15d     MOVFF     0x15d,0xfe6    		curr_bank = bank_getsortedindex(curr_sortedbank);                              C:\fw\midicontroller\x011a\controller.c
000dbe   ffe6                                                                                                               
000dc0   c15e     MOVFF     0x15e,0xfe6                                                                                     
000dc2   ffe6                                                                                                               
000dc4   ec5c     CALL      0x28b8,0x0                                                                                      
000dc6   f014                                                                                                               
000dc8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000dca   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000dcc   cff3     MOVFF     0xff3,0x159                                                                                     
000dce   f159                                                                                                               
000dd0   cff4     MOVFF     0xff4,0x15a                                                                                     
000dd2   f15a                                                                                                               
000dd4   0e52     MOVLW     0x52           		bank_loadname(curr_bank, bankname);                                            C:\fw\midicontroller\x011a\controller.c
000dd6   6ee6     MOVWF     0xe6,0x0                                                                                        
000dd8   0e01     MOVLW     0x1                                                                                             
000dda   6ee6     MOVWF     0xe6,0x0                                                                                        
000ddc   c159     MOVFF     0x159,0xfe6                                                                                     
000dde   ffe6                                                                                                               
000de0   c15a     MOVFF     0x15a,0xfe6                                                                                     
000de2   ffe6                                                                                                               
000de4   ec54     CALL      0x28a8,0x0                                                                                      
000de6   f014                                                                                                               
000de8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000dea   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000dec   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000dee   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000df0   0e52     MOVLW     0x52           		leds_show_4alphas(bankname);                                                   C:\fw\midicontroller\x011a\controller.c
000df2   6ee6     MOVWF     0xe6,0x0                                                                                        
000df4   0e01     MOVLW     0x1                                                                                             
000df6   6ee6     MOVWF     0xe6,0x0                                                                                        
000df8   ec45     CALL      0x2a8a,0x0                                                                                      
000dfa   f015                                                                                                               
000dfc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000dfe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	}                                                                               C:\fw\midicontroller\x011a\controller.c
000e00   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* current and previous foot-switch states: */                                   C:\fw\midicontroller\x011a\controller.c
                                           u32		sw_curr = 0, sw_last = 0;                                                   C:\fw\midicontroller\x011a\controller.c
                                           u8		cc_curr = 0, cc_last = 0;                                                    C:\fw\midicontroller\x011a\controller.c
                                           u8		switch_state = 0, store_state = 0;                                           C:\fw\midicontroller\x011a\controller.c
                                           u8		incdec_mode = 0;                                                             C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* determine if a footswitch was pressed: */                                     C:\fw\midicontroller\x011a\controller.c
000e02   cfd9     MOVFF     0xfd9,0xfe6    u8 button_pressed(u32 mask) {                                                    C:\fw\midicontroller\x011a\controller.c
000e04   ffe6                                                                                                               
000e06   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000e08   ffd9                                                                                                               
000e0a   0efd     MOVLW     0xfd           	return ((sw_curr & mask) == mask) && ((sw_last & mask) == 0);                   C:\fw\midicontroller\x011a\controller.c
000e0c   50db     MOVF      0xdb,0x0,0x0                                                                                    
000e0e   0101     MOVLB     0x1                                                                                             
000e10   157e     ANDWF     0x7e,0x0,0x1                                                                                    
000e12   0100     MOVLB     0x0                                                                                             
000e14   6e10     MOVWF     0x10,0x0                                                                                        
000e16   0efe     MOVLW     0xfe                                                                                            
000e18   50db     MOVF      0xdb,0x0,0x0                                                                                    
000e1a   0101     MOVLB     0x1                                                                                             
000e1c   157f     ANDWF     0x7f,0x0,0x1                                                                                    
000e1e   0100     MOVLB     0x0                                                                                             
000e20   6e11     MOVWF     0x11,0x0                                                                                        
000e22   0efd     MOVLW     0xfd                                                                                            
000e24   50db     MOVF      0xdb,0x0,0x0                                                                                    
000e26   1810     XORWF     0x10,0x0,0x0                                                                                    
000e28   e103     BNZ       0xe30                                                                                           
000e2a   0efe     MOVLW     0xfe                                                                                            
000e2c   50db     MOVF      0xdb,0x0,0x0                                                                                    
000e2e   1811     XORWF     0x11,0x0,0x0                                                                                    
000e30   e10f     BNZ       0xe50                                                                                           
000e32   0efd     MOVLW     0xfd                                                                                            
000e34   50db     MOVF      0xdb,0x0,0x0                                                                                    
000e36   0101     MOVLB     0x1                                                                                             
000e38   1580     ANDWF     0x80,0x0,0x1                                                                                    
000e3a   0100     MOVLB     0x0                                                                                             
000e3c   6e12     MOVWF     0x12,0x0                                                                                        
000e3e   0efe     MOVLW     0xfe                                                                                            
000e40   50db     MOVF      0xdb,0x0,0x0                                                                                    
000e42   0101     MOVLB     0x1                                                                                             
000e44   1581     ANDWF     0x81,0x0,0x1                                                                                    
000e46   0100     MOVLB     0x0                                                                                             
000e48   6e13     MOVWF     0x13,0x0                                                                                        
000e4a   5012     MOVF      0x12,0x0,0x0                                                                                    
000e4c   1013     IORWF     0x13,0x0,0x0                                                                                    
000e4e   e002     BZ        0xe54                                                                                           
000e50   0e00     MOVLW     0x0                                                                                             
000e52   d001     BRA       0xe56                                                                                           
000e54   0e01     MOVLW     0x1                                                                                             
000e56   d000     BRA       0xe58                                                                                           
000e58   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\controller.c
000e5a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000e5c   ffd9                                                                                                               
000e5e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* determine if still holding footswitch: */                                     C:\fw\midicontroller\x011a\controller.c
000e60   cfd9     MOVFF     0xfd9,0xfe6    u8 button_held(u32 mask) {                                                       C:\fw\midicontroller\x011a\controller.c
000e62   ffe6                                                                                                               
000e64   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000e66   ffd9                                                                                                               
000e68   0efd     MOVLW     0xfd           	return (sw_curr & mask) == mask;                                                C:\fw\midicontroller\x011a\controller.c
000e6a   50db     MOVF      0xdb,0x0,0x0                                                                                    
000e6c   0101     MOVLB     0x1                                                                                             
000e6e   157e     ANDWF     0x7e,0x0,0x1                                                                                    
000e70   0100     MOVLB     0x0                                                                                             
000e72   6e10     MOVWF     0x10,0x0                                                                                        
000e74   0efe     MOVLW     0xfe                                                                                            
000e76   50db     MOVF      0xdb,0x0,0x0                                                                                    
000e78   0101     MOVLB     0x1                                                                                             
000e7a   157f     ANDWF     0x7f,0x0,0x1                                                                                    
000e7c   0100     MOVLB     0x0                                                                                             
000e7e   6e11     MOVWF     0x11,0x0                                                                                        
000e80   0efd     MOVLW     0xfd                                                                                            
000e82   50db     MOVF      0xdb,0x0,0x0                                                                                    
000e84   1810     XORWF     0x10,0x0,0x0                                                                                    
000e86   e103     BNZ       0xe8e                                                                                           
000e88   0efe     MOVLW     0xfe                                                                                            
000e8a   50db     MOVF      0xdb,0x0,0x0                                                                                    
000e8c   1811     XORWF     0x11,0x0,0x0                                                                                    
000e8e   e002     BZ        0xe94                                                                                           
000e90   0e00     MOVLW     0x0                                                                                             
000e92   d001     BRA       0xe96                                                                                           
000e94   0e01     MOVLW     0x1                                                                                             
000e96   d000     BRA       0xe98                                                                                           
000e98   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\controller.c
000e9a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000e9c   ffd9                                                                                                               
000e9e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* determine if a footswitch was released: */                                    C:\fw\midicontroller\x011a\controller.c
000ea0   cfd9     MOVFF     0xfd9,0xfe6    u8 button_released(u32 mask) {                                                   C:\fw\midicontroller\x011a\controller.c
000ea2   ffe6                                                                                                               
000ea4   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
000ea6   ffd9                                                                                                               
000ea8   0efd     MOVLW     0xfd           	return ((sw_last & mask) == mask) && ((sw_curr & mask) == 0);                   C:\fw\midicontroller\x011a\controller.c
000eaa   50db     MOVF      0xdb,0x0,0x0                                                                                    
000eac   0101     MOVLB     0x1                                                                                             
000eae   1580     ANDWF     0x80,0x0,0x1                                                                                    
000eb0   0100     MOVLB     0x0                                                                                             
000eb2   6e10     MOVWF     0x10,0x0                                                                                        
000eb4   0efe     MOVLW     0xfe                                                                                            
000eb6   50db     MOVF      0xdb,0x0,0x0                                                                                    
000eb8   0101     MOVLB     0x1                                                                                             
000eba   1581     ANDWF     0x81,0x0,0x1                                                                                    
000ebc   0100     MOVLB     0x0                                                                                             
000ebe   6e11     MOVWF     0x11,0x0                                                                                        
000ec0   0efd     MOVLW     0xfd                                                                                            
000ec2   50db     MOVF      0xdb,0x0,0x0                                                                                    
000ec4   1810     XORWF     0x10,0x0,0x0                                                                                    
000ec6   e103     BNZ       0xece                                                                                           
000ec8   0efe     MOVLW     0xfe                                                                                            
000eca   50db     MOVF      0xdb,0x0,0x0                                                                                    
000ecc   1811     XORWF     0x11,0x0,0x0                                                                                    
000ece   e10f     BNZ       0xeee                                                                                           
000ed0   0efd     MOVLW     0xfd                                                                                            
000ed2   50db     MOVF      0xdb,0x0,0x0                                                                                    
000ed4   0101     MOVLB     0x1                                                                                             
000ed6   157e     ANDWF     0x7e,0x0,0x1                                                                                    
000ed8   0100     MOVLB     0x0                                                                                             
000eda   6e12     MOVWF     0x12,0x0                                                                                        
000edc   0efe     MOVLW     0xfe                                                                                            
000ede   50db     MOVF      0xdb,0x0,0x0                                                                                    
000ee0   0101     MOVLB     0x1                                                                                             
000ee2   157f     ANDWF     0x7f,0x0,0x1                                                                                    
000ee4   0100     MOVLB     0x0                                                                                             
000ee6   6e13     MOVWF     0x13,0x0                                                                                        
000ee8   5012     MOVF      0x12,0x0,0x0                                                                                    
000eea   1013     IORWF     0x13,0x0,0x0                                                                                    
000eec   e002     BZ        0xef2                                                                                           
000eee   0e00     MOVLW     0x0                                                                                             
000ef0   d001     BRA       0xef4                                                                                           
000ef2   0e01     MOVLW     0x1                                                                                             
000ef4   d000     BRA       0xef6                                                                                           
000ef6   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\controller.c
000ef8   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
000efa   ffd9                                                                                                               
000efc   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* called every 10ms */                                                          C:\fw\midicontroller\x011a\controller.c
                                           void controller_10msec_timer() {                                                 C:\fw\midicontroller\x011a\controller.c
                                           	/* handle inc/dec acceleration: */                                              C:\fw\midicontroller\x011a\controller.c
000efe   0101     MOVLB     0x1            	if (accel_state != ACCEL_NONE) {                                                C:\fw\midicontroller\x011a\controller.c
000f00   5172     MOVF      0x72,0x0,0x1                                                                                    
000f02   e00a     BZ        0xf18                                                                                           
000f04   0101     MOVLB     0x1            		if (accel_time > 0) --accel_time;                                              C:\fw\midicontroller\x011a\controller.c
000f06   0e00     MOVLW     0x0                                                                                             
000f08   80d8     BSF       0xd8,0x0,0x0                                                                                    
000f0a   5561     SUBFWB    0x61,0x0,0x1                                                                                    
000f0c   0e00     MOVLW     0x0                                                                                             
000f0e   5562     SUBFWB    0x62,0x0,0x1                                                                                    
000f10   e203     BC        0xf18                                                                                           
000f12   0761     DECF      0x61,0x1,0x1                                                                                    
000f14   0e00     MOVLW     0x0                                                                                             
000f16   5b62     SUBWFB    0x62,0x1,0x1                                                                                    
                                           	}                                                                               C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	/* handle simple count-down timers: */                                          C:\fw\midicontroller\x011a\controller.c
000f18   0101     MOVLB     0x1            	if (cdtimer_store > 0) --cdtimer_store;                                         C:\fw\midicontroller\x011a\controller.c
000f1a   0e00     MOVLW     0x0                                                                                             
000f1c   80d8     BSF       0xd8,0x0,0x0                                                                                    
000f1e   556c     SUBFWB    0x6c,0x0,0x1                                                                                    
000f20   0e00     MOVLW     0x0                                                                                             
000f22   556d     SUBFWB    0x6d,0x0,0x1                                                                                    
000f24   e203     BC        0xf2c                                                                                           
000f26   076c     DECF      0x6c,0x1,0x1                                                                                    
000f28   0e00     MOVLW     0x0                                                                                             
000f2a   5b6d     SUBWFB    0x6d,0x1,0x1                                                                                    
000f2c   0e00     MOVLW     0x0            	if (cdtimer_incdec_held > 0) --cdtimer_incdec_held;                             C:\fw\midicontroller\x011a\controller.c
000f2e   80d8     BSF       0xd8,0x0,0x0                                                                                    
000f30   556e     SUBFWB    0x6e,0x0,0x1                                                                                    
000f32   0e00     MOVLW     0x0                                                                                             
000f34   556f     SUBFWB    0x6f,0x0,0x1                                                                                    
000f36   e203     BC        0xf3e                                                                                           
000f38   076e     DECF      0x6e,0x1,0x1                                                                                    
000f3a   0e00     MOVLW     0x0                                                                                             
000f3c   5b6f     SUBWFB    0x6f,0x1,0x1                                                                                    
000f3e   0e00     MOVLW     0x0            	if (cdtimer_value > 0) {                                                        C:\fw\midicontroller\x011a\controller.c
000f40   80d8     BSF       0xd8,0x0,0x0                                                                                    
000f42   5568     SUBFWB    0x68,0x0,0x1                                                                                    
000f44   0e00     MOVLW     0x0                                                                                             
000f46   5569     SUBFWB    0x69,0x0,0x1                                                                                    
000f48   e20c     BC        0xf62                                                                                           
000f4a   0768     DECF      0x68,0x1,0x1   		--cdtimer_value;                                                               C:\fw\midicontroller\x011a\controller.c
000f4c   0e00     MOVLW     0x0                                                                                             
000f4e   5b69     SUBWFB    0x69,0x1,0x1                                                                                    
000f50   5168     MOVF      0x68,0x0,0x1   		if (cdtimer_value == 0) {                                                      C:\fw\midicontroller\x011a\controller.c
000f52   1169     IORWF     0x69,0x0,0x1                                                                                    
000f54   e106     BNZ       0xf62                                                                                           
000f56   0101     MOVLB     0x1            			if (mode == MODE_CONCERT) bank_showname();                                    C:\fw\midicontroller\x011a\controller.c
000f58   0564     DECF      0x64,0x0,0x1                                                                                    
000f5a   e102     BNZ       0xf60                                                                                           
000f5c   df0c     RCALL     0xd76                                                                                           
000f5e   d001     BRA       0xf62          			else sortedbank_showname();                                                   C:\fw\midicontroller\x011a\controller.c
000f60   df21     RCALL     0xda4                                                                                           
                                           		}                                                                              C:\fw\midicontroller\x011a\controller.c
                                           	}                                                                               C:\fw\midicontroller\x011a\controller.c
000f62   0101     MOVLB     0x1            	if (cdtimer_holdenter > 0) --cdtimer_holdenter;                                 C:\fw\midicontroller\x011a\controller.c
000f64   0e00     MOVLW     0x0                                                                                             
000f66   80d8     BSF       0xd8,0x0,0x0                                                                                    
000f68   5570     SUBFWB    0x70,0x0,0x1                                                                                    
000f6a   0e00     MOVLW     0x0                                                                                             
000f6c   5571     SUBFWB    0x71,0x0,0x1                                                                                    
000f6e   e203     BC        0xf76                                                                                           
000f70   0770     DECF      0x70,0x1,0x1                                                                                    
000f72   0e00     MOVLW     0x0                                                                                             
000f74   5b71     SUBWFB    0x71,0x1,0x1                                                                                    
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	/* handle LED flashing states: */                                               C:\fw\midicontroller\x011a\controller.c
000f76   0e00     MOVLW     0x0            	if (cdtimer_flash > 0) {                                                        C:\fw\midicontroller\x011a\controller.c
000f78   80d8     BSF       0xd8,0x0,0x0                                                                                    
000f7a   556a     SUBFWB    0x6a,0x0,0x1                                                                                    
000f7c   0e00     MOVLW     0x0                                                                                             
000f7e   556b     SUBFWB    0x6b,0x0,0x1                                                                                    
000f80   e301     BNC       0xf84                                                                                           
000f82   d0bf     BRA       0x1102                                                                                          
000f84   5173     MOVF      0x73,0x0,0x1   		switch (flash_state) {                                                         C:\fw\midicontroller\x011a\controller.c
000f86   0a03     XORLW     0x3                                                                                             
000f88   e067     BZ        0x1058                                                                                          
000f8a   0a01     XORLW     0x1                                                                                             
000f8c   e01f     BZ        0xfcc                                                                                           
000f8e   0a03     XORLW     0x3                                                                                             
000f90   e001     BZ        0xf94                                                                                           
000f92   d0a8     BRA       0x10e4                                                                                          
                                           			case FLASH_STORE:                                                             C:\fw\midicontroller\x011a\controller.c
000f94   516a     MOVF      0x6a,0x0,0x1   				if ((cdtimer_flash & 31) == 0) {                                             C:\fw\midicontroller\x011a\controller.c
000f96   0b1f     ANDLW     0x1f                                                                                            
000f98   e108     BNZ       0xfaa                                                                                           
000f9a   5175     MOVF      0x75,0x0,0x1   					fsw_led_enable(flash_led);                                                  C:\fw\midicontroller\x011a\controller.c
000f9c   6ee6     MOVWF     0xe6,0x0                                                                                        
000f9e   6ae6     CLRF      0xe6,0x0                                                                                        
000fa0   ec0b     CALL      0x2816,0x0                                                                                      
000fa2   f014                                                                                                               
000fa4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000fa6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000fa8   d010     BRA       0xfca          				} else if ((cdtimer_flash & 31) == 15) {                                     C:\fw\midicontroller\x011a\controller.c
000faa   0e1f     MOVLW     0x1f                                                                                            
000fac   156a     ANDWF     0x6a,0x0,0x1                                                                                    
000fae   6e10     MOVWF     0x10,0x0                                                                                        
000fb0   6a11     CLRF      0x11,0x0                                                                                        
000fb2   0e0f     MOVLW     0xf                                                                                             
000fb4   1810     XORWF     0x10,0x0,0x0                                                                                    
000fb6   e101     BNZ       0xfba                                                                                           
000fb8   5011     MOVF      0x11,0x0,0x0                                                                                    
000fba   e107     BNZ       0xfca                                                                                           
000fbc   5175     MOVF      0x75,0x0,0x1   					fsw_led_disable(flash_led);                                                 C:\fw\midicontroller\x011a\controller.c
000fbe   6ee6     MOVWF     0xe6,0x0                                                                                        
000fc0   6ae6     CLRF      0xe6,0x0                                                                                        
000fc2   ec1f     CALL      0x283e,0x0                                                                                      
000fc4   f014                                                                                                               
000fc6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000fc8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           				}                                                                            C:\fw\midicontroller\x011a\controller.c
000fca   d08c     BRA       0x10e4         				break;                                                                       C:\fw\midicontroller\x011a\controller.c
                                           			case FLASH_BANK_SELECT_MODE:                                                  C:\fw\midicontroller\x011a\controller.c
000fcc   516a     MOVF      0x6a,0x0,0x1   				if ((cdtimer_flash & 31) == 0) {                                             C:\fw\midicontroller\x011a\controller.c
000fce   0b1f     ANDLW     0x1f                                                                                            
000fd0   e11d     BNZ       0x100c                                                                                          
000fd2   0e00     MOVLW     0x0            					fsw_led_enable(0);                                                          C:\fw\midicontroller\x011a\controller.c
000fd4   6ee6     MOVWF     0xe6,0x0                                                                                        
000fd6   6ae6     CLRF      0xe6,0x0                                                                                        
000fd8   ec0b     CALL      0x2816,0x0                                                                                      
000fda   f014                                                                                                               
000fdc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000fde   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000fe0   0e01     MOVLW     0x1            					fsw_led_enable(1);                                                          C:\fw\midicontroller\x011a\controller.c
000fe2   6ee6     MOVWF     0xe6,0x0                                                                                        
000fe4   6ae6     CLRF      0xe6,0x0                                                                                        
000fe6   ec0b     CALL      0x2816,0x0                                                                                      
000fe8   f014                                                                                                               
000fea   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000fec   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000fee   0e02     MOVLW     0x2            					fsw_led_disable(2);                                                         C:\fw\midicontroller\x011a\controller.c
000ff0   6ee6     MOVWF     0xe6,0x0                                                                                        
000ff2   6ae6     CLRF      0xe6,0x0                                                                                        
000ff4   ec1f     CALL      0x283e,0x0                                                                                      
000ff6   f014                                                                                                               
000ff8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000ffa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
000ffc   0e03     MOVLW     0x3            					fsw_led_disable(3);                                                         C:\fw\midicontroller\x011a\controller.c
000ffe   6ee6     MOVWF     0xe6,0x0                                                                                        
001000   6ae6     CLRF      0xe6,0x0                                                                                        
001002   ec1f     CALL      0x283e,0x0                                                                                      
001004   f014                                                                                                               
001006   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001008   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00100a   d025     BRA       0x1056         				} else if ((cdtimer_flash & 31) == 15) {                                     C:\fw\midicontroller\x011a\controller.c
00100c   0e1f     MOVLW     0x1f                                                                                            
00100e   156a     ANDWF     0x6a,0x0,0x1                                                                                    
001010   6e10     MOVWF     0x10,0x0                                                                                        
001012   6a11     CLRF      0x11,0x0                                                                                        
001014   0e0f     MOVLW     0xf                                                                                             
001016   1810     XORWF     0x10,0x0,0x0                                                                                    
001018   e101     BNZ       0x101c                                                                                          
00101a   5011     MOVF      0x11,0x0,0x0                                                                                    
00101c   e11c     BNZ       0x1056                                                                                          
00101e   0e00     MOVLW     0x0            					fsw_led_disable(0);                                                         C:\fw\midicontroller\x011a\controller.c
001020   6ee6     MOVWF     0xe6,0x0                                                                                        
001022   6ae6     CLRF      0xe6,0x0                                                                                        
001024   ec1f     CALL      0x283e,0x0                                                                                      
001026   f014                                                                                                               
001028   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00102a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00102c   0e01     MOVLW     0x1            					fsw_led_disable(1);                                                         C:\fw\midicontroller\x011a\controller.c
00102e   6ee6     MOVWF     0xe6,0x0                                                                                        
001030   6ae6     CLRF      0xe6,0x0                                                                                        
001032   ec1f     CALL      0x283e,0x0                                                                                      
001034   f014                                                                                                               
001036   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001038   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00103a   0e02     MOVLW     0x2            					fsw_led_disable(2);                                                         C:\fw\midicontroller\x011a\controller.c
00103c   6ee6     MOVWF     0xe6,0x0                                                                                        
00103e   6ae6     CLRF      0xe6,0x0                                                                                        
001040   ec1f     CALL      0x283e,0x0                                                                                      
001042   f014                                                                                                               
001044   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001046   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001048   0e03     MOVLW     0x3            					fsw_led_disable(3);                                                         C:\fw\midicontroller\x011a\controller.c
00104a   6ee6     MOVWF     0xe6,0x0                                                                                        
00104c   6ae6     CLRF      0xe6,0x0                                                                                        
00104e   ec1f     CALL      0x283e,0x0                                                                                      
001050   f014                                                                                                               
001052   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001054   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           				}                                                                            C:\fw\midicontroller\x011a\controller.c
001056   d046     BRA       0x10e4         				break;                                                                       C:\fw\midicontroller\x011a\controller.c
                                           			case FLASH_PRGM_SELECT_MODE:                                                  C:\fw\midicontroller\x011a\controller.c
001058   516a     MOVF      0x6a,0x0,0x1   				if ((cdtimer_flash & 31) == 0) {                                             C:\fw\midicontroller\x011a\controller.c
00105a   0b1f     ANDLW     0x1f                                                                                            
00105c   e11d     BNZ       0x1098                                                                                          
00105e   0e00     MOVLW     0x0            					fsw_led_disable(0);                                                         C:\fw\midicontroller\x011a\controller.c
001060   6ee6     MOVWF     0xe6,0x0                                                                                        
001062   6ae6     CLRF      0xe6,0x0                                                                                        
001064   ec1f     CALL      0x283e,0x0                                                                                      
001066   f014                                                                                                               
001068   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00106a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00106c   0e01     MOVLW     0x1            					fsw_led_disable(1);                                                         C:\fw\midicontroller\x011a\controller.c
00106e   6ee6     MOVWF     0xe6,0x0                                                                                        
001070   6ae6     CLRF      0xe6,0x0                                                                                        
001072   ec1f     CALL      0x283e,0x0                                                                                      
001074   f014                                                                                                               
001076   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001078   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00107a   0e02     MOVLW     0x2            					fsw_led_enable(2);                                                          C:\fw\midicontroller\x011a\controller.c
00107c   6ee6     MOVWF     0xe6,0x0                                                                                        
00107e   6ae6     CLRF      0xe6,0x0                                                                                        
001080   ec0b     CALL      0x2816,0x0                                                                                      
001082   f014                                                                                                               
001084   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001086   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001088   0e03     MOVLW     0x3            					fsw_led_enable(3);                                                          C:\fw\midicontroller\x011a\controller.c
00108a   6ee6     MOVWF     0xe6,0x0                                                                                        
00108c   6ae6     CLRF      0xe6,0x0                                                                                        
00108e   ec0b     CALL      0x2816,0x0                                                                                      
001090   f014                                                                                                               
001092   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001094   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001096   d025     BRA       0x10e2         				} else if ((cdtimer_flash & 31) == 15) {                                     C:\fw\midicontroller\x011a\controller.c
001098   0e1f     MOVLW     0x1f                                                                                            
00109a   156a     ANDWF     0x6a,0x0,0x1                                                                                    
00109c   6e10     MOVWF     0x10,0x0                                                                                        
00109e   6a11     CLRF      0x11,0x0                                                                                        
0010a0   0e0f     MOVLW     0xf                                                                                             
0010a2   1810     XORWF     0x10,0x0,0x0                                                                                    
0010a4   e101     BNZ       0x10a8                                                                                          
0010a6   5011     MOVF      0x11,0x0,0x0                                                                                    
0010a8   e11c     BNZ       0x10e2                                                                                          
0010aa   0e00     MOVLW     0x0            					fsw_led_disable(0);                                                         C:\fw\midicontroller\x011a\controller.c
0010ac   6ee6     MOVWF     0xe6,0x0                                                                                        
0010ae   6ae6     CLRF      0xe6,0x0                                                                                        
0010b0   ec1f     CALL      0x283e,0x0                                                                                      
0010b2   f014                                                                                                               
0010b4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0010b6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0010b8   0e01     MOVLW     0x1            					fsw_led_disable(1);                                                         C:\fw\midicontroller\x011a\controller.c
0010ba   6ee6     MOVWF     0xe6,0x0                                                                                        
0010bc   6ae6     CLRF      0xe6,0x0                                                                                        
0010be   ec1f     CALL      0x283e,0x0                                                                                      
0010c0   f014                                                                                                               
0010c2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0010c4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0010c6   0e02     MOVLW     0x2            					fsw_led_disable(2);                                                         C:\fw\midicontroller\x011a\controller.c
0010c8   6ee6     MOVWF     0xe6,0x0                                                                                        
0010ca   6ae6     CLRF      0xe6,0x0                                                                                        
0010cc   ec1f     CALL      0x283e,0x0                                                                                      
0010ce   f014                                                                                                               
0010d0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0010d2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0010d4   0e03     MOVLW     0x3            					fsw_led_disable(3);                                                         C:\fw\midicontroller\x011a\controller.c
0010d6   6ee6     MOVWF     0xe6,0x0                                                                                        
0010d8   6ae6     CLRF      0xe6,0x0                                                                                        
0010da   ec1f     CALL      0x283e,0x0                                                                                      
0010dc   f014                                                                                                               
0010de   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0010e0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           				}                                                                            C:\fw\midicontroller\x011a\controller.c
0010e2   d000     BRA       0x10e4         				break;                                                                       C:\fw\midicontroller\x011a\controller.c
                                           		}                                                                              C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
0010e4   0101     MOVLB     0x1            		--cdtimer_flash;                                                               C:\fw\midicontroller\x011a\controller.c
0010e6   076a     DECF      0x6a,0x1,0x1                                                                                    
0010e8   0e00     MOVLW     0x0                                                                                             
0010ea   5b6b     SUBWFB    0x6b,0x1,0x1                                                                                    
0010ec   516a     MOVF      0x6a,0x0,0x1   		if (cdtimer_flash == 0) {                                                      C:\fw\midicontroller\x011a\controller.c
0010ee   116b     IORWF     0x6b,0x0,0x1                                                                                    
0010f0   e108     BNZ       0x1102                                                                                          
                                           			/* reset LEDs to proper state */                                              C:\fw\midicontroller\x011a\controller.c
0010f2   0101     MOVLB     0x1            			fsw_led_set_active(curr_preset);                                              C:\fw\midicontroller\x011a\controller.c
0010f4   5157     MOVF      0x57,0x0,0x1                                                                                    
0010f6   6ee6     MOVWF     0xe6,0x0                                                                                        
0010f8   6ae6     CLRF      0xe6,0x0                                                                                        
0010fa   ecf5     CALL      0x27ea,0x0                                                                                      
0010fc   f013                                                                                                               
0010fe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001100   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           		}                                                                              C:\fw\midicontroller\x011a\controller.c
                                           	}                                                                               C:\fw\midicontroller\x011a\controller.c
001102   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           void inc_practice_value() {                                                      C:\fw\midicontroller\x011a\controller.c
001104   0101     MOVLB     0x1            	if (incdec_mode == 0) {                                                         C:\fw\midicontroller\x011a\controller.c
001106   5186     MOVF      0x86,0x0,0x1                                                                                    
001108   e115     BNZ       0x1134                                                                                          
00110a   c15f     MOVFF     0x15f,0x10     		if (curr_sortedbank == bank_count - 1) curr_sortedbank = 0;                    C:\fw\midicontroller\x011a\controller.c
00110c   f010                                                                                                               
00110e   c160     MOVFF     0x160,0x11                                                                                      
001110   f011                                                                                                               
001112   0610     DECF      0x10,0x1,0x0                                                                                    
001114   0e00     MOVLW     0x0                                                                                             
001116   5a11     SUBWFB    0x11,0x1,0x0                                                                                    
001118   5010     MOVF      0x10,0x0,0x0                                                                                    
00111a   0101     MOVLB     0x1                                                                                             
00111c   195d     XORWF     0x5d,0x0,0x1                                                                                    
00111e   e102     BNZ       0x1124                                                                                          
001120   5011     MOVF      0x11,0x0,0x0                                                                                    
001122   195e     XORWF     0x5e,0x0,0x1                                                                                    
001124   e103     BNZ       0x112c                                                                                          
001126   6b5d     CLRF      0x5d,0x1                                                                                        
001128   6b5e     CLRF      0x5e,0x1                                                                                        
00112a   d003     BRA       0x1132         		else ++curr_sortedbank;                                                        C:\fw\midicontroller\x011a\controller.c
00112c   2b5d     INCF      0x5d,0x1,0x1                                                                                    
00112e   0e00     MOVLW     0x0                                                                                             
001130   235e     ADDWFC    0x5e,0x1,0x1                                                                                    
001132   d007     BRA       0x1142         	} else {                                                                        C:\fw\midicontroller\x011a\controller.c
001134   0e7f     MOVLW     0x7f           		if (curr_program == 127) curr_program = 0;                                     C:\fw\midicontroller\x011a\controller.c
001136   0101     MOVLB     0x1                                                                                             
001138   5d56     SUBWF     0x56,0x0,0x1                                                                                    
00113a   e102     BNZ       0x1140                                                                                          
00113c   6b56     CLRF      0x56,0x1                                                                                        
00113e   d001     BRA       0x1142         		else ++curr_program;                                                           C:\fw\midicontroller\x011a\controller.c
001140   2b56     INCF      0x56,0x1,0x1                                                                                    
                                           	}                                                                               C:\fw\midicontroller\x011a\controller.c
001142   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           void dec_practice_value() {                                                      C:\fw\midicontroller\x011a\controller.c
001144   0101     MOVLB     0x1            	if (incdec_mode == 0) {                                                         C:\fw\midicontroller\x011a\controller.c
001146   5186     MOVF      0x86,0x0,0x1                                                                                    
001148   e111     BNZ       0x116c                                                                                          
00114a   0101     MOVLB     0x1            		if (curr_sortedbank == 0) curr_sortedbank = bank_count - 1;                    C:\fw\midicontroller\x011a\controller.c
00114c   515d     MOVF      0x5d,0x0,0x1                                                                                    
00114e   115e     IORWF     0x5e,0x0,0x1                                                                                    
001150   e109     BNZ       0x1164                                                                                          
001152   c15f     MOVFF     0x15f,0x15d                                                                                     
001154   f15d                                                                                                               
001156   c160     MOVFF     0x160,0x15e                                                                                     
001158   f15e                                                                                                               
00115a   0e01     MOVLW     0x1                                                                                             
00115c   5f5d     SUBWF     0x5d,0x1,0x1                                                                                    
00115e   0e00     MOVLW     0x0                                                                                             
001160   5b5e     SUBWFB    0x5e,0x1,0x1                                                                                    
001162   d003     BRA       0x116a         		else --curr_sortedbank;                                                        C:\fw\midicontroller\x011a\controller.c
001164   075d     DECF      0x5d,0x1,0x1                                                                                    
001166   0e00     MOVLW     0x0                                                                                             
001168   5b5e     SUBWFB    0x5e,0x1,0x1                                                                                    
00116a   d007     BRA       0x117a         	} else {                                                                        C:\fw\midicontroller\x011a\controller.c
00116c   0101     MOVLB     0x1            		if (curr_program == 0) curr_program = 127;                                     C:\fw\midicontroller\x011a\controller.c
00116e   5156     MOVF      0x56,0x0,0x1                                                                                    
001170   e103     BNZ       0x1178                                                                                          
001172   0e7f     MOVLW     0x7f                                                                                            
001174   6f56     MOVWF     0x56,0x1                                                                                        
001176   d001     BRA       0x117a         		else --curr_program;                                                           C:\fw\midicontroller\x011a\controller.c
001178   0756     DECF      0x56,0x1,0x1                                                                                    
                                           	}                                                                               C:\fw\midicontroller\x011a\controller.c
00117a   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           void notify_practice_value() {                                                   C:\fw\midicontroller\x011a\controller.c
00117c   0101     MOVLB     0x1            	if (incdec_mode == 0) {                                                         C:\fw\midicontroller\x011a\controller.c
00117e   5186     MOVF      0x86,0x0,0x1                                                                                    
001180   e102     BNZ       0x1186                                                                                          
001182   de10     RCALL     0xda4          		sortedbank_showname();                                                         C:\fw\midicontroller\x011a\controller.c
001184   d001     BRA       0x1188         	} else {                                                                        C:\fw\midicontroller\x011a\controller.c
001186   dd26     RCALL     0xbd4          		show_program();                                                                C:\fw\midicontroller\x011a\controller.c
                                           	}                                                                               C:\fw\midicontroller\x011a\controller.c
001188   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           void activate_practice_value() {                                                 C:\fw\midicontroller\x011a\controller.c
00118a   0101     MOVLB     0x1            	if (incdec_mode == 0) {                                                         C:\fw\midicontroller\x011a\controller.c
00118c   5186     MOVF      0x86,0x0,0x1                                                                                    
00118e   e104     BNZ       0x1198                                                                                          
001190   6ae6     CLRF      0xe6,0x0       		sortedbank_activate(0);                                                        C:\fw\midicontroller\x011a\controller.c
001192   ddd8     RCALL     0xd44                                                                                           
001194   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001196   d004     BRA       0x11a0         	} else {                                                                        C:\fw\midicontroller\x011a\controller.c
001198   0e01     MOVLW     0x1            		program_activate(1);                                                           C:\fw\midicontroller\x011a\controller.c
00119a   6ee6     MOVWF     0xe6,0x0                                                                                        
00119c   dd44     RCALL     0xc26                                                                                           
00119e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	}                                                                               C:\fw\midicontroller\x011a\controller.c
0011a0   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* sequence programming completed, set state to repeat the sequence back: */     C:\fw\midicontroller\x011a\controller.c
                                           void sequence_complete() {                                                       C:\fw\midicontroller\x011a\controller.c
                                           	/* set the sequence length and store to the ROM: */                             C:\fw\midicontroller\x011a\controller.c
0011a2   c158     MOVFF     0x158,0x151    	bankmap_count = curr_mapindex;                                                  C:\fw\midicontroller\x011a\controller.c
0011a4   f151                                                                                                               
0011a6   c151     MOVFF     0x151,0xfe6    	bank_store(curr_bank, bank, bankcontroller, bankmap, bankmap_count);            C:\fw\midicontroller\x011a\controller.c
0011a8   ffe6                                                                                                               
0011aa   0e49     MOVLW     0x49                                                                                            
0011ac   6ee6     MOVWF     0xe6,0x0                                                                                        
0011ae   0e01     MOVLW     0x1                                                                                             
0011b0   6ee6     MOVWF     0xe6,0x0                                                                                        
0011b2   0e45     MOVLW     0x45                                                                                            
0011b4   6ee6     MOVWF     0xe6,0x0                                                                                        
0011b6   0e01     MOVLW     0x1                                                                                             
0011b8   6ee6     MOVWF     0xe6,0x0                                                                                        
0011ba   0e41     MOVLW     0x41                                                                                            
0011bc   6ee6     MOVWF     0xe6,0x0                                                                                        
0011be   0e01     MOVLW     0x1                                                                                             
0011c0   6ee6     MOVWF     0xe6,0x0                                                                                        
0011c2   c159     MOVFF     0x159,0xfe6                                                                                     
0011c4   ffe6                                                                                                               
0011c6   c15a     MOVFF     0x15a,0xfe6                                                                                     
0011c8   ffe6                                                                                                               
0011ca   ec4c     CALL      0x2898,0x0                                                                                      
0011cc   f014                                                                                                               
0011ce   6e10     MOVWF     0x10,0x0                                                                                        
0011d0   0e09     MOVLW     0x9                                                                                             
0011d2   5ee1     SUBWF     0xe1,0x1,0x0                                                                                    
0011d4   5010     MOVF      0x10,0x0,0x0                                                                                    
                                           	/* set up state to repeat the stored sequence back on the preset LEDs: */       C:\fw\midicontroller\x011a\controller.c
0011d6   0101     MOVLB     0x1            	program_mode = PROGRAM_COMPLETE;                                                C:\fw\midicontroller\x011a\controller.c
0011d8   0e02     MOVLW     0x2                                                                                             
0011da   6f74     MOVWF     0x74,0x1                                                                                        
0011dc   0e32     MOVLW     0x32           	cdtimer_holdenter = 50;                                                         C:\fw\midicontroller\x011a\controller.c
0011de   6f70     MOVWF     0x70,0x1                                                                                        
0011e0   6b71     CLRF      0x71,0x1                                                                                        
0011e2   0101     MOVLB     0x1            	curr_mapindex = 0;                                                              C:\fw\midicontroller\x011a\controller.c
0011e4   6b58     CLRF      0x58,0x1                                                                                        
0011e6   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* set the controller to an initial state */                                     C:\fw\midicontroller\x011a\controller.c
                                           void controller_init() {                                                         C:\fw\midicontroller\x011a\controller.c
0011e8   ec43     CALL      0x2886,0x0     	bank_count = banks_count();                                                     C:\fw\midicontroller\x011a\controller.c
0011ea   f014                                                                                                               
0011ec   cff3     MOVFF     0xff3,0x15f                                                                                     
0011ee   f15f                                                                                                               
0011f0   cff4     MOVFF     0xff4,0x160                                                                                     
0011f2   f160                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
0011f4   0101     MOVLB     0x1            	curr_bank = 0;                                                                  C:\fw\midicontroller\x011a\controller.c
0011f6   6b59     CLRF      0x59,0x1                                                                                        
0011f8   6b5a     CLRF      0x5a,0x1                                                                                        
0011fa   0e01     MOVLW     0x1            	bank_activate(1);                                                               C:\fw\midicontroller\x011a\controller.c
0011fc   6ee6     MOVWF     0xe6,0x0                                                                                        
0011fe   dd6a     RCALL     0xcd4                                                                                           
001200   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
001202   0101     MOVLB     0x1            	curr_mapindex = 0;                                                              C:\fw\midicontroller\x011a\controller.c
001204   6b58     CLRF      0x58,0x1                                                                                        
001206   0e01     MOVLW     0x1            	bankmap_activate(1);                                                            C:\fw\midicontroller\x011a\controller.c
001208   6ee6     MOVWF     0xe6,0x0                                                                                        
00120a   dd49     RCALL     0xc9e                                                                                           
00120c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
00120e   0e00     MOVLW     0x0            	sw_curr = sw_last = 0;                                                          C:\fw\midicontroller\x011a\controller.c
001210   0101     MOVLB     0x1                                                                                             
001212   6f80     MOVWF     0x80,0x1                                                                                        
001214   6b81     CLRF      0x81,0x1                                                                                        
001216   6f7e     MOVWF     0x7e,0x1                                                                                        
001218   6b7f     CLRF      0x7f,0x1                                                                                        
00121a   ec3e     CALL      0x287c,0x0     	cc_curr = cc_last = expr_poll();                                                C:\fw\midicontroller\x011a\controller.c
00121c   f014                                                                                                               
00121e   0101     MOVLB     0x1                                                                                             
001220   6f83     MOVWF     0x83,0x1                                                                                        
001222   6f82     MOVWF     0x82,0x1                                                                                        
001224   ec39     CALL      0x2872,0x0     	mode = slider_poll();                                                           C:\fw\midicontroller\x011a\controller.c
001226   f014                                                                                                               
001228   0101     MOVLB     0x1                                                                                             
00122a   6f64     MOVWF     0x64,0x1                                                                                        
00122c   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           /* main control loop */                                                          C:\fw\midicontroller\x011a\controller.c
                                           void controller_handle() {                                                       C:\fw\midicontroller\x011a\controller.c
                                           	/* poll foot-switch depression status: */                                       C:\fw\midicontroller\x011a\controller.c
00122e   ecb1     CALL      0x2762,0x0     	sw_curr = fsw_poll();                                                           C:\fw\midicontroller\x011a\controller.c
001230   f013                                                                                                               
001232   cff3     MOVFF     0xff3,0x17e                                                                                     
001234   f17e                                                                                                               
001236   cff4     MOVFF     0xff4,0x17f                                                                                     
001238   f17f                                                                                                               
                                           	/* poll expression pedal value: */                                              C:\fw\midicontroller\x011a\controller.c
00123a   ec3e     CALL      0x287c,0x0     	cc_curr = expr_poll();                                                          C:\fw\midicontroller\x011a\controller.c
00123c   f014                                                                                                               
00123e   0101     MOVLB     0x1                                                                                             
001240   6f82     MOVWF     0x82,0x1                                                                                        
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	/* send CC message only if changed: */                                          C:\fw\midicontroller\x011a\controller.c
001242   5183     MOVF      0x83,0x0,0x1   	if (cc_curr != cc_last) {                                                       C:\fw\midicontroller\x011a\controller.c
001244   5d82     SUBWF     0x82,0x0,0x1                                                                                    
001246   e016     BZ        0x1274                                                                                          
001248   0e7f     MOVLW     0x7f           		midi_send_cmd2(0xB, midi_channel, bankcontroller[curr_preset], cc_curr & 0x7F); C:\fw\midicontroller\x011a\controller.c
00124a   1582     ANDWF     0x82,0x0,0x1                                                                                    
00124c   6ee6     MOVWF     0xe6,0x0                                                                                        
00124e   0101     MOVLB     0x1                                                                                             
001250   5157     MOVF      0x57,0x0,0x1                                                                                    
001252   6aea     CLRF      0xea,0x0                                                                                        
001254   0f45     ADDLW     0x45                                                                                            
001256   6ee9     MOVWF     0xe9,0x0                                                                                        
001258   0e01     MOVLW     0x1                                                                                             
00125a   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00125c   50ef     MOVF      0xef,0x0,0x0                                                                                    
00125e   6ee6     MOVWF     0xe6,0x0                                                                                        
001260   c165     MOVFF     0x165,0xfe6                                                                                     
001262   ffe6                                                                                                               
001264   0e0b     MOVLW     0xb                                                                                             
001266   6ee6     MOVWF     0xe6,0x0                                                                                        
001268   ec6c     CALL      0x28d8,0x0                                                                                      
00126a   f014                                                                                                               
00126c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00126e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001270   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001272   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           	}                                                                               C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	/* determine mode */                                                            C:\fw\midicontroller\x011a\controller.c
001274   ec39     CALL      0x2872,0x0     	if (slider_poll() == 0) {                                                       C:\fw\midicontroller\x011a\controller.c
001276   f014                                                                                                               
001278   0900     IORLW     0x0                                                                                             
00127a   e110     BNZ       0x129c                                                                                          
00127c   0101     MOVLB     0x1            		if (mode == MODE_CONCERT) {                                                    C:\fw\midicontroller\x011a\controller.c
00127e   0564     DECF      0x64,0x0,0x1                                                                                    
001280   e10c     BNZ       0x129a                                                                                          
                                           			/* switched from CONCERT to PRACTICE */                                       C:\fw\midicontroller\x011a\controller.c
001282   6b64     CLRF      0x64,0x1       			mode = MODE_PRACTICE;                                                         C:\fw\midicontroller\x011a\controller.c
                                           			/* load the alphabetically first bank and start from the beginning of its program */ C:\fw\midicontroller\x011a\controller.c
001284   6b5d     CLRF      0x5d,0x1       			curr_sortedbank = 0;                                                          C:\fw\midicontroller\x011a\controller.c
001286   6b5e     CLRF      0x5e,0x1                                                                                        
001288   0e01     MOVLW     0x1            			sortedbank_activate(1);                                                       C:\fw\midicontroller\x011a\controller.c
00128a   6ee6     MOVWF     0xe6,0x0                                                                                        
00128c   dd5b     RCALL     0xd44                                                                                           
00128e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001290   0101     MOVLB     0x1            			curr_mapindex = 0;                                                            C:\fw\midicontroller\x011a\controller.c
001292   6b58     CLRF      0x58,0x1                                                                                        
001294   6ae6     CLRF      0xe6,0x0       			bankmap_activate(0);                                                          C:\fw\midicontroller\x011a\controller.c
001296   dd03     RCALL     0xc9e                                                                                           
001298   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           		}                                                                              C:\fw\midicontroller\x011a\controller.c
00129a   d00f     BRA       0x12ba         	} else {                                                                        C:\fw\midicontroller\x011a\controller.c
00129c   0101     MOVLB     0x1            		if (mode == MODE_PRACTICE) {                                                   C:\fw\midicontroller\x011a\controller.c
00129e   5164     MOVF      0x64,0x0,0x1                                                                                    
0012a0   e10c     BNZ       0x12ba                                                                                          
                                           			/* switched from PRACTICE to CONCERT */                                       C:\fw\midicontroller\x011a\controller.c
0012a2   0e01     MOVLW     0x1            			mode = MODE_CONCERT;                                                          C:\fw\midicontroller\x011a\controller.c
0012a4   6f64     MOVWF     0x64,0x1                                                                                        
                                           			/* load the sequentially first bank and start from the beginning of its program */ C:\fw\midicontroller\x011a\controller.c
0012a6   6b59     CLRF      0x59,0x1       			curr_bank = 0;                                                                C:\fw\midicontroller\x011a\controller.c
0012a8   6b5a     CLRF      0x5a,0x1                                                                                        
0012aa   6ee6     MOVWF     0xe6,0x0       			bank_activate(1);                                                             C:\fw\midicontroller\x011a\controller.c
0012ac   dd13     RCALL     0xcd4                                                                                           
0012ae   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0012b0   0101     MOVLB     0x1            			curr_mapindex = 0;                                                            C:\fw\midicontroller\x011a\controller.c
0012b2   6b58     CLRF      0x58,0x1                                                                                        
0012b4   6ae6     CLRF      0xe6,0x0       			bankmap_activate(0);                                                          C:\fw\midicontroller\x011a\controller.c
0012b6   dcf3     RCALL     0xc9e                                                                                           
0012b8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           		}                                                                              C:\fw\midicontroller\x011a\controller.c
                                           	}                                                                               C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	/* NEXT never changes function depending on mode */                             C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	/* NEXT pressed: */                                                             C:\fw\midicontroller\x011a\controller.c
0012ba   0e00     MOVLW     0x0            	if (button_pressed(FSM_NEXT)) {                                                 C:\fw\midicontroller\x011a\controller.c
0012bc   6ee6     MOVWF     0xe6,0x0                                                                                        
0012be   6ae6     CLRF      0xe6,0x0                                                                                        
0012c0   dda0     RCALL     0xe02                                                                                           
0012c2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0012c4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0012c6   0900     IORLW     0x0                                                                                             
0012c8   e04b     BZ        0x1360                                                                                          
0012ca   0101     MOVLB     0x1            		if (loaded_bank != curr_bank) {                                                C:\fw\midicontroller\x011a\controller.c
0012cc   5159     MOVF      0x59,0x0,0x1                                                                                    
0012ce   195b     XORWF     0x5b,0x0,0x1                                                                                    
0012d0   e102     BNZ       0x12d6                                                                                          
0012d2   515a     MOVF      0x5a,0x0,0x1                                                                                    
0012d4   195c     XORWF     0x5c,0x0,0x1                                                                                    
0012d6   e005     BZ        0x12e2                                                                                          
                                           			/* prepared to switch to a bank, but did not activate the first map */        C:\fw\midicontroller\x011a\controller.c
0012d8   0e01     MOVLW     0x1            			bankmap_activate(1);                                                          C:\fw\midicontroller\x011a\controller.c
0012da   6ee6     MOVWF     0xe6,0x0                                                                                        
0012dc   dce0     RCALL     0xc9e                                                                                           
0012de   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0012e0   d03f     BRA       0x1360         		} else {                                                                       C:\fw\midicontroller\x011a\controller.c
0012e2   0551     DECF      0x51,0x0,0x1   			if (curr_mapindex == bankmap_count - 1) {                                     C:\fw\midicontroller\x011a\controller.c
0012e4   5d58     SUBWF     0x58,0x0,0x1                                                                                    
0012e6   e137     BNZ       0x1356                                                                                          
                                           				/* crossed the upper bank-map boundary, load the next bank */                C:\fw\midicontroller\x011a\controller.c
0012e8   5164     MOVF      0x64,0x0,0x1   				if (mode == MODE_PRACTICE) {                                                 C:\fw\midicontroller\x011a\controller.c
0012ea   e118     BNZ       0x131c                                                                                          
                                           					/* PRACTICE mode cycles through banks by sorted index #: */                 C:\fw\midicontroller\x011a\controller.c
0012ec   c15f     MOVFF     0x15f,0x10     					if (curr_sortedbank == bank_count - 1) {                                    C:\fw\midicontroller\x011a\controller.c
0012ee   f010                                                                                                               
0012f0   c160     MOVFF     0x160,0x11                                                                                      
0012f2   f011                                                                                                               
0012f4   0610     DECF      0x10,0x1,0x0                                                                                    
0012f6   0e00     MOVLW     0x0                                                                                             
0012f8   5a11     SUBWFB    0x11,0x1,0x0                                                                                    
0012fa   5010     MOVF      0x10,0x0,0x0                                                                                    
0012fc   195d     XORWF     0x5d,0x0,0x1                                                                                    
0012fe   e102     BNZ       0x1304                                                                                          
001300   5011     MOVF      0x11,0x0,0x0                                                                                    
001302   195e     XORWF     0x5e,0x0,0x1                                                                                    
001304   e103     BNZ       0x130c                                                                                          
001306   6b5d     CLRF      0x5d,0x1       						curr_sortedbank = 0;                                                       C:\fw\midicontroller\x011a\controller.c
001308   6b5e     CLRF      0x5e,0x1                                                                                        
00130a   d003     BRA       0x1312         					} else {                                                                    C:\fw\midicontroller\x011a\controller.c
00130c   2b5d     INCF      0x5d,0x1,0x1   						++curr_sortedbank;                                                         C:\fw\midicontroller\x011a\controller.c
00130e   0e00     MOVLW     0x0                                                                                             
001310   235e     ADDWFC    0x5e,0x1,0x1                                                                                    
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
                                           					/* show the bank name */                                                    C:\fw\midicontroller\x011a\controller.c
001312   0e01     MOVLW     0x1            					sortedbank_activate(1);                                                     C:\fw\midicontroller\x011a\controller.c
001314   6ee6     MOVWF     0xe6,0x0                                                                                        
001316   dd16     RCALL     0xd44                                                                                           
001318   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00131a   d017     BRA       0x134a         				} else {                                                                     C:\fw\midicontroller\x011a\controller.c
                                           					/* CONCERT mode cycles through banks by index #: */                         C:\fw\midicontroller\x011a\controller.c
00131c   c15f     MOVFF     0x15f,0x10     					if (curr_bank == bank_count - 1) {                                          C:\fw\midicontroller\x011a\controller.c
00131e   f010                                                                                                               
001320   c160     MOVFF     0x160,0x11                                                                                      
001322   f011                                                                                                               
001324   0610     DECF      0x10,0x1,0x0                                                                                    
001326   0e00     MOVLW     0x0                                                                                             
001328   5a11     SUBWFB    0x11,0x1,0x0                                                                                    
00132a   5010     MOVF      0x10,0x0,0x0                                                                                    
00132c   1959     XORWF     0x59,0x0,0x1                                                                                    
00132e   e102     BNZ       0x1334                                                                                          
001330   5011     MOVF      0x11,0x0,0x0                                                                                    
001332   195a     XORWF     0x5a,0x0,0x1                                                                                    
001334   e103     BNZ       0x133c                                                                                          
001336   6b59     CLRF      0x59,0x1       						curr_bank = 0;                                                             C:\fw\midicontroller\x011a\controller.c
001338   6b5a     CLRF      0x5a,0x1                                                                                        
00133a   d003     BRA       0x1342         					} else {                                                                    C:\fw\midicontroller\x011a\controller.c
00133c   2b59     INCF      0x59,0x1,0x1   						++curr_bank;                                                               C:\fw\midicontroller\x011a\controller.c
00133e   0e00     MOVLW     0x0                                                                                             
001340   235a     ADDWFC    0x5a,0x1,0x1                                                                                    
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
                                           					/* show the bank name */                                                    C:\fw\midicontroller\x011a\controller.c
001342   0e01     MOVLW     0x1            					bank_activate(1);                                                           C:\fw\midicontroller\x011a\controller.c
001344   6ee6     MOVWF     0xe6,0x0                                                                                        
001346   dcc6     RCALL     0xcd4                                                                                           
001348   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           				}                                                                            C:\fw\midicontroller\x011a\controller.c
                                           				/* activate the first map for the new bank, but do not display the MIDI program # */ C:\fw\midicontroller\x011a\controller.c
00134a   0101     MOVLB     0x1            				curr_mapindex = 0;                                                           C:\fw\midicontroller\x011a\controller.c
00134c   6b58     CLRF      0x58,0x1                                                                                        
00134e   6ae6     CLRF      0xe6,0x0       				bankmap_activate(0);                                                         C:\fw\midicontroller\x011a\controller.c
001350   dca6     RCALL     0xc9e                                                                                           
001352   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001354   d005     BRA       0x1360         			} else {                                                                      C:\fw\midicontroller\x011a\controller.c
                                           				/* activate the next map for the new bank, and display the MIDI program # */ C:\fw\midicontroller\x011a\controller.c
001356   2b58     INCF      0x58,0x1,0x1   				++curr_mapindex;                                                             C:\fw\midicontroller\x011a\controller.c
001358   0e01     MOVLW     0x1            				bankmap_activate(1);                                                         C:\fw\midicontroller\x011a\controller.c
00135a   6ee6     MOVWF     0xe6,0x0                                                                                        
00135c   dca0     RCALL     0xc9e                                                                                           
00135e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           			}                                                                             C:\fw\midicontroller\x011a\controller.c
                                           		}                                                                              C:\fw\midicontroller\x011a\controller.c
                                           	}                                                                               C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           	/* PRACTICE vs. CONCERT modes: */                                               C:\fw\midicontroller\x011a\controller.c
001360   0101     MOVLB     0x1            	switch (mode) {                                                                 C:\fw\midicontroller\x011a\controller.c
001362   5164     MOVF      0x64,0x0,0x1                                                                                    
001364   0a01     XORLW     0x1                                                                                             
001366   e101     BNZ       0x136a                                                                                          
001368   d317     BRA       0x1998                                                                                          
00136a   0a01     XORLW     0x1                                                                                             
00136c   e002     BZ        0x1372                                                                                          
00136e   efb6     GOTO      0x1d6c                                                                                          
001370   f00e                                                                                                               
                                           		case MODE_PRACTICE:                                                            C:\fw\midicontroller\x011a\controller.c
                                           			/* PRACTICE mode has sub-modes of its own: */                                 C:\fw\midicontroller\x011a\controller.c
001372   0101     MOVLB     0x1            			switch (program_mode) {                                                       C:\fw\midicontroller\x011a\controller.c
001374   5174     MOVF      0x74,0x0,0x1                                                                                    
001376   0a02     XORLW     0x2                                                                                             
001378   e101     BNZ       0x137c                                                                                          
00137a   d2d8     BRA       0x192c                                                                                          
00137c   0a03     XORLW     0x3                                                                                             
00137e   e101     BNZ       0x1382                                                                                          
001380   d23a     BRA       0x17f6                                                                                          
001382   0a01     XORLW     0x1                                                                                             
001384   e001     BZ        0x1388                                                                                          
001386   d307     BRA       0x1996                                                                                          
                                           				case PROGRAM_NONE:                                                           C:\fw\midicontroller\x011a\controller.c
                                           					/* one of preset 1-4 pressed: */                                            C:\fw\midicontroller\x011a\controller.c
001388   0e01     MOVLW     0x1            					if (button_pressed(FSM_PRESET_1)) {                                         C:\fw\midicontroller\x011a\controller.c
00138a   6ee6     MOVWF     0xe6,0x0                                                                                        
00138c   6ae6     CLRF      0xe6,0x0                                                                                        
00138e   dd39     RCALL     0xe02                                                                                           
001390   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001392   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001394   0900     IORLW     0x0                                                                                             
001396   e00e     BZ        0x13b4                                                                                          
001398   0101     MOVLB     0x1            						curr_preset = 0;                                                           C:\fw\midicontroller\x011a\controller.c
00139a   6b57     CLRF      0x57,0x1                                                                                        
00139c   0101     MOVLB     0x1            						if (incdec_mode == 1) {                                                    C:\fw\midicontroller\x011a\controller.c
00139e   0586     DECF      0x86,0x0,0x1                                                                                    
0013a0   e105     BNZ       0x13ac                                                                                          
                                           							/* check if held for ~300msec */                                          C:\fw\midicontroller\x011a\controller.c
0013a2   0e1e     MOVLW     0x1e           							cdtimer_store = 30;                                                       C:\fw\midicontroller\x011a\controller.c
0013a4   6f6c     MOVWF     0x6c,0x1                                                                                        
0013a6   6b6d     CLRF      0x6d,0x1                                                                                        
0013a8   6b85     CLRF      0x85,0x1       							store_state = 0;                                                          C:\fw\midicontroller\x011a\controller.c
0013aa   d004     BRA       0x13b4         						} else {                                                                   C:\fw\midicontroller\x011a\controller.c
0013ac   0e01     MOVLW     0x1            							preset_activate(1);                                                       C:\fw\midicontroller\x011a\controller.c
0013ae   6ee6     MOVWF     0xe6,0x0                                                                                        
0013b0   dc51     RCALL     0xc54                                                                                           
0013b2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
0013b4   0e02     MOVLW     0x2            					if (button_pressed(FSM_PRESET_2)) {                                         C:\fw\midicontroller\x011a\controller.c
0013b6   6ee6     MOVWF     0xe6,0x0                                                                                        
0013b8   6ae6     CLRF      0xe6,0x0                                                                                        
0013ba   dd23     RCALL     0xe02                                                                                           
0013bc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013be   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013c0   0900     IORLW     0x0                                                                                             
0013c2   e00f     BZ        0x13e2                                                                                          
0013c4   0101     MOVLB     0x1            						curr_preset = 1;                                                           C:\fw\midicontroller\x011a\controller.c
0013c6   0e01     MOVLW     0x1                                                                                             
0013c8   6f57     MOVWF     0x57,0x1                                                                                        
0013ca   0101     MOVLB     0x1            						if (incdec_mode == 1) {                                                    C:\fw\midicontroller\x011a\controller.c
0013cc   0586     DECF      0x86,0x0,0x1                                                                                    
0013ce   e105     BNZ       0x13da                                                                                          
                                           							/* check if held for ~300msec */                                          C:\fw\midicontroller\x011a\controller.c
0013d0   0e1e     MOVLW     0x1e           							cdtimer_store = 30;                                                       C:\fw\midicontroller\x011a\controller.c
0013d2   6f6c     MOVWF     0x6c,0x1                                                                                        
0013d4   6b6d     CLRF      0x6d,0x1                                                                                        
0013d6   6b85     CLRF      0x85,0x1       							store_state = 0;                                                          C:\fw\midicontroller\x011a\controller.c
0013d8   d004     BRA       0x13e2         						} else {                                                                   C:\fw\midicontroller\x011a\controller.c
0013da   0e01     MOVLW     0x1            							preset_activate(1);                                                       C:\fw\midicontroller\x011a\controller.c
0013dc   6ee6     MOVWF     0xe6,0x0                                                                                        
0013de   dc3a     RCALL     0xc54                                                                                           
0013e0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
0013e2   0e04     MOVLW     0x4            					if (button_pressed(FSM_PRESET_3)) {                                         C:\fw\midicontroller\x011a\controller.c
0013e4   6ee6     MOVWF     0xe6,0x0                                                                                        
0013e6   6ae6     CLRF      0xe6,0x0                                                                                        
0013e8   dd0c     RCALL     0xe02                                                                                           
0013ea   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013ec   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0013ee   0900     IORLW     0x0                                                                                             
0013f0   e00f     BZ        0x1410                                                                                          
0013f2   0101     MOVLB     0x1            						curr_preset = 2;                                                           C:\fw\midicontroller\x011a\controller.c
0013f4   0e02     MOVLW     0x2                                                                                             
0013f6   6f57     MOVWF     0x57,0x1                                                                                        
0013f8   0101     MOVLB     0x1            						if (incdec_mode == 1) {                                                    C:\fw\midicontroller\x011a\controller.c
0013fa   0586     DECF      0x86,0x0,0x1                                                                                    
0013fc   e105     BNZ       0x1408                                                                                          
                                           							/* check if held for ~300msec */                                          C:\fw\midicontroller\x011a\controller.c
0013fe   0e1e     MOVLW     0x1e           							cdtimer_store = 30;                                                       C:\fw\midicontroller\x011a\controller.c
001400   6f6c     MOVWF     0x6c,0x1                                                                                        
001402   6b6d     CLRF      0x6d,0x1                                                                                        
001404   6b85     CLRF      0x85,0x1       							store_state = 0;                                                          C:\fw\midicontroller\x011a\controller.c
001406   d004     BRA       0x1410         						} else {                                                                   C:\fw\midicontroller\x011a\controller.c
001408   0e01     MOVLW     0x1            							preset_activate(1);                                                       C:\fw\midicontroller\x011a\controller.c
00140a   6ee6     MOVWF     0xe6,0x0                                                                                        
00140c   dc23     RCALL     0xc54                                                                                           
00140e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
001410   0e08     MOVLW     0x8            					if (button_pressed(FSM_PRESET_4)) {                                         C:\fw\midicontroller\x011a\controller.c
001412   6ee6     MOVWF     0xe6,0x0                                                                                        
001414   6ae6     CLRF      0xe6,0x0                                                                                        
001416   dcf5     RCALL     0xe02                                                                                           
001418   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00141a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00141c   0900     IORLW     0x0                                                                                             
00141e   e00f     BZ        0x143e                                                                                          
001420   0101     MOVLB     0x1            						curr_preset = 3;                                                           C:\fw\midicontroller\x011a\controller.c
001422   0e03     MOVLW     0x3                                                                                             
001424   6f57     MOVWF     0x57,0x1                                                                                        
001426   0101     MOVLB     0x1            						if (incdec_mode == 1) {                                                    C:\fw\midicontroller\x011a\controller.c
001428   0586     DECF      0x86,0x0,0x1                                                                                    
00142a   e105     BNZ       0x1436                                                                                          
                                           							/* check if held for ~300msec */                                          C:\fw\midicontroller\x011a\controller.c
00142c   0e1e     MOVLW     0x1e           							cdtimer_store = 30;                                                       C:\fw\midicontroller\x011a\controller.c
00142e   6f6c     MOVWF     0x6c,0x1                                                                                        
001430   6b6d     CLRF      0x6d,0x1                                                                                        
001432   6b85     CLRF      0x85,0x1       							store_state = 0;                                                          C:\fw\midicontroller\x011a\controller.c
001434   d004     BRA       0x143e         						} else {                                                                   C:\fw\midicontroller\x011a\controller.c
001436   0e01     MOVLW     0x1            							preset_activate(1);                                                       C:\fw\midicontroller\x011a\controller.c
001438   6ee6     MOVWF     0xe6,0x0                                                                                        
00143a   dc0c     RCALL     0xc54                                                                                           
00143c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
00143e   0101     MOVLB     0x1            					if (incdec_mode == 1) {                                                     C:\fw\midicontroller\x011a\controller.c
001440   0586     DECF      0x86,0x0,0x1                                                                                    
001442   e001     BZ        0x1446                                                                                          
001444   d087     BRA       0x1554                                                                                          
                                           						/* check if the store-timer ran out and we're able to store: */            C:\fw\midicontroller\x011a\controller.c
001446   516c     MOVF      0x6c,0x0,0x1   						if ((cdtimer_store == 0) && (store_state == 0)) {                          C:\fw\midicontroller\x011a\controller.c
001448   116d     IORWF     0x6d,0x0,0x1                                                                                    
00144a   e153     BNZ       0x14f2                                                                                          
00144c   5185     MOVF      0x85,0x0,0x1                                                                                    
00144e   e151     BNZ       0x14f2                                                                                          
                                           							/* still holding a button? */                                             C:\fw\midicontroller\x011a\controller.c
001450   0e01     MOVLW     0x1            							if (button_held(FSM_PRESET_1) || button_held(FSM_PRESET_2) || button_held(FSM_PRESET_3) || button_held(FSM_PRESET_4)) { C:\fw\midicontroller\x011a\controller.c
001452   6ee6     MOVWF     0xe6,0x0                                                                                        
001454   6ae6     CLRF      0xe6,0x0                                                                                        
001456   dd04     RCALL     0xe60                                                                                           
001458   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00145a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00145c   0900     IORLW     0x0                                                                                             
00145e   e118     BNZ       0x1490                                                                                          
001460   0e02     MOVLW     0x2                                                                                             
001462   6ee6     MOVWF     0xe6,0x0                                                                                        
001464   6ae6     CLRF      0xe6,0x0                                                                                        
001466   dcfc     RCALL     0xe60                                                                                           
001468   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00146a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00146c   0900     IORLW     0x0                                                                                             
00146e   e110     BNZ       0x1490                                                                                          
001470   0e04     MOVLW     0x4                                                                                             
001472   6ee6     MOVWF     0xe6,0x0                                                                                        
001474   6ae6     CLRF      0xe6,0x0                                                                                        
001476   dcf4     RCALL     0xe60                                                                                           
001478   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00147a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00147c   0900     IORLW     0x0                                                                                             
00147e   e108     BNZ       0x1490                                                                                          
001480   0e08     MOVLW     0x8                                                                                             
001482   6ee6     MOVWF     0xe6,0x0                                                                                        
001484   6ae6     CLRF      0xe6,0x0                                                                                        
001486   dcec     RCALL     0xe60                                                                                           
001488   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00148a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00148c   0900     IORLW     0x0                                                                                             
00148e   e031     BZ        0x14f2                                                                                          
                                           								/* store the program */                                                  C:\fw\midicontroller\x011a\controller.c
001490   0101     MOVLB     0x1            								store_state = 1;                                                         C:\fw\midicontroller\x011a\controller.c
001492   0e01     MOVLW     0x1                                                                                             
001494   6f85     MOVWF     0x85,0x1                                                                                        
001496   0101     MOVLB     0x1            								bank[curr_preset] = curr_program;                                        C:\fw\midicontroller\x011a\controller.c
001498   5157     MOVF      0x57,0x0,0x1                                                                                    
00149a   6aea     CLRF      0xea,0x0                                                                                        
00149c   0f41     ADDLW     0x41                                                                                            
00149e   6ee9     MOVWF     0xe9,0x0                                                                                        
0014a0   0e01     MOVLW     0x1                                                                                             
0014a2   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0014a4   c156     MOVFF     0x156,0xfef                                                                                     
0014a6   ffef                                                                                                               
0014a8   c151     MOVFF     0x151,0xfe6    								bank_store(curr_bank, bank, bankcontroller, bankmap, bankmap_count);     C:\fw\midicontroller\x011a\controller.c
0014aa   ffe6                                                                                                               
0014ac   0e49     MOVLW     0x49                                                                                            
0014ae   6ee6     MOVWF     0xe6,0x0                                                                                        
0014b0   0e01     MOVLW     0x1                                                                                             
0014b2   6ee6     MOVWF     0xe6,0x0                                                                                        
0014b4   0e45     MOVLW     0x45                                                                                            
0014b6   6ee6     MOVWF     0xe6,0x0                                                                                        
0014b8   0e01     MOVLW     0x1                                                                                             
0014ba   6ee6     MOVWF     0xe6,0x0                                                                                        
0014bc   0e41     MOVLW     0x41                                                                                            
0014be   6ee6     MOVWF     0xe6,0x0                                                                                        
0014c0   0e01     MOVLW     0x1                                                                                             
0014c2   6ee6     MOVWF     0xe6,0x0                                                                                        
0014c4   c159     MOVFF     0x159,0xfe6                                                                                     
0014c6   ffe6                                                                                                               
0014c8   c15a     MOVFF     0x15a,0xfe6                                                                                     
0014ca   ffe6                                                                                                               
0014cc   ec4c     CALL      0x2898,0x0                                                                                      
0014ce   f014                                                                                                               
0014d0   6e10     MOVWF     0x10,0x0                                                                                        
0014d2   0e09     MOVLW     0x9                                                                                             
0014d4   5ee1     SUBWF     0xe1,0x1,0x0                                                                                    
0014d6   5010     MOVF      0x10,0x0,0x0                                                                                    
0014d8   0e01     MOVLW     0x1            								preset_activate(1);                                                      C:\fw\midicontroller\x011a\controller.c
0014da   6ee6     MOVWF     0xe6,0x0                                                                                        
0014dc   ec2a     CALL      0xc54,0x0                                                                                       
0014de   f006                                                                                                               
0014e0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           								/* flash the stored LED */                                               C:\fw\midicontroller\x011a\controller.c
0014e2   0101     MOVLB     0x1            								flash_state = FLASH_STORE;                                               C:\fw\midicontroller\x011a\controller.c
0014e4   0e01     MOVLW     0x1                                                                                             
0014e6   6f73     MOVWF     0x73,0x1                                                                                        
0014e8   c157     MOVFF     0x157,0x175    								flash_led = curr_preset;                                                 C:\fw\midicontroller\x011a\controller.c
0014ea   f175                                                                                                               
0014ec   0e64     MOVLW     0x64           								cdtimer_flash = 100;                                                     C:\fw\midicontroller\x011a\controller.c
0014ee   6f6a     MOVWF     0x6a,0x1                                                                                        
0014f0   6b6b     CLRF      0x6b,0x1                                                                                        
                                           							}                                                                         C:\fw\midicontroller\x011a\controller.c
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
                                           						/* check if a button was released: */                                      C:\fw\midicontroller\x011a\controller.c
0014f2   0e01     MOVLW     0x1            						if (button_released(FSM_PRESET_1) || button_released(FSM_PRESET_2) || button_released(FSM_PRESET_3) || button_released(FSM_PRESET_4)) { C:\fw\midicontroller\x011a\controller.c
0014f4   6ee6     MOVWF     0xe6,0x0                                                                                        
0014f6   6ae6     CLRF      0xe6,0x0                                                                                        
0014f8   dcd3     RCALL     0xea0                                                                                           
0014fa   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014fc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0014fe   0900     IORLW     0x0                                                                                             
001500   e118     BNZ       0x1532                                                                                          
001502   0e02     MOVLW     0x2                                                                                             
001504   6ee6     MOVWF     0xe6,0x0                                                                                        
001506   6ae6     CLRF      0xe6,0x0                                                                                        
001508   dccb     RCALL     0xea0                                                                                           
00150a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00150c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00150e   0900     IORLW     0x0                                                                                             
001510   e110     BNZ       0x1532                                                                                          
001512   0e04     MOVLW     0x4                                                                                             
001514   6ee6     MOVWF     0xe6,0x0                                                                                        
001516   6ae6     CLRF      0xe6,0x0                                                                                        
001518   dcc3     RCALL     0xea0                                                                                           
00151a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00151c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00151e   0900     IORLW     0x0                                                                                             
001520   e108     BNZ       0x1532                                                                                          
001522   0e08     MOVLW     0x8                                                                                             
001524   6ee6     MOVWF     0xe6,0x0                                                                                        
001526   6ae6     CLRF      0xe6,0x0                                                                                        
001528   dcbb     RCALL     0xea0                                                                                           
00152a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00152c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00152e   0900     IORLW     0x0                                                                                             
001530   e011     BZ        0x1554                                                                                          
001532   0101     MOVLB     0x1            							if ((cdtimer_store > 0) && (store_state == 0)) {                          C:\fw\midicontroller\x011a\controller.c
001534   0e00     MOVLW     0x0                                                                                             
001536   80d8     BSF       0xd8,0x0,0x0                                                                                    
001538   556c     SUBFWB    0x6c,0x0,0x1                                                                                    
00153a   0e00     MOVLW     0x0                                                                                             
00153c   556d     SUBFWB    0x6d,0x0,0x1                                                                                    
00153e   e20a     BC        0x1554                                                                                          
001540   5185     MOVF      0x85,0x0,0x1                                                                                    
001542   e108     BNZ       0x1554                                                                                          
                                           								/* was only tapped (held less than ~300msec) */                          C:\fw\midicontroller\x011a\controller.c
001544   0e01     MOVLW     0x1            								preset_activate(1);                                                      C:\fw\midicontroller\x011a\controller.c
001546   6ee6     MOVWF     0xe6,0x0                                                                                        
001548   ec2a     CALL      0xc54,0x0                                                                                       
00154a   f006                                                                                                               
00154c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00154e   0101     MOVLB     0x1            								cdtimer_store = 0;                                                       C:\fw\midicontroller\x011a\controller.c
001550   6b6c     CLRF      0x6c,0x1                                                                                        
001552   6b6d     CLRF      0x6d,0x1                                                                                        
                                           							}                                                                         C:\fw\midicontroller\x011a\controller.c
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           					/* INC pressed: */                                                          C:\fw\midicontroller\x011a\controller.c
001554   0e00     MOVLW     0x0            					if (button_pressed(FSM_INC) && !button_held(FSM_DEC) && (cdtimer_incdec_held == 0)) { C:\fw\midicontroller\x011a\controller.c
001556   6ee6     MOVWF     0xe6,0x0                                                                                        
001558   6ae6     CLRF      0xe6,0x0                                                                                        
00155a   dc53     RCALL     0xe02                                                                                           
00155c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00155e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001560   0900     IORLW     0x0                                                                                             
001562   e00f     BZ        0x1582                                                                                          
001564   0e00     MOVLW     0x0                                                                                             
001566   6ee6     MOVWF     0xe6,0x0                                                                                        
001568   6ae6     CLRF      0xe6,0x0                                                                                        
00156a   dc7a     RCALL     0xe60                                                                                           
00156c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00156e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001570   0900     IORLW     0x0                                                                                             
001572   e107     BNZ       0x1582                                                                                          
001574   0101     MOVLB     0x1                                                                                             
001576   516e     MOVF      0x6e,0x0,0x1                                                                                    
001578   116f     IORWF     0x6f,0x0,0x1                                                                                    
00157a   e103     BNZ       0x1582                                                                                          
                                           						/* INC pushed first */                                                     C:\fw\midicontroller\x011a\controller.c
00157c   0e1e     MOVLW     0x1e           						cdtimer_incdec_held = 30;                                                  C:\fw\midicontroller\x011a\controller.c
00157e   6f6e     MOVWF     0x6e,0x1                                                                                        
001580   6b6f     CLRF      0x6f,0x1                                                                                        
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
                                           					/* Still holding INC alone after ~300 ms: */                                C:\fw\midicontroller\x011a\controller.c
001582   0101     MOVLB     0x1            					if ((accel_state == ACCEL_NONE) && button_held(FSM_INC) && !button_held(FSM_DEC) && (cdtimer_incdec_held == 0)) { C:\fw\midicontroller\x011a\controller.c
001584   5172     MOVF      0x72,0x0,0x1                                                                                    
001586   e11b     BNZ       0x15be                                                                                          
001588   0e00     MOVLW     0x0                                                                                             
00158a   6ee6     MOVWF     0xe6,0x0                                                                                        
00158c   6ae6     CLRF      0xe6,0x0                                                                                        
00158e   dc68     RCALL     0xe60                                                                                           
001590   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001592   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001594   0900     IORLW     0x0                                                                                             
001596   e013     BZ        0x15be                                                                                          
001598   0e00     MOVLW     0x0                                                                                             
00159a   6ee6     MOVWF     0xe6,0x0                                                                                        
00159c   6ae6     CLRF      0xe6,0x0                                                                                        
00159e   dc60     RCALL     0xe60                                                                                           
0015a0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015a2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015a4   0900     IORLW     0x0                                                                                             
0015a6   e10b     BNZ       0x15be                                                                                          
0015a8   0101     MOVLB     0x1                                                                                             
0015aa   516e     MOVF      0x6e,0x0,0x1                                                                                    
0015ac   116f     IORWF     0x6f,0x0,0x1                                                                                    
0015ae   e107     BNZ       0x15be                                                                                          
0015b0   0101     MOVLB     0x1            						accel_time = 0;                                                            C:\fw\midicontroller\x011a\controller.c
0015b2   6b61     CLRF      0x61,0x1                                                                                        
0015b4   6b62     CLRF      0x62,0x1                                                                                        
0015b6   6b63     CLRF      0x63,0x1       						accel_count = 0;                                                           C:\fw\midicontroller\x011a\controller.c
0015b8   0101     MOVLB     0x1            						accel_state = ACCEL_INC_SLOW;                                              C:\fw\midicontroller\x011a\controller.c
0015ba   0e01     MOVLW     0x1                                                                                             
0015bc   6f72     MOVWF     0x72,0x1                                                                                        
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
                                           					/* INC released: */                                                         C:\fw\midicontroller\x011a\controller.c
0015be   0e00     MOVLW     0x0            					if (button_released(FSM_INC)) {                                             C:\fw\midicontroller\x011a\controller.c
0015c0   6ee6     MOVWF     0xe6,0x0                                                                                        
0015c2   6ae6     CLRF      0xe6,0x0                                                                                        
0015c4   dc6d     RCALL     0xea0                                                                                           
0015c6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015c8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015ca   0900     IORLW     0x0                                                                                             
0015cc   e00c     BZ        0x15e6                                                                                          
0015ce   0101     MOVLB     0x1            						if (cdtimer_incdec_held > 0) {                                             C:\fw\midicontroller\x011a\controller.c
0015d0   0e00     MOVLW     0x0                                                                                             
0015d2   80d8     BSF       0xd8,0x0,0x0                                                                                    
0015d4   556e     SUBFWB    0x6e,0x0,0x1                                                                                    
0015d6   0e00     MOVLW     0x0                                                                                             
0015d8   556f     SUBFWB    0x6f,0x0,0x1                                                                                    
0015da   e202     BC        0x15e0                                                                                          
0015dc   dd93     RCALL     0x1104         							inc_practice_value();                                                     C:\fw\midicontroller\x011a\controller.c
0015de   ddce     RCALL     0x117c         							notify_practice_value();                                                  C:\fw\midicontroller\x011a\controller.c
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
0015e0   0101     MOVLB     0x1            						accel_state = ACCEL_NONE;                                                  C:\fw\midicontroller\x011a\controller.c
0015e2   6b72     CLRF      0x72,0x1                                                                                        
0015e4   ddd2     RCALL     0x118a         						activate_practice_value();                                                 C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           					/* DEC pressed: */                                                          C:\fw\midicontroller\x011a\controller.c
0015e6   0e00     MOVLW     0x0            					if (button_pressed(FSM_DEC) && !button_held(FSM_INC) && (cdtimer_incdec_held == 0)) { C:\fw\midicontroller\x011a\controller.c
0015e8   6ee6     MOVWF     0xe6,0x0                                                                                        
0015ea   6ae6     CLRF      0xe6,0x0                                                                                        
0015ec   dc0a     RCALL     0xe02                                                                                           
0015ee   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015f0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0015f2   0900     IORLW     0x0                                                                                             
0015f4   e00f     BZ        0x1614                                                                                          
0015f6   0e00     MOVLW     0x0                                                                                             
0015f8   6ee6     MOVWF     0xe6,0x0                                                                                        
0015fa   6ae6     CLRF      0xe6,0x0                                                                                        
0015fc   dc31     RCALL     0xe60                                                                                           
0015fe   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001600   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001602   0900     IORLW     0x0                                                                                             
001604   e107     BNZ       0x1614                                                                                          
001606   0101     MOVLB     0x1                                                                                             
001608   516e     MOVF      0x6e,0x0,0x1                                                                                    
00160a   116f     IORWF     0x6f,0x0,0x1                                                                                    
00160c   e103     BNZ       0x1614                                                                                          
                                           						/* DEC pushed first */                                                     C:\fw\midicontroller\x011a\controller.c
00160e   0e1e     MOVLW     0x1e           						cdtimer_incdec_held = 30;                                                  C:\fw\midicontroller\x011a\controller.c
001610   6f6e     MOVWF     0x6e,0x1                                                                                        
001612   6b6f     CLRF      0x6f,0x1                                                                                        
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
                                           					/* Still holding DEC alone after ~300 ms: */                                C:\fw\midicontroller\x011a\controller.c
001614   0101     MOVLB     0x1            					if ((accel_state == ACCEL_NONE) && button_held(FSM_DEC) && !button_held(FSM_INC) && (cdtimer_incdec_held == 0)) { C:\fw\midicontroller\x011a\controller.c
001616   5172     MOVF      0x72,0x0,0x1                                                                                    
001618   e11b     BNZ       0x1650                                                                                          
00161a   0e00     MOVLW     0x0                                                                                             
00161c   6ee6     MOVWF     0xe6,0x0                                                                                        
00161e   6ae6     CLRF      0xe6,0x0                                                                                        
001620   dc1f     RCALL     0xe60                                                                                           
001622   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001624   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001626   0900     IORLW     0x0                                                                                             
001628   e013     BZ        0x1650                                                                                          
00162a   0e00     MOVLW     0x0                                                                                             
00162c   6ee6     MOVWF     0xe6,0x0                                                                                        
00162e   6ae6     CLRF      0xe6,0x0                                                                                        
001630   dc17     RCALL     0xe60                                                                                           
001632   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001634   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001636   0900     IORLW     0x0                                                                                             
001638   e10b     BNZ       0x1650                                                                                          
00163a   0101     MOVLB     0x1                                                                                             
00163c   516e     MOVF      0x6e,0x0,0x1                                                                                    
00163e   116f     IORWF     0x6f,0x0,0x1                                                                                    
001640   e107     BNZ       0x1650                                                                                          
001642   0101     MOVLB     0x1            						accel_time = 0;                                                            C:\fw\midicontroller\x011a\controller.c
001644   6b61     CLRF      0x61,0x1                                                                                        
001646   6b62     CLRF      0x62,0x1                                                                                        
001648   6b63     CLRF      0x63,0x1       						accel_count = 0;                                                           C:\fw\midicontroller\x011a\controller.c
00164a   0101     MOVLB     0x1            						accel_state = ACCEL_DEC_SLOW;                                              C:\fw\midicontroller\x011a\controller.c
00164c   0e04     MOVLW     0x4                                                                                             
00164e   6f72     MOVWF     0x72,0x1                                                                                        
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
                                           					/* DEC released: */                                                         C:\fw\midicontroller\x011a\controller.c
001650   0e00     MOVLW     0x0            					if (button_released(FSM_DEC)) {                                             C:\fw\midicontroller\x011a\controller.c
001652   6ee6     MOVWF     0xe6,0x0                                                                                        
001654   6ae6     CLRF      0xe6,0x0                                                                                        
001656   dc24     RCALL     0xea0                                                                                           
001658   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00165a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00165c   0900     IORLW     0x0                                                                                             
00165e   e00c     BZ        0x1678                                                                                          
001660   0101     MOVLB     0x1            						if (cdtimer_incdec_held > 0) {                                             C:\fw\midicontroller\x011a\controller.c
001662   0e00     MOVLW     0x0                                                                                             
001664   80d8     BSF       0xd8,0x0,0x0                                                                                    
001666   556e     SUBFWB    0x6e,0x0,0x1                                                                                    
001668   0e00     MOVLW     0x0                                                                                             
00166a   556f     SUBFWB    0x6f,0x0,0x1                                                                                    
00166c   e202     BC        0x1672                                                                                          
00166e   dd6a     RCALL     0x1144         							dec_practice_value();                                                     C:\fw\midicontroller\x011a\controller.c
001670   dd85     RCALL     0x117c         							notify_practice_value();                                                  C:\fw\midicontroller\x011a\controller.c
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
001672   0101     MOVLB     0x1            						accel_state = ACCEL_NONE;                                                  C:\fw\midicontroller\x011a\controller.c
001674   6b72     CLRF      0x72,0x1                                                                                        
001676   dd89     RCALL     0x118a         						activate_practice_value();                                                 C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           					/* ENTER pressed */                                                         C:\fw\midicontroller\x011a\controller.c
001678   0e00     MOVLW     0x0            					if (button_pressed(FSM_ENTER)) {                                            C:\fw\midicontroller\x011a\controller.c
00167a   6ee6     MOVWF     0xe6,0x0                                                                                        
00167c   6ae6     CLRF      0xe6,0x0                                                                                        
00167e   ec01     CALL      0xe02,0x0                                                                                       
001680   f007                                                                                                               
001682   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001684   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001686   0900     IORLW     0x0                                                                                             
001688   e004     BZ        0x1692                                                                                          
00168a   0e1e     MOVLW     0x1e           						cdtimer_holdenter = 30;                                                    C:\fw\midicontroller\x011a\controller.c
00168c   0101     MOVLB     0x1                                                                                             
00168e   6f70     MOVWF     0x70,0x1                                                                                        
001690   6b71     CLRF      0x71,0x1                                                                                        
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
                                           					/* ENTER held at least ~300msec: */                                         C:\fw\midicontroller\x011a\controller.c
001692   0e00     MOVLW     0x0            					if (button_held(FSM_ENTER) && (cdtimer_holdenter == 0) && (program_mode == PROGRAM_NONE)) { C:\fw\midicontroller\x011a\controller.c
001694   6ee6     MOVWF     0xe6,0x0                                                                                        
001696   6ae6     CLRF      0xe6,0x0                                                                                        
001698   ec30     CALL      0xe60,0x0                                                                                       
00169a   f007                                                                                                               
00169c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00169e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0016a0   0900     IORLW     0x0                                                                                             
0016a2   e00e     BZ        0x16c0                                                                                          
0016a4   0101     MOVLB     0x1                                                                                             
0016a6   5170     MOVF      0x70,0x0,0x1                                                                                    
0016a8   1171     IORWF     0x71,0x0,0x1                                                                                    
0016aa   e10a     BNZ       0x16c0                                                                                          
0016ac   5174     MOVF      0x74,0x0,0x1                                                                                    
0016ae   e108     BNZ       0x16c0                                                                                          
                                           						/* enter sequence program mode */                                          C:\fw\midicontroller\x011a\controller.c
0016b0   0e01     MOVLW     0x1            						program_mode = PROGRAM_SEQUENCE;                                           C:\fw\midicontroller\x011a\controller.c
0016b2   6f74     MOVWF     0x74,0x1                                                                                        
0016b4   0101     MOVLB     0x1            						curr_mapindex = 0;                                                         C:\fw\midicontroller\x011a\controller.c
0016b6   6b58     CLRF      0x58,0x1                                                                                        
0016b8   0e04     MOVLW     0x4            						curr_preset = 4;                                                           C:\fw\midicontroller\x011a\controller.c
0016ba   6f57     MOVWF     0x57,0x1                                                                                        
0016bc   ecd2     CALL      0xda4,0x0      						sortedbank_showname();                                                     C:\fw\midicontroller\x011a\controller.c
0016be   f006                                                                                                               
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
                                           					/* ENTER released before ~300msec was up: */                                C:\fw\midicontroller\x011a\controller.c
0016c0   0e00     MOVLW     0x0            					if (button_released(FSM_ENTER) && (cdtimer_holdenter > 0)) {                C:\fw\midicontroller\x011a\controller.c
0016c2   6ee6     MOVWF     0xe6,0x0                                                                                        
0016c4   6ae6     CLRF      0xe6,0x0                                                                                        
0016c6   ec50     CALL      0xea0,0x0                                                                                       
0016c8   f007                                                                                                               
0016ca   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0016cc   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0016ce   0900     IORLW     0x0                                                                                             
0016d0   e019     BZ        0x1704                                                                                          
0016d2   0101     MOVLB     0x1                                                                                             
0016d4   0e00     MOVLW     0x0                                                                                             
0016d6   80d8     BSF       0xd8,0x0,0x0                                                                                    
0016d8   5570     SUBFWB    0x70,0x0,0x1                                                                                    
0016da   0e00     MOVLW     0x0                                                                                             
0016dc   5571     SUBFWB    0x71,0x0,0x1                                                                                    
0016de   e212     BC        0x1704                                                                                          
0016e0   5186     MOVF      0x86,0x0,0x1   						if (incdec_mode == 0) {                                                    C:\fw\midicontroller\x011a\controller.c
0016e2   e109     BNZ       0x16f6                                                                                          
                                           							/* program-select mode */                                                 C:\fw\midicontroller\x011a\controller.c
0016e4   0e01     MOVLW     0x1            							incdec_mode = 1;                                                          C:\fw\midicontroller\x011a\controller.c
0016e6   6f86     MOVWF     0x86,0x1                                                                                        
0016e8   0e03     MOVLW     0x3            							flash_state = FLASH_PRGM_SELECT_MODE;                                     C:\fw\midicontroller\x011a\controller.c
0016ea   6f73     MOVWF     0x73,0x1                                                                                        
0016ec   0e64     MOVLW     0x64           							cdtimer_flash = 100;                                                      C:\fw\midicontroller\x011a\controller.c
0016ee   6f6a     MOVWF     0x6a,0x1                                                                                        
0016f0   6b6b     CLRF      0x6b,0x1                                                                                        
0016f2   dd44     RCALL     0x117c         							notify_practice_value();                                                  C:\fw\midicontroller\x011a\controller.c
0016f4   d007     BRA       0x1704         						} else {                                                                   C:\fw\midicontroller\x011a\controller.c
                                           							/* bank-select mode by alphabetical order */                              C:\fw\midicontroller\x011a\controller.c
0016f6   6b86     CLRF      0x86,0x1       							incdec_mode = 0;                                                          C:\fw\midicontroller\x011a\controller.c
0016f8   0e02     MOVLW     0x2            							flash_state = FLASH_BANK_SELECT_MODE;                                     C:\fw\midicontroller\x011a\controller.c
0016fa   6f73     MOVWF     0x73,0x1                                                                                        
0016fc   0e64     MOVLW     0x64           							cdtimer_flash = 100;                                                      C:\fw\midicontroller\x011a\controller.c
0016fe   6f6a     MOVWF     0x6a,0x1                                                                                        
001700   6b6b     CLRF      0x6b,0x1                                                                                        
001702   dd3c     RCALL     0x117c         							notify_practice_value();                                                  C:\fw\midicontroller\x011a\controller.c
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           					/* acceleration countdown timer hit 0 and we're incrementing slowly */      C:\fw\midicontroller\x011a\controller.c
001704   0101     MOVLB     0x1            					if ((accel_state != ACCEL_NONE) && (accel_time == 0)) {                     C:\fw\midicontroller\x011a\controller.c
001706   5172     MOVF      0x72,0x0,0x1                                                                                    
001708   e075     BZ        0x17f4                                                                                          
00170a   0101     MOVLB     0x1                                                                                             
00170c   5161     MOVF      0x61,0x0,0x1                                                                                    
00170e   1162     IORWF     0x62,0x0,0x1                                                                                    
001710   e171     BNZ       0x17f4                                                                                          
001712   0101     MOVLB     0x1            						switch (accel_state) {                                                     C:\fw\midicontroller\x011a\controller.c
001714   5172     MOVF      0x72,0x0,0x1                                                                                    
001716   0a06     XORLW     0x6                                                                                             
001718   e066     BZ        0x17e6                                                                                          
00171a   0a03     XORLW     0x3                                                                                             
00171c   e04f     BZ        0x17bc                                                                                          
00171e   0a01     XORLW     0x1                                                                                             
001720   e038     BZ        0x1792                                                                                          
001722   0a07     XORLW     0x7                                                                                             
001724   e02f     BZ        0x1784                                                                                          
001726   0a01     XORLW     0x1                                                                                             
001728   e018     BZ        0x175a                                                                                          
00172a   0a03     XORLW     0x3                                                                                             
00172c   e001     BZ        0x1730                                                                                          
00172e   d062     BRA       0x17f4                                                                                          
                                           							case ACCEL_INC_SLOW:                                                      C:\fw\midicontroller\x011a\controller.c
001730   dce9     RCALL     0x1104         								inc_practice_value();                                                    C:\fw\midicontroller\x011a\controller.c
001732   dd24     RCALL     0x117c         								notify_practice_value();                                                 C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           								/* if we cycled more than 5 values, ramp up to next speed */             C:\fw\midicontroller\x011a\controller.c
001734   0101     MOVLB     0x1            								if (accel_count++ == 5) {                                                C:\fw\midicontroller\x011a\controller.c
001736   5163     MOVF      0x63,0x0,0x1                                                                                    
001738   2b63     INCF      0x63,0x1,0x1                                                                                    
00173a   0805     SUBLW     0x5                                                                                             
00173c   e109     BNZ       0x1750                                                                                          
00173e   6b63     CLRF      0x63,0x1       									accel_count = 0;                                                        C:\fw\midicontroller\x011a\controller.c
001740   0101     MOVLB     0x1            									accel_state = ACCEL_INC_MEDIUM;                                         C:\fw\midicontroller\x011a\controller.c
001742   0e02     MOVLW     0x2                                                                                             
001744   6f72     MOVWF     0x72,0x1                                                                                        
001746   c178     MOVFF     0x178,0x161    									accel_time = accel_time_medium;                                         C:\fw\midicontroller\x011a\controller.c
001748   f161                                                                                                               
00174a   c179     MOVFF     0x179,0x162                                                                                     
00174c   f162                                                                                                               
00174e   d004     BRA       0x1758         								} else {                                                                 C:\fw\midicontroller\x011a\controller.c
001750   c176     MOVFF     0x176,0x161    									accel_time = accel_time_slow;                                           C:\fw\midicontroller\x011a\controller.c
001752   f161                                                                                                               
001754   c177     MOVFF     0x177,0x162                                                                                     
001756   f162                                                                                                               
                                           								}                                                                        C:\fw\midicontroller\x011a\controller.c
001758   d04d     BRA       0x17f4         								break;                                                                   C:\fw\midicontroller\x011a\controller.c
                                           							case ACCEL_INC_MEDIUM:                                                    C:\fw\midicontroller\x011a\controller.c
00175a   dcd4     RCALL     0x1104         								inc_practice_value();                                                    C:\fw\midicontroller\x011a\controller.c
00175c   dd0f     RCALL     0x117c         								notify_practice_value();                                                 C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           								/* if we cycled more than 5 values, ramp up to next speed */             C:\fw\midicontroller\x011a\controller.c
00175e   0101     MOVLB     0x1            								if (accel_count++ == 20) {                                               C:\fw\midicontroller\x011a\controller.c
001760   5163     MOVF      0x63,0x0,0x1                                                                                    
001762   2b63     INCF      0x63,0x1,0x1                                                                                    
001764   0814     SUBLW     0x14                                                                                            
001766   e109     BNZ       0x177a                                                                                          
001768   6b63     CLRF      0x63,0x1       									accel_count = 0;                                                        C:\fw\midicontroller\x011a\controller.c
00176a   0101     MOVLB     0x1            									accel_state = ACCEL_INC_FAST;                                           C:\fw\midicontroller\x011a\controller.c
00176c   0e03     MOVLW     0x3                                                                                             
00176e   6f72     MOVWF     0x72,0x1                                                                                        
001770   c17a     MOVFF     0x17a,0x161    									accel_time = accel_time_fast;                                           C:\fw\midicontroller\x011a\controller.c
001772   f161                                                                                                               
001774   c17b     MOVFF     0x17b,0x162                                                                                     
001776   f162                                                                                                               
001778   d004     BRA       0x1782         								} else {                                                                 C:\fw\midicontroller\x011a\controller.c
00177a   c178     MOVFF     0x178,0x161    									accel_time = accel_time_medium;                                         C:\fw\midicontroller\x011a\controller.c
00177c   f161                                                                                                               
00177e   c179     MOVFF     0x179,0x162                                                                                     
001780   f162                                                                                                               
                                           								}                                                                        C:\fw\midicontroller\x011a\controller.c
001782   d038     BRA       0x17f4         								break;                                                                   C:\fw\midicontroller\x011a\controller.c
                                           							case ACCEL_INC_FAST:                                                      C:\fw\midicontroller\x011a\controller.c
001784   dcbf     RCALL     0x1104         								inc_practice_value();                                                    C:\fw\midicontroller\x011a\controller.c
001786   dcfa     RCALL     0x117c         								notify_practice_value();                                                 C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
001788   c17a     MOVFF     0x17a,0x161    								accel_time = accel_time_fast;                                            C:\fw\midicontroller\x011a\controller.c
00178a   f161                                                                                                               
00178c   c17b     MOVFF     0x17b,0x162                                                                                     
00178e   f162                                                                                                               
001790   d031     BRA       0x17f4         								break;                                                                   C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           							case ACCEL_DEC_SLOW:                                                      C:\fw\midicontroller\x011a\controller.c
001792   dcd8     RCALL     0x1144         								dec_practice_value();                                                    C:\fw\midicontroller\x011a\controller.c
001794   dcf3     RCALL     0x117c         								notify_practice_value();                                                 C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           								/* if we cycled more than 5 values, ramp up to next speed */             C:\fw\midicontroller\x011a\controller.c
001796   0101     MOVLB     0x1            								if (accel_count++ == 5) {                                                C:\fw\midicontroller\x011a\controller.c
001798   5163     MOVF      0x63,0x0,0x1                                                                                    
00179a   2b63     INCF      0x63,0x1,0x1                                                                                    
00179c   0805     SUBLW     0x5                                                                                             
00179e   e109     BNZ       0x17b2                                                                                          
0017a0   6b63     CLRF      0x63,0x1       									accel_count = 0;                                                        C:\fw\midicontroller\x011a\controller.c
0017a2   0101     MOVLB     0x1            									accel_state = ACCEL_DEC_MEDIUM;                                         C:\fw\midicontroller\x011a\controller.c
0017a4   0e05     MOVLW     0x5                                                                                             
0017a6   6f72     MOVWF     0x72,0x1                                                                                        
0017a8   c178     MOVFF     0x178,0x161    									accel_time = accel_time_medium;                                         C:\fw\midicontroller\x011a\controller.c
0017aa   f161                                                                                                               
0017ac   c179     MOVFF     0x179,0x162                                                                                     
0017ae   f162                                                                                                               
0017b0   d004     BRA       0x17ba         								} else {                                                                 C:\fw\midicontroller\x011a\controller.c
0017b2   c176     MOVFF     0x176,0x161    									accel_time = accel_time_slow;                                           C:\fw\midicontroller\x011a\controller.c
0017b4   f161                                                                                                               
0017b6   c177     MOVFF     0x177,0x162                                                                                     
0017b8   f162                                                                                                               
                                           								}                                                                        C:\fw\midicontroller\x011a\controller.c
0017ba   d01c     BRA       0x17f4         								break;                                                                   C:\fw\midicontroller\x011a\controller.c
                                           							case ACCEL_DEC_MEDIUM:                                                    C:\fw\midicontroller\x011a\controller.c
0017bc   dcc3     RCALL     0x1144         								dec_practice_value();                                                    C:\fw\midicontroller\x011a\controller.c
0017be   dcde     RCALL     0x117c         								notify_practice_value();                                                 C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           								/* if we cycled more than 5 values, ramp up to next speed */             C:\fw\midicontroller\x011a\controller.c
0017c0   0101     MOVLB     0x1            								if (accel_count++ == 20) {                                               C:\fw\midicontroller\x011a\controller.c
0017c2   5163     MOVF      0x63,0x0,0x1                                                                                    
0017c4   2b63     INCF      0x63,0x1,0x1                                                                                    
0017c6   0814     SUBLW     0x14                                                                                            
0017c8   e109     BNZ       0x17dc                                                                                          
0017ca   6b63     CLRF      0x63,0x1       									accel_count = 0;                                                        C:\fw\midicontroller\x011a\controller.c
0017cc   0101     MOVLB     0x1            									accel_state = ACCEL_DEC_FAST;                                           C:\fw\midicontroller\x011a\controller.c
0017ce   0e06     MOVLW     0x6                                                                                             
0017d0   6f72     MOVWF     0x72,0x1                                                                                        
0017d2   c17a     MOVFF     0x17a,0x161    									accel_time = accel_time_fast;                                           C:\fw\midicontroller\x011a\controller.c
0017d4   f161                                                                                                               
0017d6   c17b     MOVFF     0x17b,0x162                                                                                     
0017d8   f162                                                                                                               
0017da   d004     BRA       0x17e4         								} else {                                                                 C:\fw\midicontroller\x011a\controller.c
0017dc   c178     MOVFF     0x178,0x161    									accel_time = accel_time_medium;                                         C:\fw\midicontroller\x011a\controller.c
0017de   f161                                                                                                               
0017e0   c179     MOVFF     0x179,0x162                                                                                     
0017e2   f162                                                                                                               
                                           								}                                                                        C:\fw\midicontroller\x011a\controller.c
0017e4   d007     BRA       0x17f4         								break;                                                                   C:\fw\midicontroller\x011a\controller.c
                                           							case ACCEL_DEC_FAST:                                                      C:\fw\midicontroller\x011a\controller.c
0017e6   dcae     RCALL     0x1144         								dec_practice_value();                                                    C:\fw\midicontroller\x011a\controller.c
0017e8   dcc9     RCALL     0x117c         								notify_practice_value();                                                 C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
0017ea   c17a     MOVFF     0x17a,0x161    								accel_time = accel_time_fast;                                            C:\fw\midicontroller\x011a\controller.c
0017ec   f161                                                                                                               
0017ee   c17b     MOVFF     0x17b,0x162                                                                                     
0017f0   f162                                                                                                               
0017f2   d000     BRA       0x17f4         								break;                                                                   C:\fw\midicontroller\x011a\controller.c
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
0017f4   d0d0     BRA       0x1996         					break;                                                                      C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           				/* sequence programming mode: */                                             C:\fw\midicontroller\x011a\controller.c
                                           				case PROGRAM_SEQUENCE:                                                       C:\fw\midicontroller\x011a\controller.c
                                           					/* one of preset 1-4 pressed: */                                            C:\fw\midicontroller\x011a\controller.c
0017f6   0e01     MOVLW     0x1            					if (button_pressed(FSM_PRESET_1)) {                                         C:\fw\midicontroller\x011a\controller.c
0017f8   6ee6     MOVWF     0xe6,0x0                                                                                        
0017fa   6ae6     CLRF      0xe6,0x0                                                                                        
0017fc   ec01     CALL      0xe02,0x0                                                                                       
0017fe   f007                                                                                                               
001800   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001802   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001804   0900     IORLW     0x0                                                                                             
001806   e01a     BZ        0x183c                                                                                          
001808   0101     MOVLB     0x1            						if (curr_preset != 0) {                                                    C:\fw\midicontroller\x011a\controller.c
00180a   5157     MOVF      0x57,0x0,0x1                                                                                    
00180c   e017     BZ        0x183c                                                                                          
00180e   6b57     CLRF      0x57,0x1       							curr_preset = 0;                                                          C:\fw\midicontroller\x011a\controller.c
001810   0e01     MOVLW     0x1            							preset_activate(1);                                                       C:\fw\midicontroller\x011a\controller.c
001812   6ee6     MOVWF     0xe6,0x0                                                                                        
001814   ec2a     CALL      0xc54,0x0                                                                                       
001816   f006                                                                                                               
001818   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00181a   0101     MOVLB     0x1            							bankmap[curr_mapindex++] = curr_preset;                                   C:\fw\midicontroller\x011a\controller.c
00181c   5158     MOVF      0x58,0x0,0x1                                                                                    
00181e   2b58     INCF      0x58,0x1,0x1                                                                                    
001820   6aea     CLRF      0xea,0x0                                                                                        
001822   0f49     ADDLW     0x49                                                                                            
001824   6ee9     MOVWF     0xe9,0x0                                                                                        
001826   0e01     MOVLW     0x1                                                                                             
001828   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
00182a   c157     MOVFF     0x157,0xfef                                                                                     
00182c   ffef                                                                                                               
00182e   ec48     CALL      0xc90,0x0      							bankmap_show();                                                           C:\fw\midicontroller\x011a\controller.c
001830   f006                                                                                                               
                                           							/* just stored our last sequence: */                                      C:\fw\midicontroller\x011a\controller.c
001832   0e08     MOVLW     0x8            							if (curr_mapindex == 8) {                                                 C:\fw\midicontroller\x011a\controller.c
001834   0101     MOVLB     0x1                                                                                             
001836   5d58     SUBWF     0x58,0x0,0x1                                                                                    
001838   e101     BNZ       0x183c                                                                                          
00183a   dcb3     RCALL     0x11a2         								sequence_complete();                                                     C:\fw\midicontroller\x011a\controller.c
                                           							}                                                                         C:\fw\midicontroller\x011a\controller.c
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
00183c   0e02     MOVLW     0x2            					if (button_pressed(FSM_PRESET_2)) {                                         C:\fw\midicontroller\x011a\controller.c
00183e   6ee6     MOVWF     0xe6,0x0                                                                                        
001840   6ae6     CLRF      0xe6,0x0                                                                                        
001842   ec01     CALL      0xe02,0x0                                                                                       
001844   f007                                                                                                               
001846   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001848   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00184a   0900     IORLW     0x0                                                                                             
00184c   e01a     BZ        0x1882                                                                                          
00184e   0101     MOVLB     0x1            						if (curr_preset != 1) {                                                    C:\fw\midicontroller\x011a\controller.c
001850   0557     DECF      0x57,0x0,0x1                                                                                    
001852   e017     BZ        0x1882                                                                                          
001854   0e01     MOVLW     0x1            							curr_preset = 1;                                                          C:\fw\midicontroller\x011a\controller.c
001856   6f57     MOVWF     0x57,0x1                                                                                        
001858   6ee6     MOVWF     0xe6,0x0       							preset_activate(1);                                                       C:\fw\midicontroller\x011a\controller.c
00185a   ec2a     CALL      0xc54,0x0                                                                                       
00185c   f006                                                                                                               
00185e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001860   0101     MOVLB     0x1            							bankmap[curr_mapindex++] = curr_preset;                                   C:\fw\midicontroller\x011a\controller.c
001862   5158     MOVF      0x58,0x0,0x1                                                                                    
001864   2b58     INCF      0x58,0x1,0x1                                                                                    
001866   6aea     CLRF      0xea,0x0                                                                                        
001868   0f49     ADDLW     0x49                                                                                            
00186a   6ee9     MOVWF     0xe9,0x0                                                                                        
00186c   0e01     MOVLW     0x1                                                                                             
00186e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001870   c157     MOVFF     0x157,0xfef                                                                                     
001872   ffef                                                                                                               
001874   ec48     CALL      0xc90,0x0      							bankmap_show();                                                           C:\fw\midicontroller\x011a\controller.c
001876   f006                                                                                                               
                                           							/* just stored our last sequence: */                                      C:\fw\midicontroller\x011a\controller.c
001878   0e08     MOVLW     0x8            							if (curr_mapindex == 8) {                                                 C:\fw\midicontroller\x011a\controller.c
00187a   0101     MOVLB     0x1                                                                                             
00187c   5d58     SUBWF     0x58,0x0,0x1                                                                                    
00187e   e101     BNZ       0x1882                                                                                          
001880   dc90     RCALL     0x11a2         								sequence_complete();                                                     C:\fw\midicontroller\x011a\controller.c
                                           							}                                                                         C:\fw\midicontroller\x011a\controller.c
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
001882   0e04     MOVLW     0x4            					if (button_pressed(FSM_PRESET_3)) {                                         C:\fw\midicontroller\x011a\controller.c
001884   6ee6     MOVWF     0xe6,0x0                                                                                        
001886   6ae6     CLRF      0xe6,0x0                                                                                        
001888   ec01     CALL      0xe02,0x0                                                                                       
00188a   f007                                                                                                               
00188c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00188e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001890   0900     IORLW     0x0                                                                                             
001892   e01c     BZ        0x18cc                                                                                          
001894   0e02     MOVLW     0x2            						if (curr_preset != 2) {                                                    C:\fw\midicontroller\x011a\controller.c
001896   0101     MOVLB     0x1                                                                                             
001898   5d57     SUBWF     0x57,0x0,0x1                                                                                    
00189a   e018     BZ        0x18cc                                                                                          
00189c   0e02     MOVLW     0x2            							curr_preset = 2;                                                          C:\fw\midicontroller\x011a\controller.c
00189e   6f57     MOVWF     0x57,0x1                                                                                        
0018a0   0e01     MOVLW     0x1            							preset_activate(1);                                                       C:\fw\midicontroller\x011a\controller.c
0018a2   6ee6     MOVWF     0xe6,0x0                                                                                        
0018a4   ec2a     CALL      0xc54,0x0                                                                                       
0018a6   f006                                                                                                               
0018a8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0018aa   0101     MOVLB     0x1            							bankmap[curr_mapindex++] = curr_preset;                                   C:\fw\midicontroller\x011a\controller.c
0018ac   5158     MOVF      0x58,0x0,0x1                                                                                    
0018ae   2b58     INCF      0x58,0x1,0x1                                                                                    
0018b0   6aea     CLRF      0xea,0x0                                                                                        
0018b2   0f49     ADDLW     0x49                                                                                            
0018b4   6ee9     MOVWF     0xe9,0x0                                                                                        
0018b6   0e01     MOVLW     0x1                                                                                             
0018b8   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
0018ba   c157     MOVFF     0x157,0xfef                                                                                     
0018bc   ffef                                                                                                               
0018be   ec48     CALL      0xc90,0x0      							bankmap_show();                                                           C:\fw\midicontroller\x011a\controller.c
0018c0   f006                                                                                                               
                                           							/* just stored our last sequence: */                                      C:\fw\midicontroller\x011a\controller.c
0018c2   0e08     MOVLW     0x8            							if (curr_mapindex == 8) {                                                 C:\fw\midicontroller\x011a\controller.c
0018c4   0101     MOVLB     0x1                                                                                             
0018c6   5d58     SUBWF     0x58,0x0,0x1                                                                                    
0018c8   e101     BNZ       0x18cc                                                                                          
0018ca   dc6b     RCALL     0x11a2         								sequence_complete();                                                     C:\fw\midicontroller\x011a\controller.c
                                           							}                                                                         C:\fw\midicontroller\x011a\controller.c
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
0018cc   0e08     MOVLW     0x8            					if (button_pressed(FSM_PRESET_4)) {                                         C:\fw\midicontroller\x011a\controller.c
0018ce   6ee6     MOVWF     0xe6,0x0                                                                                        
0018d0   6ae6     CLRF      0xe6,0x0                                                                                        
0018d2   ec01     CALL      0xe02,0x0                                                                                       
0018d4   f007                                                                                                               
0018d6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0018d8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0018da   0900     IORLW     0x0                                                                                             
0018dc   e01c     BZ        0x1916                                                                                          
0018de   0e03     MOVLW     0x3            						if (curr_preset != 3) {                                                    C:\fw\midicontroller\x011a\controller.c
0018e0   0101     MOVLB     0x1                                                                                             
0018e2   5d57     SUBWF     0x57,0x0,0x1                                                                                    
0018e4   e018     BZ        0x1916                                                                                          
0018e6   0e03     MOVLW     0x3            							curr_preset = 3;                                                          C:\fw\midicontroller\x011a\controller.c
0018e8   6f57     MOVWF     0x57,0x1                                                                                        
0018ea   0e01     MOVLW     0x1            							preset_activate(1);                                                       C:\fw\midicontroller\x011a\controller.c
0018ec   6ee6     MOVWF     0xe6,0x0                                                                                        
0018ee   ec2a     CALL      0xc54,0x0                                                                                       
0018f0   f006                                                                                                               
0018f2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0018f4   0101     MOVLB     0x1            							bankmap[curr_mapindex++] = curr_preset;                                   C:\fw\midicontroller\x011a\controller.c
0018f6   5158     MOVF      0x58,0x0,0x1                                                                                    
0018f8   2b58     INCF      0x58,0x1,0x1                                                                                    
0018fa   6aea     CLRF      0xea,0x0                                                                                        
0018fc   0f49     ADDLW     0x49                                                                                            
0018fe   6ee9     MOVWF     0xe9,0x0                                                                                        
001900   0e01     MOVLW     0x1                                                                                             
001902   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001904   c157     MOVFF     0x157,0xfef                                                                                     
001906   ffef                                                                                                               
001908   ec48     CALL      0xc90,0x0      							bankmap_show();                                                           C:\fw\midicontroller\x011a\controller.c
00190a   f006                                                                                                               
                                           							/* just stored our last sequence: */                                      C:\fw\midicontroller\x011a\controller.c
00190c   0e08     MOVLW     0x8            							if (curr_mapindex == 8) {                                                 C:\fw\midicontroller\x011a\controller.c
00190e   0101     MOVLB     0x1                                                                                             
001910   5d58     SUBWF     0x58,0x0,0x1                                                                                    
001912   e101     BNZ       0x1916                                                                                          
001914   dc46     RCALL     0x11a2         								sequence_complete();                                                     C:\fw\midicontroller\x011a\controller.c
                                           							}                                                                         C:\fw\midicontroller\x011a\controller.c
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           					/* ENTER pressed */                                                         C:\fw\midicontroller\x011a\controller.c
001916   0e00     MOVLW     0x0            					if (button_pressed(FSM_ENTER)) {                                            C:\fw\midicontroller\x011a\controller.c
001918   6ee6     MOVWF     0xe6,0x0                                                                                        
00191a   6ae6     CLRF      0xe6,0x0                                                                                        
00191c   ec01     CALL      0xe02,0x0                                                                                       
00191e   f007                                                                                                               
001920   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001922   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001924   0900     IORLW     0x0                                                                                             
001926   e001     BZ        0x192a                                                                                          
                                           						/* stop programming early and save the sequence: */                        C:\fw\midicontroller\x011a\controller.c
001928   dc3c     RCALL     0x11a2         						sequence_complete();                                                       C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
00192a   d035     BRA       0x1996         					break;                                                                      C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           				/* sequence repeat mode: */                                                  C:\fw\midicontroller\x011a\controller.c
                                           				case PROGRAM_COMPLETE:                                                       C:\fw\midicontroller\x011a\controller.c
00192c   5170     MOVF      0x70,0x0,0x1   					if (cdtimer_holdenter == 0) {                                               C:\fw\midicontroller\x011a\controller.c
00192e   1171     IORWF     0x71,0x0,0x1                                                                                    
001930   e131     BNZ       0x1994                                                                                          
001932   0101     MOVLB     0x1            						if (curr_mapindex == bankmap_count) {                                      C:\fw\midicontroller\x011a\controller.c
001934   5151     MOVF      0x51,0x0,0x1                                                                                    
001936   5d58     SUBWF     0x58,0x0,0x1                                                                                    
001938   e10a     BNZ       0x194e                                                                                          
                                           							/* we're done! */                                                         C:\fw\midicontroller\x011a\controller.c
00193a   0101     MOVLB     0x1            							program_mode = PROGRAM_NONE;                                              C:\fw\midicontroller\x011a\controller.c
00193c   6b74     CLRF      0x74,0x1                                                                                        
00193e   0101     MOVLB     0x1            							curr_mapindex = 0;                                                        C:\fw\midicontroller\x011a\controller.c
001940   6b58     CLRF      0x58,0x1                                                                                        
001942   0e01     MOVLW     0x1            							bankmap_activate(1);                                                      C:\fw\midicontroller\x011a\controller.c
001944   6ee6     MOVWF     0xe6,0x0                                                                                        
001946   ec4f     CALL      0xc9e,0x0                                                                                       
001948   f006                                                                                                               
00194a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00194c   d023     BRA       0x1994         						} else {                                                                   C:\fw\midicontroller\x011a\controller.c
                                           							/* set the next LED active */                                             C:\fw\midicontroller\x011a\controller.c
00194e   ec48     CALL      0xc90,0x0      							bankmap_show();                                                           C:\fw\midicontroller\x011a\controller.c
001950   f006                                                                                                               
001952   0101     MOVLB     0x1            							curr_preset = bankmap[curr_mapindex];                                     C:\fw\midicontroller\x011a\controller.c
001954   5158     MOVF      0x58,0x0,0x1                                                                                    
001956   6aea     CLRF      0xea,0x0                                                                                        
001958   0f49     ADDLW     0x49                                                                                            
00195a   6ee9     MOVWF     0xe9,0x0                                                                                        
00195c   0e01     MOVLW     0x1                                                                                             
00195e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001960   cfef     MOVFF     0xfef,0x157                                                                                     
001962   f157                                                                                                               
001964   5157     MOVF      0x57,0x0,0x1   							fsw_led_set_active(curr_preset);                                          C:\fw\midicontroller\x011a\controller.c
001966   6ee6     MOVWF     0xe6,0x0                                                                                        
001968   6ae6     CLRF      0xe6,0x0                                                                                        
00196a   ecf5     CALL      0x27ea,0x0                                                                                      
00196c   f013                                                                                                               
00196e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001970   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001972   0101     MOVLB     0x1            							curr_program = bank[curr_preset];                                         C:\fw\midicontroller\x011a\controller.c
001974   5157     MOVF      0x57,0x0,0x1                                                                                    
001976   6aea     CLRF      0xea,0x0                                                                                        
001978   0f41     ADDLW     0x41                                                                                            
00197a   6ee9     MOVWF     0xe9,0x0                                                                                        
00197c   0e01     MOVLW     0x1                                                                                             
00197e   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
001980   cfef     MOVFF     0xfef,0x156                                                                                     
001982   f156                                                                                                               
001984   ecea     CALL      0xbd4,0x0      							show_program();                                                           C:\fw\midicontroller\x011a\controller.c
001986   f005                                                                                                               
001988   0101     MOVLB     0x1            							++curr_mapindex;                                                          C:\fw\midicontroller\x011a\controller.c
00198a   2b58     INCF      0x58,0x1,0x1                                                                                    
00198c   0e32     MOVLW     0x32           							cdtimer_holdenter = 50;                                                   C:\fw\midicontroller\x011a\controller.c
00198e   0101     MOVLB     0x1                                                                                             
001990   6f70     MOVWF     0x70,0x1                                                                                        
001992   6b71     CLRF      0x71,0x1                                                                                        
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
001994   d000     BRA       0x1996         					break;                                                                      C:\fw\midicontroller\x011a\controller.c
                                           			}                                                                             C:\fw\midicontroller\x011a\controller.c
001996   d1ea     BRA       0x1d6c         			break;                                                                        C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           		case MODE_CONCERT:                                                             C:\fw\midicontroller\x011a\controller.c
                                           			/*                                                                            C:\fw\midicontroller\x011a\controller.c
                                           				next/prev buttons move bank map index pointer up/down by 1, cycling up/down bank # when bank C:\fw\midicontroller\x011a\controller.c
                                           				map boundaries are crossed.  Single-digit 7-segment display shows map index # as 1-8. C:\fw\midicontroller\x011a\controller.c
                                           				inc/dec buttons move through banks, resetting bank map index to 0.  Bank name displays on 4-digit display. C:\fw\midicontroller\x011a\controller.c
                                           				preset button 1-4: change program # immediately, showing program # on 4-digit display for .5 sec, C:\fw\midicontroller\x011a\controller.c
                                           				reverting display back to bank name.                                         C:\fw\midicontroller\x011a\controller.c
                                           			*/                                                                            C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           			/* one of preset 1-4 pressed: */                                              C:\fw\midicontroller\x011a\controller.c
001998   0e01     MOVLW     0x1            			if (button_pressed(FSM_PRESET_1)) {                                           C:\fw\midicontroller\x011a\controller.c
00199a   6ee6     MOVWF     0xe6,0x0                                                                                        
00199c   6ae6     CLRF      0xe6,0x0                                                                                        
00199e   ec01     CALL      0xe02,0x0                                                                                       
0019a0   f007                                                                                                               
0019a2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0019a4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0019a6   0900     IORLW     0x0                                                                                             
0019a8   e007     BZ        0x19b8                                                                                          
0019aa   0101     MOVLB     0x1            				curr_preset = 0;                                                             C:\fw\midicontroller\x011a\controller.c
0019ac   6b57     CLRF      0x57,0x1                                                                                        
0019ae   0e01     MOVLW     0x1            				preset_activate(1);                                                          C:\fw\midicontroller\x011a\controller.c
0019b0   6ee6     MOVWF     0xe6,0x0                                                                                        
0019b2   ec2a     CALL      0xc54,0x0                                                                                       
0019b4   f006                                                                                                               
0019b6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           			}                                                                             C:\fw\midicontroller\x011a\controller.c
0019b8   0e02     MOVLW     0x2            			if (button_pressed(FSM_PRESET_2)) {                                           C:\fw\midicontroller\x011a\controller.c
0019ba   6ee6     MOVWF     0xe6,0x0                                                                                        
0019bc   6ae6     CLRF      0xe6,0x0                                                                                        
0019be   ec01     CALL      0xe02,0x0                                                                                       
0019c0   f007                                                                                                               
0019c2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0019c4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0019c6   0900     IORLW     0x0                                                                                             
0019c8   e007     BZ        0x19d8                                                                                          
0019ca   0101     MOVLB     0x1            				curr_preset = 1;                                                             C:\fw\midicontroller\x011a\controller.c
0019cc   0e01     MOVLW     0x1                                                                                             
0019ce   6f57     MOVWF     0x57,0x1                                                                                        
0019d0   6ee6     MOVWF     0xe6,0x0       				preset_activate(1);                                                          C:\fw\midicontroller\x011a\controller.c
0019d2   ec2a     CALL      0xc54,0x0                                                                                       
0019d4   f006                                                                                                               
0019d6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           			}                                                                             C:\fw\midicontroller\x011a\controller.c
0019d8   0e04     MOVLW     0x4            			if (button_pressed(FSM_PRESET_3)) {                                           C:\fw\midicontroller\x011a\controller.c
0019da   6ee6     MOVWF     0xe6,0x0                                                                                        
0019dc   6ae6     CLRF      0xe6,0x0                                                                                        
0019de   ec01     CALL      0xe02,0x0                                                                                       
0019e0   f007                                                                                                               
0019e2   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0019e4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
0019e6   0900     IORLW     0x0                                                                                             
0019e8   e008     BZ        0x19fa                                                                                          
0019ea   0101     MOVLB     0x1            				curr_preset = 2;                                                             C:\fw\midicontroller\x011a\controller.c
0019ec   0e02     MOVLW     0x2                                                                                             
0019ee   6f57     MOVWF     0x57,0x1                                                                                        
0019f0   0e01     MOVLW     0x1            				preset_activate(1);                                                          C:\fw\midicontroller\x011a\controller.c
0019f2   6ee6     MOVWF     0xe6,0x0                                                                                        
0019f4   ec2a     CALL      0xc54,0x0                                                                                       
0019f6   f006                                                                                                               
0019f8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           			}                                                                             C:\fw\midicontroller\x011a\controller.c
0019fa   0e08     MOVLW     0x8            			if (button_pressed(FSM_PRESET_4)) {                                           C:\fw\midicontroller\x011a\controller.c
0019fc   6ee6     MOVWF     0xe6,0x0                                                                                        
0019fe   6ae6     CLRF      0xe6,0x0                                                                                        
001a00   ec01     CALL      0xe02,0x0                                                                                       
001a02   f007                                                                                                               
001a04   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a06   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a08   0900     IORLW     0x0                                                                                             
001a0a   e008     BZ        0x1a1c                                                                                          
001a0c   0101     MOVLB     0x1            				curr_preset = 3;                                                             C:\fw\midicontroller\x011a\controller.c
001a0e   0e03     MOVLW     0x3                                                                                             
001a10   6f57     MOVWF     0x57,0x1                                                                                        
001a12   0e01     MOVLW     0x1            				preset_activate(1);                                                          C:\fw\midicontroller\x011a\controller.c
001a14   6ee6     MOVWF     0xe6,0x0                                                                                        
001a16   ec2a     CALL      0xc54,0x0                                                                                       
001a18   f006                                                                                                               
001a1a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           			}                                                                             C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           			/* INC pressed: */                                                            C:\fw\midicontroller\x011a\controller.c
001a1c   0e00     MOVLW     0x0            			if (button_pressed(FSM_INC)) {                                                C:\fw\midicontroller\x011a\controller.c
001a1e   6ee6     MOVWF     0xe6,0x0                                                                                        
001a20   6ae6     CLRF      0xe6,0x0                                                                                        
001a22   ec01     CALL      0xe02,0x0                                                                                       
001a24   f007                                                                                                               
001a26   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a28   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a2a   0900     IORLW     0x0                                                                                             
001a2c   e021     BZ        0x1a70                                                                                          
001a2e   c15f     MOVFF     0x15f,0x10     				if (curr_bank == bank_count - 1) curr_bank = 0;                              C:\fw\midicontroller\x011a\controller.c
001a30   f010                                                                                                               
001a32   c160     MOVFF     0x160,0x11                                                                                      
001a34   f011                                                                                                               
001a36   0610     DECF      0x10,0x1,0x0                                                                                    
001a38   0e00     MOVLW     0x0                                                                                             
001a3a   5a11     SUBWFB    0x11,0x1,0x0                                                                                    
001a3c   5010     MOVF      0x10,0x0,0x0                                                                                    
001a3e   0101     MOVLB     0x1                                                                                             
001a40   1959     XORWF     0x59,0x0,0x1                                                                                    
001a42   e102     BNZ       0x1a48                                                                                          
001a44   5011     MOVF      0x11,0x0,0x0                                                                                    
001a46   195a     XORWF     0x5a,0x0,0x1                                                                                    
001a48   e103     BNZ       0x1a50                                                                                          
001a4a   6b59     CLRF      0x59,0x1                                                                                        
001a4c   6b5a     CLRF      0x5a,0x1                                                                                        
001a4e   d003     BRA       0x1a56         				else ++curr_bank;                                                            C:\fw\midicontroller\x011a\controller.c
001a50   2b59     INCF      0x59,0x1,0x1                                                                                    
001a52   0e00     MOVLW     0x0                                                                                             
001a54   235a     ADDWFC    0x5a,0x1,0x1                                                                                    
001a56   ecbb     CALL      0xd76,0x0      				bank_showname();                                                             C:\fw\midicontroller\x011a\controller.c
001a58   f006                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
001a5a   0101     MOVLB     0x1            				accel_state = ACCEL_NONE;                                                    C:\fw\midicontroller\x011a\controller.c
001a5c   6b72     CLRF      0x72,0x1                                                                                        
001a5e   c176     MOVFF     0x176,0x161    				accel_time = accel_time_slow;                                                C:\fw\midicontroller\x011a\controller.c
001a60   f161                                                                                                               
001a62   c177     MOVFF     0x177,0x162                                                                                     
001a64   f162                                                                                                               
001a66   0101     MOVLB     0x1            				accel_count = 0;                                                             C:\fw\midicontroller\x011a\controller.c
001a68   6b63     CLRF      0x63,0x1                                                                                        
001a6a   0101     MOVLB     0x1            				accel_state = ACCEL_INC_SLOW;                                                C:\fw\midicontroller\x011a\controller.c
001a6c   0e01     MOVLW     0x1                                                                                             
001a6e   6f72     MOVWF     0x72,0x1                                                                                        
                                           			}                                                                             C:\fw\midicontroller\x011a\controller.c
                                           			/* INC released: */                                                           C:\fw\midicontroller\x011a\controller.c
001a70   0e00     MOVLW     0x0            			if (button_released(FSM_INC)) {                                               C:\fw\midicontroller\x011a\controller.c
001a72   6ee6     MOVWF     0xe6,0x0                                                                                        
001a74   6ae6     CLRF      0xe6,0x0                                                                                        
001a76   ec50     CALL      0xea0,0x0                                                                                       
001a78   f007                                                                                                               
001a7a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a7c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a7e   0900     IORLW     0x0                                                                                             
001a80   e006     BZ        0x1a8e                                                                                          
001a82   0101     MOVLB     0x1            				accel_state = ACCEL_NONE;                                                    C:\fw\midicontroller\x011a\controller.c
001a84   6b72     CLRF      0x72,0x1                                                                                        
                                           				/* load the bank, but don't change program # */                              C:\fw\midicontroller\x011a\controller.c
001a86   6ae6     CLRF      0xe6,0x0       				bank_activate(0);                                                            C:\fw\midicontroller\x011a\controller.c
001a88   ec6a     CALL      0xcd4,0x0                                                                                       
001a8a   f006                                                                                                               
001a8c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           			}                                                                             C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           			/* DEC pressed: */                                                            C:\fw\midicontroller\x011a\controller.c
001a8e   0e00     MOVLW     0x0            			if (button_pressed(FSM_DEC)) {                                                C:\fw\midicontroller\x011a\controller.c
001a90   6ee6     MOVWF     0xe6,0x0                                                                                        
001a92   6ae6     CLRF      0xe6,0x0                                                                                        
001a94   ec01     CALL      0xe02,0x0                                                                                       
001a96   f007                                                                                                               
001a98   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a9a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001a9c   0900     IORLW     0x0                                                                                             
001a9e   e01d     BZ        0x1ada                                                                                          
001aa0   0101     MOVLB     0x1            				if (curr_bank == 0) curr_bank = bank_count - 1;                              C:\fw\midicontroller\x011a\controller.c
001aa2   5159     MOVF      0x59,0x0,0x1                                                                                    
001aa4   115a     IORWF     0x5a,0x0,0x1                                                                                    
001aa6   e109     BNZ       0x1aba                                                                                          
001aa8   c15f     MOVFF     0x15f,0x159                                                                                     
001aaa   f159                                                                                                               
001aac   c160     MOVFF     0x160,0x15a                                                                                     
001aae   f15a                                                                                                               
001ab0   0e01     MOVLW     0x1                                                                                             
001ab2   5f59     SUBWF     0x59,0x1,0x1                                                                                    
001ab4   0e00     MOVLW     0x0                                                                                             
001ab6   5b5a     SUBWFB    0x5a,0x1,0x1                                                                                    
001ab8   d003     BRA       0x1ac0         				else --curr_bank;                                                            C:\fw\midicontroller\x011a\controller.c
001aba   0759     DECF      0x59,0x1,0x1                                                                                    
001abc   0e00     MOVLW     0x0                                                                                             
001abe   5b5a     SUBWFB    0x5a,0x1,0x1                                                                                    
001ac0   ecbb     CALL      0xd76,0x0      				bank_showname();                                                             C:\fw\midicontroller\x011a\controller.c
001ac2   f006                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
001ac4   0101     MOVLB     0x1            				accel_state = ACCEL_NONE;                                                    C:\fw\midicontroller\x011a\controller.c
001ac6   6b72     CLRF      0x72,0x1                                                                                        
001ac8   c176     MOVFF     0x176,0x161    				accel_time = accel_time_slow;                                                C:\fw\midicontroller\x011a\controller.c
001aca   f161                                                                                                               
001acc   c177     MOVFF     0x177,0x162                                                                                     
001ace   f162                                                                                                               
001ad0   0101     MOVLB     0x1            				accel_count = 0;                                                             C:\fw\midicontroller\x011a\controller.c
001ad2   6b63     CLRF      0x63,0x1                                                                                        
001ad4   0101     MOVLB     0x1            				accel_state = ACCEL_DEC_SLOW;                                                C:\fw\midicontroller\x011a\controller.c
001ad6   0e04     MOVLW     0x4                                                                                             
001ad8   6f72     MOVWF     0x72,0x1                                                                                        
                                           			}                                                                             C:\fw\midicontroller\x011a\controller.c
                                           			/* DEC released: */                                                           C:\fw\midicontroller\x011a\controller.c
001ada   0e00     MOVLW     0x0            			if (button_released(FSM_DEC)) {                                               C:\fw\midicontroller\x011a\controller.c
001adc   6ee6     MOVWF     0xe6,0x0                                                                                        
001ade   6ae6     CLRF      0xe6,0x0                                                                                        
001ae0   ec50     CALL      0xea0,0x0                                                                                       
001ae2   f007                                                                                                               
001ae4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001ae6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001ae8   0900     IORLW     0x0                                                                                             
001aea   e006     BZ        0x1af8                                                                                          
001aec   0101     MOVLB     0x1            				accel_state = ACCEL_NONE;                                                    C:\fw\midicontroller\x011a\controller.c
001aee   6b72     CLRF      0x72,0x1                                                                                        
                                           				/* load the bank, but don't change program # */                              C:\fw\midicontroller\x011a\controller.c
001af0   6ae6     CLRF      0xe6,0x0       				bank_activate(0);                                                            C:\fw\midicontroller\x011a\controller.c
001af2   ec6a     CALL      0xcd4,0x0                                                                                       
001af4   f006                                                                                                               
001af6   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           			}                                                                             C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           			/* PREV/ENTER pressed: */                                                     C:\fw\midicontroller\x011a\controller.c
001af8   0e00     MOVLW     0x0            			if (button_pressed(FSM_ENTER)) {                                              C:\fw\midicontroller\x011a\controller.c
001afa   6ee6     MOVWF     0xe6,0x0                                                                                        
001afc   6ae6     CLRF      0xe6,0x0                                                                                        
001afe   ec01     CALL      0xe02,0x0                                                                                       
001b00   f007                                                                                                               
001b02   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001b04   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001b06   0900     IORLW     0x0                                                                                             
001b08   e048     BZ        0x1b9a                                                                                          
001b0a   0101     MOVLB     0x1            				if (loaded_bank != curr_bank) {                                              C:\fw\midicontroller\x011a\controller.c
001b0c   5159     MOVF      0x59,0x0,0x1                                                                                    
001b0e   195b     XORWF     0x5b,0x0,0x1                                                                                    
001b10   e102     BNZ       0x1b16                                                                                          
001b12   515a     MOVF      0x5a,0x0,0x1                                                                                    
001b14   195c     XORWF     0x5c,0x0,0x1                                                                                    
001b16   e006     BZ        0x1b24                                                                                          
                                           					/* prepared to switch to a bank, but did not activate the first map */      C:\fw\midicontroller\x011a\controller.c
001b18   0e01     MOVLW     0x1            					bankmap_activate(1);                                                        C:\fw\midicontroller\x011a\controller.c
001b1a   6ee6     MOVWF     0xe6,0x0                                                                                        
001b1c   ec4f     CALL      0xc9e,0x0                                                                                       
001b1e   f006                                                                                                               
001b20   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001b22   d03b     BRA       0x1b9a         				} else {                                                                     C:\fw\midicontroller\x011a\controller.c
001b24   5158     MOVF      0x58,0x0,0x1   					if (curr_mapindex == 0) {                                                   C:\fw\midicontroller\x011a\controller.c
001b26   e133     BNZ       0x1b8e                                                                                          
                                           						/* crossed the lower bank-map boundary, load the previous bank */          C:\fw\midicontroller\x011a\controller.c
001b28   5164     MOVF      0x64,0x0,0x1   						if (mode == MODE_PRACTICE) {                                               C:\fw\midicontroller\x011a\controller.c
001b2a   e115     BNZ       0x1b56                                                                                          
                                           							/* PRACTICE mode cycles through banks by sorted index #: */               C:\fw\midicontroller\x011a\controller.c
001b2c   515d     MOVF      0x5d,0x0,0x1   							if (curr_sortedbank == 0) {                                               C:\fw\midicontroller\x011a\controller.c
001b2e   115e     IORWF     0x5e,0x0,0x1                                                                                    
001b30   e109     BNZ       0x1b44                                                                                          
001b32   c15f     MOVFF     0x15f,0x15d    								curr_sortedbank = bank_count - 1;                                        C:\fw\midicontroller\x011a\controller.c
001b34   f15d                                                                                                               
001b36   c160     MOVFF     0x160,0x15e                                                                                     
001b38   f15e                                                                                                               
001b3a   0e01     MOVLW     0x1                                                                                             
001b3c   5f5d     SUBWF     0x5d,0x1,0x1                                                                                    
001b3e   0e00     MOVLW     0x0                                                                                             
001b40   5b5e     SUBWFB    0x5e,0x1,0x1                                                                                    
001b42   d003     BRA       0x1b4a         							} else {                                                                  C:\fw\midicontroller\x011a\controller.c
001b44   075d     DECF      0x5d,0x1,0x1   								--curr_sortedbank;                                                       C:\fw\midicontroller\x011a\controller.c
001b46   0e00     MOVLW     0x0                                                                                             
001b48   5b5e     SUBWFB    0x5e,0x1,0x1                                                                                    
                                           							}                                                                         C:\fw\midicontroller\x011a\controller.c
                                           							/* show the bank name */                                                  C:\fw\midicontroller\x011a\controller.c
001b4a   0e01     MOVLW     0x1            							sortedbank_activate(1);                                                   C:\fw\midicontroller\x011a\controller.c
001b4c   6ee6     MOVWF     0xe6,0x0                                                                                        
001b4e   eca2     CALL      0xd44,0x0                                                                                       
001b50   f006                                                                                                               
001b52   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001b54   d014     BRA       0x1b7e         						} else {                                                                   C:\fw\midicontroller\x011a\controller.c
                                           							/* CONCERT mode cycles through banks by index #: */                       C:\fw\midicontroller\x011a\controller.c
001b56   5159     MOVF      0x59,0x0,0x1   							if (curr_bank == 0) {                                                     C:\fw\midicontroller\x011a\controller.c
001b58   115a     IORWF     0x5a,0x0,0x1                                                                                    
001b5a   e109     BNZ       0x1b6e                                                                                          
001b5c   c15f     MOVFF     0x15f,0x159    								curr_bank = bank_count - 1;                                              C:\fw\midicontroller\x011a\controller.c
001b5e   f159                                                                                                               
001b60   c160     MOVFF     0x160,0x15a                                                                                     
001b62   f15a                                                                                                               
001b64   0e01     MOVLW     0x1                                                                                             
001b66   5f59     SUBWF     0x59,0x1,0x1                                                                                    
001b68   0e00     MOVLW     0x0                                                                                             
001b6a   5b5a     SUBWFB    0x5a,0x1,0x1                                                                                    
001b6c   d003     BRA       0x1b74         							} else {                                                                  C:\fw\midicontroller\x011a\controller.c
001b6e   0759     DECF      0x59,0x1,0x1   								--curr_bank;                                                             C:\fw\midicontroller\x011a\controller.c
001b70   0e00     MOVLW     0x0                                                                                             
001b72   5b5a     SUBWFB    0x5a,0x1,0x1                                                                                    
                                           							}                                                                         C:\fw\midicontroller\x011a\controller.c
                                           							/* show the bank name */                                                  C:\fw\midicontroller\x011a\controller.c
001b74   0e01     MOVLW     0x1            							bank_activate(1);                                                         C:\fw\midicontroller\x011a\controller.c
001b76   6ee6     MOVWF     0xe6,0x0                                                                                        
001b78   ec6a     CALL      0xcd4,0x0                                                                                       
001b7a   f006                                                                                                               
001b7c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
                                           						/* activate the last map for the new bank, but do not display the MIDI program # */ C:\fw\midicontroller\x011a\controller.c
001b7e   0101     MOVLB     0x1            						curr_mapindex = bankmap_count - 1;                                         C:\fw\midicontroller\x011a\controller.c
001b80   0551     DECF      0x51,0x0,0x1                                                                                    
001b82   6f58     MOVWF     0x58,0x1                                                                                        
001b84   6ae6     CLRF      0xe6,0x0       						bankmap_activate(0);                                                       C:\fw\midicontroller\x011a\controller.c
001b86   ec4f     CALL      0xc9e,0x0                                                                                       
001b88   f006                                                                                                               
001b8a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
001b8c   d006     BRA       0x1b9a         					} else {                                                                    C:\fw\midicontroller\x011a\controller.c
                                           						/* activate the previous map for the new bank, and display the MIDI program # */ C:\fw\midicontroller\x011a\controller.c
001b8e   0758     DECF      0x58,0x1,0x1   						--curr_mapindex;                                                           C:\fw\midicontroller\x011a\controller.c
001b90   0e01     MOVLW     0x1            						bankmap_activate(1);                                                       C:\fw\midicontroller\x011a\controller.c
001b92   6ee6     MOVWF     0xe6,0x0                                                                                        
001b94   ec4f     CALL      0xc9e,0x0                                                                                       
001b96   f006                                                                                                               
001b98   52e5     MOVF      0xe5,0x1,0x0                                                                                    
                                           					}                                                                           C:\fw\midicontroller\x011a\controller.c
                                           				}                                                                            C:\fw\midicontroller\x011a\controller.c
                                           			}                                                                             C:\fw\midicontroller\x011a\controller.c
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           			/* acceleration countdown timer hit 0 and we're incrementing slowly */        C:\fw\midicontroller\x011a\controller.c
001b9a   0101     MOVLB     0x1            			if ((accel_state != ACCEL_NONE) && (accel_time == 0)) {                       C:\fw\midicontroller\x011a\controller.c
001b9c   5172     MOVF      0x72,0x0,0x1                                                                                    
001b9e   e101     BNZ       0x1ba2                                                                                          
001ba0   d0e4     BRA       0x1d6a                                                                                          
001ba2   0101     MOVLB     0x1                                                                                             
001ba4   5161     MOVF      0x61,0x0,0x1                                                                                    
001ba6   1162     IORWF     0x62,0x0,0x1                                                                                    
001ba8   e001     BZ        0x1bac                                                                                          
001baa   d0df     BRA       0x1d6a                                                                                          
001bac   0101     MOVLB     0x1            				switch (accel_state) {                                                       C:\fw\midicontroller\x011a\controller.c
001bae   5172     MOVF      0x72,0x0,0x1                                                                                    
001bb0   0a06     XORLW     0x6                                                                                             
001bb2   e101     BNZ       0x1bb6                                                                                          
001bb4   d0c3     BRA       0x1d3c                                                                                          
001bb6   0a03     XORLW     0x3                                                                                             
001bb8   e101     BNZ       0x1bbc                                                                                          
001bba   d09b     BRA       0x1cf2                                                                                          
001bbc   0a01     XORLW     0x1                                                                                             
001bbe   e074     BZ        0x1ca8                                                                                          
001bc0   0a07     XORLW     0x7                                                                                             
001bc2   e057     BZ        0x1c72                                                                                          
001bc4   0a01     XORLW     0x1                                                                                             
001bc6   e02c     BZ        0x1c20                                                                                          
001bc8   0a03     XORLW     0x3                                                                                             
001bca   e001     BZ        0x1bce                                                                                          
001bcc   d0ce     BRA       0x1d6a                                                                                          
                                           					case ACCEL_INC_SLOW:                                                        C:\fw\midicontroller\x011a\controller.c
001bce   c15f     MOVFF     0x15f,0x10     						if (curr_bank == bank_count - 1) curr_bank = 0;                            C:\fw\midicontroller\x011a\controller.c
001bd0   f010                                                                                                               
001bd2   c160     MOVFF     0x160,0x11                                                                                      
001bd4   f011                                                                                                               
001bd6   0610     DECF      0x10,0x1,0x0                                                                                    
001bd8   0e00     MOVLW     0x0                                                                                             
001bda   5a11     SUBWFB    0x11,0x1,0x0                                                                                    
001bdc   5010     MOVF      0x10,0x0,0x0                                                                                    
001bde   0101     MOVLB     0x1                                                                                             
001be0   1959     XORWF     0x59,0x0,0x1                                                                                    
001be2   e102     BNZ       0x1be8                                                                                          
001be4   5011     MOVF      0x11,0x0,0x0                                                                                    
001be6   195a     XORWF     0x5a,0x0,0x1                                                                                    
001be8   e103     BNZ       0x1bf0                                                                                          
001bea   6b59     CLRF      0x59,0x1                                                                                        
001bec   6b5a     CLRF      0x5a,0x1                                                                                        
001bee   d003     BRA       0x1bf6         						else ++curr_bank;                                                          C:\fw\midicontroller\x011a\controller.c
001bf0   2b59     INCF      0x59,0x1,0x1                                                                                    
001bf2   0e00     MOVLW     0x0                                                                                             
001bf4   235a     ADDWFC    0x5a,0x1,0x1                                                                                    
001bf6   ecbb     CALL      0xd76,0x0      						bank_showname();                                                           C:\fw\midicontroller\x011a\controller.c
001bf8   f006                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           						/* if we cycled more than 5 values, ramp up to next speed */               C:\fw\midicontroller\x011a\controller.c
001bfa   0101     MOVLB     0x1            						if (accel_count++ == 5) {                                                  C:\fw\midicontroller\x011a\controller.c
001bfc   5163     MOVF      0x63,0x0,0x1                                                                                    
001bfe   2b63     INCF      0x63,0x1,0x1                                                                                    
001c00   0805     SUBLW     0x5                                                                                             
001c02   e109     BNZ       0x1c16                                                                                          
001c04   6b63     CLRF      0x63,0x1       							accel_count = 0;                                                          C:\fw\midicontroller\x011a\controller.c
001c06   0101     MOVLB     0x1            							accel_state = ACCEL_INC_MEDIUM;                                           C:\fw\midicontroller\x011a\controller.c
001c08   0e02     MOVLW     0x2                                                                                             
001c0a   6f72     MOVWF     0x72,0x1                                                                                        
001c0c   c178     MOVFF     0x178,0x161    							accel_time = accel_time_medium;                                           C:\fw\midicontroller\x011a\controller.c
001c0e   f161                                                                                                               
001c10   c179     MOVFF     0x179,0x162                                                                                     
001c12   f162                                                                                                               
001c14   d004     BRA       0x1c1e         						} else {                                                                   C:\fw\midicontroller\x011a\controller.c
001c16   c176     MOVFF     0x176,0x161    							accel_time = accel_time_slow;                                             C:\fw\midicontroller\x011a\controller.c
001c18   f161                                                                                                               
001c1a   c177     MOVFF     0x177,0x162                                                                                     
001c1c   f162                                                                                                               
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
001c1e   d0a5     BRA       0x1d6a         						break;                                                                     C:\fw\midicontroller\x011a\controller.c
                                           					case ACCEL_INC_MEDIUM:                                                      C:\fw\midicontroller\x011a\controller.c
001c20   c15f     MOVFF     0x15f,0x10     						if (curr_bank == bank_count - 1) curr_bank = 0;                            C:\fw\midicontroller\x011a\controller.c
001c22   f010                                                                                                               
001c24   c160     MOVFF     0x160,0x11                                                                                      
001c26   f011                                                                                                               
001c28   0610     DECF      0x10,0x1,0x0                                                                                    
001c2a   0e00     MOVLW     0x0                                                                                             
001c2c   5a11     SUBWFB    0x11,0x1,0x0                                                                                    
001c2e   5010     MOVF      0x10,0x0,0x0                                                                                    
001c30   0101     MOVLB     0x1                                                                                             
001c32   1959     XORWF     0x59,0x0,0x1                                                                                    
001c34   e102     BNZ       0x1c3a                                                                                          
001c36   5011     MOVF      0x11,0x0,0x0                                                                                    
001c38   195a     XORWF     0x5a,0x0,0x1                                                                                    
001c3a   e103     BNZ       0x1c42                                                                                          
001c3c   6b59     CLRF      0x59,0x1                                                                                        
001c3e   6b5a     CLRF      0x5a,0x1                                                                                        
001c40   d003     BRA       0x1c48         						else ++curr_bank;                                                          C:\fw\midicontroller\x011a\controller.c
001c42   2b59     INCF      0x59,0x1,0x1                                                                                    
001c44   0e00     MOVLW     0x0                                                                                             
001c46   235a     ADDWFC    0x5a,0x1,0x1                                                                                    
001c48   ecbb     CALL      0xd76,0x0      						bank_showname();                                                           C:\fw\midicontroller\x011a\controller.c
001c4a   f006                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           						/* if we cycled more than 5 values, ramp up to next speed */               C:\fw\midicontroller\x011a\controller.c
001c4c   0101     MOVLB     0x1            						if (accel_count++ == 20) {                                                 C:\fw\midicontroller\x011a\controller.c
001c4e   5163     MOVF      0x63,0x0,0x1                                                                                    
001c50   2b63     INCF      0x63,0x1,0x1                                                                                    
001c52   0814     SUBLW     0x14                                                                                            
001c54   e109     BNZ       0x1c68                                                                                          
001c56   6b63     CLRF      0x63,0x1       							accel_count = 0;                                                          C:\fw\midicontroller\x011a\controller.c
001c58   0101     MOVLB     0x1            							accel_state = ACCEL_INC_FAST;                                             C:\fw\midicontroller\x011a\controller.c
001c5a   0e03     MOVLW     0x3                                                                                             
001c5c   6f72     MOVWF     0x72,0x1                                                                                        
001c5e   c17a     MOVFF     0x17a,0x161    							accel_time = accel_time_fast;                                             C:\fw\midicontroller\x011a\controller.c
001c60   f161                                                                                                               
001c62   c17b     MOVFF     0x17b,0x162                                                                                     
001c64   f162                                                                                                               
001c66   d004     BRA       0x1c70         						} else {                                                                   C:\fw\midicontroller\x011a\controller.c
001c68   c178     MOVFF     0x178,0x161    							accel_time = accel_time_medium;                                           C:\fw\midicontroller\x011a\controller.c
001c6a   f161                                                                                                               
001c6c   c179     MOVFF     0x179,0x162                                                                                     
001c6e   f162                                                                                                               
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
001c70   d07c     BRA       0x1d6a         						break;                                                                     C:\fw\midicontroller\x011a\controller.c
                                           					case ACCEL_INC_FAST:                                                        C:\fw\midicontroller\x011a\controller.c
001c72   c15f     MOVFF     0x15f,0x10     						if (curr_bank == bank_count - 1) curr_bank = 0;                            C:\fw\midicontroller\x011a\controller.c
001c74   f010                                                                                                               
001c76   c160     MOVFF     0x160,0x11                                                                                      
001c78   f011                                                                                                               
001c7a   0610     DECF      0x10,0x1,0x0                                                                                    
001c7c   0e00     MOVLW     0x0                                                                                             
001c7e   5a11     SUBWFB    0x11,0x1,0x0                                                                                    
001c80   5010     MOVF      0x10,0x0,0x0                                                                                    
001c82   0101     MOVLB     0x1                                                                                             
001c84   1959     XORWF     0x59,0x0,0x1                                                                                    
001c86   e102     BNZ       0x1c8c                                                                                          
001c88   5011     MOVF      0x11,0x0,0x0                                                                                    
001c8a   195a     XORWF     0x5a,0x0,0x1                                                                                    
001c8c   e103     BNZ       0x1c94                                                                                          
001c8e   6b59     CLRF      0x59,0x1                                                                                        
001c90   6b5a     CLRF      0x5a,0x1                                                                                        
001c92   d003     BRA       0x1c9a         						else ++curr_bank;                                                          C:\fw\midicontroller\x011a\controller.c
001c94   2b59     INCF      0x59,0x1,0x1                                                                                    
001c96   0e00     MOVLW     0x0                                                                                             
001c98   235a     ADDWFC    0x5a,0x1,0x1                                                                                    
001c9a   ecbb     CALL      0xd76,0x0      						bank_showname();                                                           C:\fw\midicontroller\x011a\controller.c
001c9c   f006                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
001c9e   c17a     MOVFF     0x17a,0x161    						accel_time = accel_time_fast;                                              C:\fw\midicontroller\x011a\controller.c
001ca0   f161                                                                                                               
001ca2   c17b     MOVFF     0x17b,0x162                                                                                     
001ca4   f162                                                                                                               
001ca6   d061     BRA       0x1d6a         						break;                                                                     C:\fw\midicontroller\x011a\controller.c
                                           					case ACCEL_DEC_SLOW:                                                        C:\fw\midicontroller\x011a\controller.c
001ca8   0101     MOVLB     0x1            						if (curr_bank == 0) curr_bank = bank_count - 1;                            C:\fw\midicontroller\x011a\controller.c
001caa   5159     MOVF      0x59,0x0,0x1                                                                                    
001cac   115a     IORWF     0x5a,0x0,0x1                                                                                    
001cae   e109     BNZ       0x1cc2                                                                                          
001cb0   c15f     MOVFF     0x15f,0x159                                                                                     
001cb2   f159                                                                                                               
001cb4   c160     MOVFF     0x160,0x15a                                                                                     
001cb6   f15a                                                                                                               
001cb8   0e01     MOVLW     0x1                                                                                             
001cba   5f59     SUBWF     0x59,0x1,0x1                                                                                    
001cbc   0e00     MOVLW     0x0                                                                                             
001cbe   5b5a     SUBWFB    0x5a,0x1,0x1                                                                                    
001cc0   d003     BRA       0x1cc8         						else --curr_bank;                                                          C:\fw\midicontroller\x011a\controller.c
001cc2   0759     DECF      0x59,0x1,0x1                                                                                    
001cc4   0e00     MOVLW     0x0                                                                                             
001cc6   5b5a     SUBWFB    0x5a,0x1,0x1                                                                                    
001cc8   ecbb     CALL      0xd76,0x0      						bank_showname();                                                           C:\fw\midicontroller\x011a\controller.c
001cca   f006                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           						/* if we cycled more than 5 values, ramp up to next speed */               C:\fw\midicontroller\x011a\controller.c
001ccc   0101     MOVLB     0x1            						if (accel_count++ == 5) {                                                  C:\fw\midicontroller\x011a\controller.c
001cce   5163     MOVF      0x63,0x0,0x1                                                                                    
001cd0   2b63     INCF      0x63,0x1,0x1                                                                                    
001cd2   0805     SUBLW     0x5                                                                                             
001cd4   e109     BNZ       0x1ce8                                                                                          
001cd6   6b63     CLRF      0x63,0x1       							accel_count = 0;                                                          C:\fw\midicontroller\x011a\controller.c
001cd8   0101     MOVLB     0x1            							accel_state = ACCEL_DEC_MEDIUM;                                           C:\fw\midicontroller\x011a\controller.c
001cda   0e05     MOVLW     0x5                                                                                             
001cdc   6f72     MOVWF     0x72,0x1                                                                                        
001cde   c178     MOVFF     0x178,0x161    							accel_time = accel_time_medium;                                           C:\fw\midicontroller\x011a\controller.c
001ce0   f161                                                                                                               
001ce2   c179     MOVFF     0x179,0x162                                                                                     
001ce4   f162                                                                                                               
001ce6   d004     BRA       0x1cf0         						} else {                                                                   C:\fw\midicontroller\x011a\controller.c
001ce8   c176     MOVFF     0x176,0x161    							accel_time = accel_time_slow;                                             C:\fw\midicontroller\x011a\controller.c
001cea   f161                                                                                                               
001cec   c177     MOVFF     0x177,0x162                                                                                     
001cee   f162                                                                                                               
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
001cf0   d03c     BRA       0x1d6a         						break;                                                                     C:\fw\midicontroller\x011a\controller.c
                                           					case ACCEL_DEC_MEDIUM:                                                      C:\fw\midicontroller\x011a\controller.c
001cf2   0101     MOVLB     0x1            						if (curr_bank == 0) curr_bank = bank_count - 1;                            C:\fw\midicontroller\x011a\controller.c
001cf4   5159     MOVF      0x59,0x0,0x1                                                                                    
001cf6   115a     IORWF     0x5a,0x0,0x1                                                                                    
001cf8   e109     BNZ       0x1d0c                                                                                          
001cfa   c15f     MOVFF     0x15f,0x159                                                                                     
001cfc   f159                                                                                                               
001cfe   c160     MOVFF     0x160,0x15a                                                                                     
001d00   f15a                                                                                                               
001d02   0e01     MOVLW     0x1                                                                                             
001d04   5f59     SUBWF     0x59,0x1,0x1                                                                                    
001d06   0e00     MOVLW     0x0                                                                                             
001d08   5b5a     SUBWFB    0x5a,0x1,0x1                                                                                    
001d0a   d003     BRA       0x1d12         						else --curr_bank;                                                          C:\fw\midicontroller\x011a\controller.c
001d0c   0759     DECF      0x59,0x1,0x1                                                                                    
001d0e   0e00     MOVLW     0x0                                                                                             
001d10   5b5a     SUBWFB    0x5a,0x1,0x1                                                                                    
001d12   ecbb     CALL      0xd76,0x0      						bank_showname();                                                           C:\fw\midicontroller\x011a\controller.c
001d14   f006                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
                                           						/* if we cycled more than 5 values, ramp up to next speed */               C:\fw\midicontroller\x011a\controller.c
001d16   0101     MOVLB     0x1            						if (accel_count++ == 20) {                                                 C:\fw\midicontroller\x011a\controller.c
001d18   5163     MOVF      0x63,0x0,0x1                                                                                    
001d1a   2b63     INCF      0x63,0x1,0x1                                                                                    
001d1c   0814     SUBLW     0x14                                                                                            
001d1e   e109     BNZ       0x1d32                                                                                          
001d20   6b63     CLRF      0x63,0x1       							accel_count = 0;                                                          C:\fw\midicontroller\x011a\controller.c
001d22   0101     MOVLB     0x1            							accel_state = ACCEL_DEC_FAST;                                             C:\fw\midicontroller\x011a\controller.c
001d24   0e06     MOVLW     0x6                                                                                             
001d26   6f72     MOVWF     0x72,0x1                                                                                        
001d28   c17a     MOVFF     0x17a,0x161    							accel_time = accel_time_fast;                                             C:\fw\midicontroller\x011a\controller.c
001d2a   f161                                                                                                               
001d2c   c17b     MOVFF     0x17b,0x162                                                                                     
001d2e   f162                                                                                                               
001d30   d004     BRA       0x1d3a         						} else {                                                                   C:\fw\midicontroller\x011a\controller.c
001d32   c178     MOVFF     0x178,0x161    							accel_time = accel_time_medium;                                           C:\fw\midicontroller\x011a\controller.c
001d34   f161                                                                                                               
001d36   c179     MOVFF     0x179,0x162                                                                                     
001d38   f162                                                                                                               
                                           						}                                                                          C:\fw\midicontroller\x011a\controller.c
001d3a   d017     BRA       0x1d6a         						break;                                                                     C:\fw\midicontroller\x011a\controller.c
                                           					case ACCEL_DEC_FAST:                                                        C:\fw\midicontroller\x011a\controller.c
001d3c   0101     MOVLB     0x1            						if (curr_bank == 0) curr_bank = bank_count - 1;                            C:\fw\midicontroller\x011a\controller.c
001d3e   5159     MOVF      0x59,0x0,0x1                                                                                    
001d40   115a     IORWF     0x5a,0x0,0x1                                                                                    
001d42   e109     BNZ       0x1d56                                                                                          
001d44   c15f     MOVFF     0x15f,0x159                                                                                     
001d46   f159                                                                                                               
001d48   c160     MOVFF     0x160,0x15a                                                                                     
001d4a   f15a                                                                                                               
001d4c   0e01     MOVLW     0x1                                                                                             
001d4e   5f59     SUBWF     0x59,0x1,0x1                                                                                    
001d50   0e00     MOVLW     0x0                                                                                             
001d52   5b5a     SUBWFB    0x5a,0x1,0x1                                                                                    
001d54   d003     BRA       0x1d5c         						else --curr_bank;                                                          C:\fw\midicontroller\x011a\controller.c
001d56   0759     DECF      0x59,0x1,0x1                                                                                    
001d58   0e00     MOVLW     0x0                                                                                             
001d5a   5b5a     SUBWFB    0x5a,0x1,0x1                                                                                    
001d5c   ecbb     CALL      0xd76,0x0      						bank_showname();                                                           C:\fw\midicontroller\x011a\controller.c
001d5e   f006                                                                                                               
                                                                                                                            C:\fw\midicontroller\x011a\controller.c
001d60   c17a     MOVFF     0x17a,0x161    						accel_time = accel_time_fast;                                              C:\fw\midicontroller\x011a\controller.c
001d62   f161                                                                                                               
001d64   c17b     MOVFF     0x17b,0x162                                                                                     
001d66   f162                                                                                                               
001d68   d000     BRA       0x1d6a         						break;                                                                     C:\fw\midicontroller\x011a\controller.c
                                           				}                                                                            C:\fw\midicontroller\x011a\controller.c
                                           			}                                                                             C:\fw\midicontroller\x011a\controller.c
001d6a   d000     BRA       0x1d6c         			break;                                                                        C:\fw\midicontroller\x011a\controller.c
                                           	}                                                                               C:\fw\midicontroller\x011a\controller.c
001d6c   c17e     MOVFF     0x17e,0x180    	sw_last = sw_curr;                                                              C:\fw\midicontroller\x011a\controller.c
001d6e   f180                                                                                                               
001d70   c17f     MOVFF     0x17f,0x181                                                                                     
001d72   f181                                                                                                               
001d74   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\controller.c
                                           ;###########################################################################     C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;#			Author: Joe Dunne											  #                                             C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;#			Date 4/06/07					      						  #                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;#			This file handles writing to the FLASH  (ROM).				  #                       C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;#			File Name: writeprogmem.asm   										  #                                 C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;#														 				  #                                                         C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;############################################################################    C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           	INCLUDE "p18F4455.inc"                                                          C:\fw\midicontroller\x011a\writeprogmem.asm
                                                   LIST                                                                     C:\fw\midicontroller\x011a\p18F4455.inc
                                                                                                                            C:\fw\midicontroller\x011a\p18F4455.inc
                                           ;==========================================================================      C:\fw\midicontroller\x011a\p18F4455.inc
                                           ;  $Id: P18F4455.INC,v 1.9 2006/10/25 17:47:56 nairnj Exp $                      C:\fw\midicontroller\x011a\p18F4455.inc
                                           ;  MPASM PIC18F4455 processor include                                            C:\fw\midicontroller\x011a\p18F4455.inc
                                           ;                                                                                C:\fw\midicontroller\x011a\p18F4455.inc
                                           ;  (c) Copyright 1999-2006 Microchip Technology, All rights reserved             C:\fw\midicontroller\x011a\p18F4455.inc
                                           ;==========================================================================      C:\fw\midicontroller\x011a\p18F4455.inc
                                                                                                                            C:\fw\midicontroller\x011a\p18F4455.inc
                                                   LIST                                                                     C:\fw\midicontroller\x011a\p18F4455.inc
                                           	LIST R=DEC                                                                      C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           	extern	WpmCounter, WpmCounter1                                                  C:\fw\midicontroller\x011a\writeprogmem.asm
                                           	global	READ_BLOCK_FROM_ROM, WRITE_BLOCK_INTO_ROM                                C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           	code                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;void	Read64BytesFromRom(                                                        C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;;READ_BLOCK_FROM_ROM                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;Before calling, set FSR0 = address of RAM buffer                                C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;Also, set TLPTR = address of ROM to read into RAM.                              C:\fw\midicontroller\x011a\writeprogmem.asm
                                           READ_BLOCK_FROM_ROM                                                              C:\fw\midicontroller\x011a\writeprogmem.asm
0034e2   0100     MOVLB     0x0            	movlb	high(WpmCounter)	;set appropriate bank.                                   C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
0034e4   0e40     MOVLW     0x40           	MOVLW	64			; number of bytes in erase block                                     C:\fw\midicontroller\x011a\writeprogmem.asm
0034e6   6fb9     MOVWF     0xb9,0x1       	MOVWF	WpmCounter                                                                C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVLW BUFFER_ADDR_HIGH 		; point to buffer                                     C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVWF FSR0H                                                                    C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVLW BUFFER_ADDR_LOW                                                          C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVWF FSR0L                                                                    C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVLW CODE_ADDR_UPPER		; Load TBLPTR with the base                             C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVWF TBLPTRU			; address of the memory block                                  C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVLW CODE_ADDR_HIGH                                                           C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVWF TBLPTRH                                                                  C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVLW CODE_ADDR_LOW                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVWF TBLPTRL                                                                  C:\fw\midicontroller\x011a\writeprogmem.asm
                                           READ_BLOCK                                                                       C:\fw\midicontroller\x011a\writeprogmem.asm
0034e8   0009     TBLRDPOSTINC             	TBLRD*+				; read into TABLAT, and inc                                          C:\fw\midicontroller\x011a\writeprogmem.asm
0034ea   50f5     MOVF      0xf5,0x0,0x0   	MOVF	TABLAT, W		; get data                                                      C:\fw\midicontroller\x011a\writeprogmem.asm
0034ec   6eee     MOVWF     0xee,0x0       	MOVWF	POSTINC0		; store data                                                    C:\fw\midicontroller\x011a\writeprogmem.asm
0034ee   2fb9     DECFSZ    0xb9,0x1,0x1   	DECFSZ	WpmCounter			; done?                                                     C:\fw\midicontroller\x011a\writeprogmem.asm
0034f0   d7fb     BRA       0x34e8         	BRA	READ_BLOCK		; repeat                                                        C:\fw\midicontroller\x011a\writeprogmem.asm
0034f2   0012     RETURN    0x0            	return                                                                          C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;;WRITE_BLOCK_INTO_ROM                                                           C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;Before calling, set FSR0 = address of RAM buffer                                C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;Also, set TBLPTR = address of ROM to write to  (must be on 64 byte boundary).   C:\fw\midicontroller\x011a\writeprogmem.asm
                                           WRITE_BLOCK_INTO_ROM                                                             C:\fw\midicontroller\x011a\writeprogmem.asm
0034f4   0100     MOVLB     0x0            	movlb	high(WpmCounter)	;set appropriate bank.                                   C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVLW CODE_ADDR_UPPER 	                                                        C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVWF TBLPTRU                                                                  C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVLW CODE_ADDR_HIGH                                                           C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVWF TBLPTRH                                                                  C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVLW CODE_ADDR_LOW                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVWF TBLPTRL                                                                  C:\fw\midicontroller\x011a\writeprogmem.asm
0034f6   8ea6     BSF       0xa6,0x7,0x0   	BSF	EECON1, EEPGD		; point to Flash program memory                              C:\fw\midicontroller\x011a\writeprogmem.asm
0034f8   9ca6     BCF       0xa6,0x6,0x0   	BCF	EECON1, CFGS		; access Flash program memory                                 C:\fw\midicontroller\x011a\writeprogmem.asm
0034fa   84a6     BSF       0xa6,0x2,0x0   	BSF	EECON1, WREN		; enable write to memory                                      C:\fw\midicontroller\x011a\writeprogmem.asm
0034fc   88a6     BSF       0xa6,0x4,0x0   	BSF	EECON1, FREE		; enable Row Erase operation                                  C:\fw\midicontroller\x011a\writeprogmem.asm
0034fe   9ef2     BCF       0xf2,0x7,0x0   	BCF	INTCON, GIE 		; disable interrupts                                          C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;perform erase opration:                                                         C:\fw\midicontroller\x011a\writeprogmem.asm
003500   0e55     MOVLW     0x55           	MOVLW	55h                                                                       C:\fw\midicontroller\x011a\writeprogmem.asm
003502   6ea7     MOVWF     0xa7,0x0       	MOVWF	EECON2			; write 55h                                                      C:\fw\midicontroller\x011a\writeprogmem.asm
003504   0eaa     MOVLW     0xaa           	MOVLW	0AAh                                                                      C:\fw\midicontroller\x011a\writeprogmem.asm
003506   6ea7     MOVWF     0xa7,0x0       	MOVWF	EECON2			; write 0AAh                                                     C:\fw\midicontroller\x011a\writeprogmem.asm
003508   82a6     BSF       0xa6,0x1,0x0   	BSF	EECON1, WR		; start erase (CPU stall)                                       C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
00350a   8ef2     BSF       0xf2,0x7,0x0   	BSF	INTCON, GIE 		; re-enable interrupts                                        C:\fw\midicontroller\x011a\writeprogmem.asm
00350c   000a     TBLRDPOSTDEC             	TBLRD*- 			; dummy read decrement                                               C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVLW	BUFFER_ADDR_HIGH	; point to buffer                                       C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVWF	FSR0H                                                                    C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVLW	BUFFER_ADDR_LOW                                                          C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;	MOVWF	FSR0L                                                                    C:\fw\midicontroller\x011a\writeprogmem.asm
00350e   0e02     MOVLW     0x2            	MOVLW	2                                                                         C:\fw\midicontroller\x011a\writeprogmem.asm
003510   6fba     MOVWF     0xba,0x1       	MOVWF	WpmCounter1                                                               C:\fw\midicontroller\x011a\writeprogmem.asm
                                           WRITE_BUFFER_BACK                                                                C:\fw\midicontroller\x011a\writeprogmem.asm
003512   0e20     MOVLW     0x20           	MOVLW	32	 		; number of bytes in holding register                               C:\fw\midicontroller\x011a\writeprogmem.asm
003514   6fb9     MOVWF     0xb9,0x1       	MOVWF	WpmCounter                                                                C:\fw\midicontroller\x011a\writeprogmem.asm
                                           WRITE_BYTE_TO_HREGS                                                              C:\fw\midicontroller\x011a\writeprogmem.asm
003516   50ee     MOVF      0xee,0x0,0x0   	MOVF	POSTINC0, W 		; get low byte of buffer data                                C:\fw\midicontroller\x011a\writeprogmem.asm
003518   6ef5     MOVWF     0xf5,0x0       	MOVWF	TABLAT 			; present data to table latch                                   C:\fw\midicontroller\x011a\writeprogmem.asm
00351a   000f     TBLWTPREINC              	TBLWT+* 			; write data, perform a short write                                  C:\fw\midicontroller\x011a\writeprogmem.asm
                                           					; to internal TBLWT holding register.                                       C:\fw\midicontroller\x011a\writeprogmem.asm
00351c   2fb9     DECFSZ    0xb9,0x1,0x1   	DECFSZ	WpmCounter 		; loop until buffers are full                               C:\fw\midicontroller\x011a\writeprogmem.asm
00351e   d7fb     BRA       0x3516         	BRA	WRITE_BYTE_TO_HREGS                                                         C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           PROGRAM_MEMORY                                                                   C:\fw\midicontroller\x011a\writeprogmem.asm
003520   8ea6     BSF       0xa6,0x7,0x0   	BSF	EECON1, EEPGD		; point to Flash program memory                              C:\fw\midicontroller\x011a\writeprogmem.asm
003522   9ca6     BCF       0xa6,0x6,0x0   	BCF	EECON1, CFGS		; access Flash program memory                                 C:\fw\midicontroller\x011a\writeprogmem.asm
003524   84a6     BSF       0xa6,0x2,0x0   	BSF	EECON1, WREN		; enable write to memory                                      C:\fw\midicontroller\x011a\writeprogmem.asm
003526   9ef2     BCF       0xf2,0x7,0x0   	BCF	INTCON, GIE		; disable interrupts                                           C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           ;Write to program memmory:                                                       C:\fw\midicontroller\x011a\writeprogmem.asm
003528   0e55     MOVLW     0x55           	MOVLW	55h                                                                       C:\fw\midicontroller\x011a\writeprogmem.asm
00352a   6ea7     MOVWF     0xa7,0x0       	MOVWF	EECON2			; write 55h                                                      C:\fw\midicontroller\x011a\writeprogmem.asm
00352c   0eaa     MOVLW     0xaa           	MOVLW	0AAh                                                                      C:\fw\midicontroller\x011a\writeprogmem.asm
00352e   6ea7     MOVWF     0xa7,0x0       	MOVWF	EECON2			; write 0AAh                                                     C:\fw\midicontroller\x011a\writeprogmem.asm
003530   82a6     BSF       0xa6,0x1,0x0   	BSF	EECON1, WR		; start program (CPU stall)                                     C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
003532   2fba     DECFSZ    0xba,0x1,0x1   	DECFSZ	WpmCounter1                                                              C:\fw\midicontroller\x011a\writeprogmem.asm
003534   d7ee     BRA       0x3512         	BRA	WRITE_BUFFER_BACK                                                           C:\fw\midicontroller\x011a\writeprogmem.asm
003536   8ef2     BSF       0xf2,0x7,0x0   	BSF	INTCON, GIE		; re-enable interrupts                                         C:\fw\midicontroller\x011a\writeprogmem.asm
003538   94a6     BCF       0xa6,0x2,0x0   	BCF	EECON1, WREN		; disable write to memory                                     C:\fw\midicontroller\x011a\writeprogmem.asm
00353a   0012     RETURN    0x0            	return                                                                          C:\fw\midicontroller\x011a\writeprogmem.asm
                                                                                                                            C:\fw\midicontroller\x011a\writeprogmem.asm
                                           	END                                                                             C:\fw\midicontroller\x011a\writeprogmem.asm
                                           //*;###########################################################################  C:\fw\midicontroller\x011a\vectors.c
                                           //;#			Author: Joe Dunne											  #                                           C:\fw\midicontroller\x011a\vectors.c
                                           //;#			Date 4/06/07					      						  #                                          C:\fw\midicontroller\x011a\vectors.c
                                           //;#			vectors									  			  #                                                  C:\fw\midicontroller\x011a\vectors.c
                                           //;#			File Name: vectors.c   										  #                                      C:\fw\midicontroller\x011a\vectors.c
                                           //;#																		  #                                                        C:\fw\midicontroller\x011a\vectors.c
                                           //;############################################################################  C:\fw\midicontroller\x011a\vectors.c
                                                                                                                            C:\fw\midicontroller\x011a\vectors.c
                                                                                                                            C:\fw\midicontroller\x011a\vectors.c
                                           #include "c_system.h"                                                            C:\fw\midicontroller\x011a\vectors.c
                                                                                                                            C:\fw\midicontroller\x011a\vectors.c
                                           void main(void);                                                                 C:\fw\midicontroller\x011a\vectors.c
                                                                                                                            C:\fw\midicontroller\x011a\vectors.c
                                           #pragma code RealInitVector = 0x00                                               C:\fw\midicontroller\x011a\vectors.c
                                           void                                                                             C:\fw\midicontroller\x011a\vectors.c
                                           RealInitVector (void)                                                            C:\fw\midicontroller\x011a\vectors.c
                                           {                                                                                C:\fw\midicontroller\x011a\vectors.c
                                             _asm                                                                           C:\fw\midicontroller\x011a\vectors.c
000000   ef15     GOTO      0xa2a          	goto main //jump to interrupt routine                                           C:\fw\midicontroller\x011a\vectors.c
000002   f005                                                                                                               
                                             _endasm                                                                        C:\fw\midicontroller\x011a\vectors.c
000004   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\vectors.c
                                                                                                                            C:\fw\midicontroller\x011a\vectors.c
                                           #pragma code RealInterruptVectorHigh = 0x08                                      C:\fw\midicontroller\x011a\vectors.c
                                           void                                                                             C:\fw\midicontroller\x011a\vectors.c
                                           RealInterruptVectorHigh (void)                                                   C:\fw\midicontroller\x011a\vectors.c
                                           {                                                                                C:\fw\midicontroller\x011a\vectors.c
                                             _asm                                                                           C:\fw\midicontroller\x011a\vectors.c
000008   effd     GOTO      0x35fa         	goto InterruptHandlerHigh //jump to interrupt routine                           C:\fw\midicontroller\x011a\vectors.c
00000a   f01a                                                                                                               
                                             _endasm                                                                        C:\fw\midicontroller\x011a\vectors.c
00000c   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\vectors.c
                                                                                                                            C:\fw\midicontroller\x011a\vectors.c
                                           //*;###########################################################################  C:\fw\midicontroller\x011a\eeprom.c
                                           //;#			Author: Joe Dunne											  #                                           C:\fw\midicontroller\x011a\eeprom.c
                                           //;#			Date 4/06/07					      						  #                                          C:\fw\midicontroller\x011a\eeprom.c
                                           //;#			EEProm access functions							  			  #                                    C:\fw\midicontroller\x011a\eeprom.c
                                           //;#			File Name: eeprom.c   										  #                                       C:\fw\midicontroller\x011a\eeprom.c
                                           //;#																		  #                                                        C:\fw\midicontroller\x011a\eeprom.c
                                           //;############################################################################  C:\fw\midicontroller\x011a\eeprom.c
                                                                                                                            C:\fw\midicontroller\x011a\eeprom.c
                                           #include "c_system.h"                                                            C:\fw\midicontroller\x011a\eeprom.c
                                                                                                                            C:\fw\midicontroller\x011a\eeprom.c
0035a2   cfd9     MOVFF     0xfd9,0xfe6    unsigned char EERead(unsigned char addr) {                                       C:\fw\midicontroller\x011a\eeprom.c
0035a4   ffe6                                                                                                               
0035a6   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0035a8   ffd9                                                                                                               
0035aa   0efe     MOVLW     0xfe           	EEADR=(unsigned char)addr;	// Address to read                                   C:\fw\midicontroller\x011a\eeprom.c
0035ac   50db     MOVF      0xdb,0x0,0x0                                                                                    
0035ae   6ea9     MOVWF     0xa9,0x0                                                                                        
0035b0   9ea6     BCF       0xa6,0x7,0x0   	EECON1bits.EEPGD=0;			// Point to Data Memory                                   C:\fw\midicontroller\x011a\eeprom.c
0035b2   9ca6     BCF       0xa6,0x6,0x0   	EECON1bits.CFGS=0;			// Access EEPROM                                           C:\fw\midicontroller\x011a\eeprom.c
0035b4   80a6     BSF       0xa6,0x0,0x0   	EECON1bits.RD=1;			// EE Read                                                   C:\fw\midicontroller\x011a\eeprom.c
0035b6   50a8     MOVF      0xa8,0x0,0x0   	return EEDATA;				// W = EEDATA                                                 C:\fw\midicontroller\x011a\eeprom.c
0035b8   d000     BRA       0x35ba                                                                                          
0035ba   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\eeprom.c
0035bc   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0035be   ffd9                                                                                                               
0035c0   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\eeprom.c
                                           //blocking write that takes approximately 4mS ??                                 C:\fw\midicontroller\x011a\eeprom.c
0035c2   cfd9     MOVFF     0xfd9,0xfe6    void EEWrite(unsigned char addr,unsigned char data) {                            C:\fw\midicontroller\x011a\eeprom.c
0035c4   ffe6                                                                                                               
0035c6   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
0035c8   ffd9                                                                                                               
0035ca   0efe     MOVLW     0xfe           	EEADR = (unsigned char)addr;                                                    C:\fw\midicontroller\x011a\eeprom.c
0035cc   50db     MOVF      0xdb,0x0,0x0                                                                                    
0035ce   6ea9     MOVWF     0xa9,0x0                                                                                        
0035d0   0efd     MOVLW     0xfd           	EEDATA=data;                                                                    C:\fw\midicontroller\x011a\eeprom.c
0035d2   50db     MOVF      0xdb,0x0,0x0                                                                                    
0035d4   6ea8     MOVWF     0xa8,0x0                                                                                        
                                           	                                                                                C:\fw\midicontroller\x011a\eeprom.c
0035d6   9ea6     BCF       0xa6,0x7,0x0   	EECON1bits.EEPGD=0;			// Point to Data Memory                                   C:\fw\midicontroller\x011a\eeprom.c
0035d8   9ca6     BCF       0xa6,0x6,0x0   	EECON1bits.CFGS=0;			// Access EEPROM                                           C:\fw\midicontroller\x011a\eeprom.c
0035da   84a6     BSF       0xa6,0x2,0x0   	EECON1bits.WREN=1;                                                              C:\fw\midicontroller\x011a\eeprom.c
                                                                                                                            C:\fw\midicontroller\x011a\eeprom.c
0035dc   9ef2     BCF       0xf2,0x7,0x0   	INTCONbits.GIE = 0;			// Disable global interrupts                              C:\fw\midicontroller\x011a\eeprom.c
0035de   0e55     MOVLW     0x55           	EECON2=0x55;				// Required                                                     C:\fw\midicontroller\x011a\eeprom.c
0035e0   6ea7     MOVWF     0xa7,0x0                                                                                        
0035e2   0eaa     MOVLW     0xaa           	EECON2=0xAA;				// Required                                                     C:\fw\midicontroller\x011a\eeprom.c
0035e4   6ea7     MOVWF     0xa7,0x0                                                                                        
0035e6   82a6     BSF       0xa6,0x1,0x0   	EECON1bits.WR=1;			// Enable writes                                             C:\fw\midicontroller\x011a\eeprom.c
                                           	do {                                                                            C:\fw\midicontroller\x011a\eeprom.c
0035e8   0004     CLRWDT                   		ClrWdt();                                                                      C:\fw\midicontroller\x011a\eeprom.c
0035ea   b2a6     BTFSC     0xa6,0x1,0x0   	} while(EECON1bits.WR);		// block until write complete                          C:\fw\midicontroller\x011a\eeprom.c
0035ec   d7fd     BRA       0x35e8                                                                                          
                                                                                                                            C:\fw\midicontroller\x011a\eeprom.c
0035ee   8ef2     BSF       0xf2,0x7,0x0   	INTCONbits.GIE = 1;			// Enable global interrupts                               C:\fw\midicontroller\x011a\eeprom.c
0035f0   94a6     BCF       0xa6,0x2,0x0   	EECON1bits.WREN=0;			// Disable writes                                          C:\fw\midicontroller\x011a\eeprom.c
0035f2   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\eeprom.c
0035f4   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
0035f6   ffd9                                                                                                               
0035f8   0012     RETURN    0x0                                                                                             
                                           //*;###########################################################################  C:\fw\midicontroller\x011a\leds.c
                                           //;#			Author: Joe Dunne											  #                                           C:\fw\midicontroller\x011a\leds.c
                                           //;#			Date 4/06/07					      						  #                                          C:\fw\midicontroller\x011a\leds.c
                                           //;#			Main arbitrator									  			  #                                          C:\fw\midicontroller\x011a\leds.c
                                           //;#			File Name: main.c   										  #                                         C:\fw\midicontroller\x011a\leds.c
                                           //;#																		  #                                                        C:\fw\midicontroller\x011a\leds.c
                                           //;############################################################################  C:\fw\midicontroller\x011a\leds.c
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
                                           #include "c_system.h"                                                            C:\fw\midicontroller\x011a\leds.c
                                           #include "usb.h"                                                                 C:\fw\midicontroller\x011a\leds.c
                                           #include "hardware.h"                                                            C:\fw\midicontroller\x011a\leds.c
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
                                           void	ProcessLeds(void) {                                                         C:\fw\midicontroller\x011a\leds.c
                                           	static unsigned char ComPointer;                                                C:\fw\midicontroller\x011a\leds.c
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
0028e8   d834     RCALL     0x2952         	AllDigitsOff();                                                                 C:\fw\midicontroller\x011a\leds.c
0028ea   0100     MOVLB     0x0            	switch (ComPointer) {                                                           C:\fw\midicontroller\x011a\leds.c
0028ec   51fb     MOVF      0xfb,0x0,0x1                                                                                    
0028ee   0a04     XORLW     0x4                                                                                             
0028f0   e021     BZ        0x2934                                                                                          
0028f2   0a07     XORLW     0x7                                                                                             
0028f4   e019     BZ        0x2928                                                                                          
0028f6   0a01     XORLW     0x1                                                                                             
0028f8   e011     BZ        0x291c                                                                                          
0028fa   0a03     XORLW     0x3                                                                                             
0028fc   e009     BZ        0x2910                                                                                          
0028fe   0a01     XORLW     0x1                                                                                             
002900   e001     BZ        0x2904                                                                                          
                                           		case 0:                                                                        C:\fw\midicontroller\x011a\leds.c
002904   9a8a     BCF       0x8a,0x5,0x0   			DISP_COM0_LAT_BIT = false;                                                    C:\fw\midicontroller\x011a\leds.c
002906   c0fb     MOVFF     0xfb,0xfe6     			HandleDigit(ComPointer);                                                      C:\fw\midicontroller\x011a\leds.c
002908   ffe6                                                                                                               
00290a   d831     RCALL     0x296e                                                                                          
00290c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00290e   d018     BRA       0x2940         			break;                                                                        C:\fw\midicontroller\x011a\leds.c
                                           		case 1:                                                                        C:\fw\midicontroller\x011a\leds.c
002910   908b     BCF       0x8b,0x0,0x0   			DISP_COM1_LAT_BIT = false;                                                    C:\fw\midicontroller\x011a\leds.c
002912   c0fb     MOVFF     0xfb,0xfe6     			HandleDigit(ComPointer);                                                      C:\fw\midicontroller\x011a\leds.c
002914   ffe6                                                                                                               
002916   d82b     RCALL     0x296e                                                                                          
002918   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00291a   d012     BRA       0x2940         			break;                                                                        C:\fw\midicontroller\x011a\leds.c
                                           		case 2:                                                                        C:\fw\midicontroller\x011a\leds.c
00291c   968a     BCF       0x8a,0x3,0x0   			DISP_COM2_LAT_BIT = false;                                                    C:\fw\midicontroller\x011a\leds.c
00291e   c0fb     MOVFF     0xfb,0xfe6     			HandleDigit(ComPointer);                                                      C:\fw\midicontroller\x011a\leds.c
002920   ffe6                                                                                                               
002922   d825     RCALL     0x296e                                                                                          
002924   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002926   d00c     BRA       0x2940         			break;                                                                        C:\fw\midicontroller\x011a\leds.c
                                           		case 3:                                                                        C:\fw\midicontroller\x011a\leds.c
002928   948a     BCF       0x8a,0x2,0x0   			DISP_COM3_LAT_BIT = false;                                                    C:\fw\midicontroller\x011a\leds.c
00292a   c0fb     MOVFF     0xfb,0xfe6     			HandleDigit(ComPointer);                                                      C:\fw\midicontroller\x011a\leds.c
00292c   ffe6                                                                                                               
00292e   d81f     RCALL     0x296e                                                                                          
002930   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002932   d006     BRA       0x2940         			break;                                                                        C:\fw\midicontroller\x011a\leds.c
                                           		case 4:                                                                        C:\fw\midicontroller\x011a\leds.c
002934   928a     BCF       0x8a,0x1,0x0   			DISP_COM4_LAT_BIT = false;                                                    C:\fw\midicontroller\x011a\leds.c
002936   c0fb     MOVFF     0xfb,0xfe6     			HandleDigit(ComPointer);                                                      C:\fw\midicontroller\x011a\leds.c
002938   ffe6                                                                                                               
00293a   d819     RCALL     0x296e                                                                                          
00293c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
00293e   d000     BRA       0x2940         			break;                                                                        C:\fw\midicontroller\x011a\leds.c
                                           		default:                                                                       C:\fw\midicontroller\x011a\leds.c
                                           			//do nothing                                                                  C:\fw\midicontroller\x011a\leds.c
002902   d01e     BRA       0x2940         			break;                                                                        C:\fw\midicontroller\x011a\leds.c
                                           	}                                                                               C:\fw\midicontroller\x011a\leds.c
002940   0100     MOVLB     0x0            	if (++ComPointer >= DispNumOfCommons) ComPointer = 0;                           C:\fw\midicontroller\x011a\leds.c
002942   2bfb     INCF      0xfb,0x1,0x1                                                                                    
002944   0100     MOVLB     0x0                                                                                             
002946   5167     MOVF      0x67,0x0,0x1                                                                                    
002948   0100     MOVLB     0x0                                                                                             
00294a   5dfb     SUBWF     0xfb,0x0,0x1                                                                                    
00294c   e301     BNC       0x2950                                                                                          
00294e   6bfb     CLRF      0xfb,0x1                                                                                        
002950   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\leds.c
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
                                           void	AllDigitsOff(void) {                                                        C:\fw\midicontroller\x011a\leds.c
002952   908a     BCF       0x8a,0x0,0x0   	DISP_SEG0_LAT_BIT = false;                                                      C:\fw\midicontroller\x011a\leds.c
002954   9e8c     BCF       0x8c,0x7,0x0   	DISP_SEG1_LAT_BIT = false;                                                      C:\fw\midicontroller\x011a\leds.c
002956   9c8c     BCF       0x8c,0x6,0x0   	DISP_SEG2_LAT_BIT = false;                                                      C:\fw\midicontroller\x011a\leds.c
002958   9a8c     BCF       0x8c,0x5,0x0   	DISP_SEG3_LAT_BIT = false;                                                      C:\fw\midicontroller\x011a\leds.c
00295a   988c     BCF       0x8c,0x4,0x0   	DISP_SEG4_LAT_BIT = false;                                                      C:\fw\midicontroller\x011a\leds.c
00295c   948b     BCF       0x8b,0x2,0x0   	DISP_SEG5_LAT_BIT = false;                                                      C:\fw\midicontroller\x011a\leds.c
00295e   968c     BCF       0x8c,0x3,0x0   	DISP_SEG6_LAT_BIT = false;                                                      C:\fw\midicontroller\x011a\leds.c
002960   948c     BCF       0x8c,0x2,0x0   	DISP_SEG7_LAT_BIT = false;                                                      C:\fw\midicontroller\x011a\leds.c
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
002962   8a8a     BSF       0x8a,0x5,0x0   	DISP_COM0_LAT_BIT = true;                                                       C:\fw\midicontroller\x011a\leds.c
002964   808b     BSF       0x8b,0x0,0x0   	DISP_COM1_LAT_BIT = true;                                                       C:\fw\midicontroller\x011a\leds.c
002966   868a     BSF       0x8a,0x3,0x0   	DISP_COM2_LAT_BIT = true;                                                       C:\fw\midicontroller\x011a\leds.c
002968   848a     BSF       0x8a,0x2,0x0   	DISP_COM3_LAT_BIT = true;                                                       C:\fw\midicontroller\x011a\leds.c
00296a   828a     BSF       0x8a,0x1,0x0   	DISP_COM4_LAT_BIT = true;                                                       C:\fw\midicontroller\x011a\leds.c
00296c   0012     RETURN    0x0            }                                                                                C:\fw\midicontroller\x011a\leds.c
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
00296e   cfd9     MOVFF     0xfd9,0xfe6    void	HandleDigit(unsigned char ComPointer) {                                     C:\fw\midicontroller\x011a\leds.c
002970   ffe6                                                                                                               
002972   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002974   ffd9                                                                                                               
002976   52e6     MOVF      0xe6,0x1,0x0                                                                                    
                                           	BitField x;                                                                     C:\fw\midicontroller\x011a\leds.c
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
002978   0efe     MOVLW     0xfe           	x.byte = DispSegData[ComPointer].byte;                                          C:\fw\midicontroller\x011a\leds.c
00297a   50db     MOVF      0xdb,0x0,0x0                                                                                    
00297c   6aea     CLRF      0xea,0x0                                                                                        
00297e   0f62     ADDLW     0x62                                                                                            
002980   6ee9     MOVWF     0xe9,0x0                                                                                        
002982   0e00     MOVLW     0x0                                                                                             
002984   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002986   cfef     MOVFF     0xfef,0xfdf                                                                                     
002988   ffdf                                                                                                               
00298a   cfd9     MOVFF     0xfd9,0xfe9    	if (x.bit0) DISP_SEG0_LAT_BIT = true;                                           C:\fw\midicontroller\x011a\leds.c
00298c   ffe9                                                                                                               
00298e   cfda     MOVFF     0xfda,0xfea                                                                                     
002990   ffea                                                                                                               
002992   50ef     MOVF      0xef,0x0,0x0                                                                                    
002994   0b01     ANDLW     0x1                                                                                             
002996   e001     BZ        0x299a                                                                                          
002998   808a     BSF       0x8a,0x0,0x0                                                                                    
00299a   cfd9     MOVFF     0xfd9,0xfe9    	if (x.bit1) DISP_SEG1_LAT_BIT = true;                                           C:\fw\midicontroller\x011a\leds.c
00299c   ffe9                                                                                                               
00299e   cfda     MOVFF     0xfda,0xfea                                                                                     
0029a0   ffea                                                                                                               
0029a2   50ef     MOVF      0xef,0x0,0x0                                                                                    
0029a4   0b02     ANDLW     0x2                                                                                             
0029a6   e001     BZ        0x29aa                                                                                          
0029a8   8e8c     BSF       0x8c,0x7,0x0                                                                                    
0029aa   cfd9     MOVFF     0xfd9,0xfe9    	if (x.bit2) DISP_SEG2_LAT_BIT = true;                                           C:\fw\midicontroller\x011a\leds.c
0029ac   ffe9                                                                                                               
0029ae   cfda     MOVFF     0xfda,0xfea                                                                                     
0029b0   ffea                                                                                                               
0029b2   50ef     MOVF      0xef,0x0,0x0                                                                                    
0029b4   0b04     ANDLW     0x4                                                                                             
0029b6   e001     BZ        0x29ba                                                                                          
0029b8   8c8c     BSF       0x8c,0x6,0x0                                                                                    
0029ba   cfd9     MOVFF     0xfd9,0xfe9    	if (x.bit3) DISP_SEG3_LAT_BIT = true;                                           C:\fw\midicontroller\x011a\leds.c
0029bc   ffe9                                                                                                               
0029be   cfda     MOVFF     0xfda,0xfea                                                                                     
0029c0   ffea                                                                                                               
0029c2   50ef     MOVF      0xef,0x0,0x0                                                                                    
0029c4   0b08     ANDLW     0x8                                                                                             
0029c6   e001     BZ        0x29ca                                                                                          
0029c8   8a8c     BSF       0x8c,0x5,0x0                                                                                    
0029ca   cfd9     MOVFF     0xfd9,0xfe9    	if (x.bit4) DISP_SEG4_LAT_BIT = true;                                           C:\fw\midicontroller\x011a\leds.c
0029cc   ffe9                                                                                                               
0029ce   cfda     MOVFF     0xfda,0xfea                                                                                     
0029d0   ffea                                                                                                               
0029d2   50ef     MOVF      0xef,0x0,0x0                                                                                    
0029d4   0b10     ANDLW     0x10                                                                                            
0029d6   e001     BZ        0x29da                                                                                          
0029d8   888c     BSF       0x8c,0x4,0x0                                                                                    
0029da   cfd9     MOVFF     0xfd9,0xfe9    	if (x.bit5) DISP_SEG5_LAT_BIT = true;                                           C:\fw\midicontroller\x011a\leds.c
0029dc   ffe9                                                                                                               
0029de   cfda     MOVFF     0xfda,0xfea                                                                                     
0029e0   ffea                                                                                                               
0029e2   50ef     MOVF      0xef,0x0,0x0                                                                                    
0029e4   0b20     ANDLW     0x20                                                                                            
0029e6   e001     BZ        0x29ea                                                                                          
0029e8   848b     BSF       0x8b,0x2,0x0                                                                                    
0029ea   cfd9     MOVFF     0xfd9,0xfe9    	if (x.bit6) DISP_SEG6_LAT_BIT = true;                                           C:\fw\midicontroller\x011a\leds.c
0029ec   ffe9                                                                                                               
0029ee   cfda     MOVFF     0xfda,0xfea                                                                                     
0029f0   ffea                                                                                                               
0029f2   50ef     MOVF      0xef,0x0,0x0                                                                                    
0029f4   0b40     ANDLW     0x40                                                                                            
0029f6   e001     BZ        0x29fa                                                                                          
0029f8   868c     BSF       0x8c,0x3,0x0                                                                                    
0029fa   cfd9     MOVFF     0xfd9,0xfe9    	if (x.bit7) DISP_SEG7_LAT_BIT = true;                                           C:\fw\midicontroller\x011a\leds.c
0029fc   ffe9                                                                                                               
0029fe   cfda     MOVFF     0xfda,0xfea                                                                                     
002a00   ffea                                                                                                               
002a02   50ef     MOVF      0xef,0x0,0x0                                                                                    
002a04   0b80     ANDLW     0x80                                                                                            
002a06   e001     BZ        0x2a0a                                                                                          
002a08   848c     BSF       0x8c,0x2,0x0                                                                                    
002a0a   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\leds.c
002a0c   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002a0e   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002a10   ffd9                                                                                                               
002a12   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
002a14   cfd9     MOVFF     0xfd9,0xfe6    void	SetDispAscii(unsigned char chars[]) {                                       C:\fw\midicontroller\x011a\leds.c
002a16   ffe6                                                                                                               
002a18   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002a1a   ffd9                                                                                                               
002a1c   0e02     MOVLW     0x2                                                                                             
002a1e   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	unsigned char x,i;                                                              C:\fw\midicontroller\x011a\leds.c
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
002a20   0e01     MOVLW     0x1            	for (i = 0;i<5;i++) {                                                           C:\fw\midicontroller\x011a\leds.c
002a22   6adb     CLRF      0xdb,0x0                                                                                        
002a24   0e05     MOVLW     0x5                                                                                             
002a26   6ef3     MOVWF     0xf3,0x0                                                                                        
002a28   0e01     MOVLW     0x1                                                                                             
002a2a   cfdb     MOVFF     0xfdb,0xff4                                                                                     
002a2c   fff4                                                                                                               
002a2e   50f3     MOVF      0xf3,0x0,0x0                                                                                    
002a30   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
002a32   e221     BC        0x2a76                                                                                          
002a70   0e01     MOVLW     0x1                                                                                             
002a72   2adb     INCF      0xdb,0x1,0x0                                                                                    
002a74   d7d7     BRA       0x2a24                                                                                          
002a34   0e01     MOVLW     0x1            		x = chars[i];                                                                  C:\fw\midicontroller\x011a\leds.c
002a36   50db     MOVF      0xdb,0x0,0x0                                                                                    
002a38   6ee7     MOVWF     0xe7,0x0                                                                                        
002a3a   0efd     MOVLW     0xfd                                                                                            
002a3c   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
002a3e   ffe9                                                                                                               
002a40   0efe     MOVLW     0xfe                                                                                            
002a42   cfdb     MOVFF     0xfdb,0xfea                                                                                     
002a44   ffea                                                                                                               
002a46   50e7     MOVF      0xe7,0x0,0x0                                                                                    
002a48   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002a4a   0e00     MOVLW     0x0                                                                                             
002a4c   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002a4e   cfef     MOVFF     0xfef,0xfdf                                                                                     
002a50   ffdf                                                                                                               
002a52   cfdf     MOVFF     0xfdf,0xfe6    		DispSegData[i].byte = AsciiTo7Seg(x);                                          C:\fw\midicontroller\x011a\leds.c
002a54   ffe6                                                                                                               
002a56   d864     RCALL     0x2b20                                                                                          
002a58   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002a5a   6ee6     MOVWF     0xe6,0x0                                                                                        
002a5c   0e01     MOVLW     0x1                                                                                             
002a5e   50db     MOVF      0xdb,0x0,0x0                                                                                    
002a60   6aea     CLRF      0xea,0x0                                                                                        
002a62   0f62     ADDLW     0x62                                                                                            
002a64   6ee9     MOVWF     0xe9,0x0                                                                                        
002a66   0e00     MOVLW     0x0                                                                                             
002a68   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002a6a   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002a6c   50e7     MOVF      0xe7,0x0,0x0                                                                                    
002a6e   6eef     MOVWF     0xef,0x0                                                                                        
                                           	}                                                                               C:\fw\midicontroller\x011a\leds.c
002a76   0e02     MOVLW     0x2            }                                                                                C:\fw\midicontroller\x011a\leds.c
002a78   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
002a7a   e202     BC        0x2a80                                                                                          
002a7c   6ae1     CLRF      0xe1,0x0                                                                                        
002a7e   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002a80   6ee1     MOVWF     0xe1,0x0                                                                                        
002a82   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002a84   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002a86   ffd9                                                                                                               
002a88   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
                                           /* show 4 alphas on the 4-digit display */                                       C:\fw\midicontroller\x011a\leds.c
002a8a   cfd9     MOVFF     0xfd9,0xfe6    void leds_show_4alphas(char text[LEDS_MAX_ALPHAS]){                              C:\fw\midicontroller\x011a\leds.c
002a8c   ffe6                                                                                                               
002a8e   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002a90   ffd9                                                                                                               
002a92   0e02     MOVLW     0x2                                                                                             
002a94   26e1     ADDWF     0xe1,0x1,0x0                                                                                    
                                           	unsigned char x,i;                                                              C:\fw\midicontroller\x011a\leds.c
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
002a96   0e01     MOVLW     0x1            	for (i = 0;i<4;i++) {                                                           C:\fw\midicontroller\x011a\leds.c
002a98   6adb     CLRF      0xdb,0x0                                                                                        
002a9a   0e04     MOVLW     0x4                                                                                             
002a9c   6ef3     MOVWF     0xf3,0x0                                                                                        
002a9e   0e01     MOVLW     0x1                                                                                             
002aa0   cfdb     MOVFF     0xfdb,0xff4                                                                                     
002aa2   fff4                                                                                                               
002aa4   50f3     MOVF      0xf3,0x0,0x0                                                                                    
002aa6   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
002aa8   e221     BC        0x2aec                                                                                          
002ae6   0e01     MOVLW     0x1                                                                                             
002ae8   2adb     INCF      0xdb,0x1,0x0                                                                                    
002aea   d7d7     BRA       0x2a9a                                                                                          
002aaa   0e01     MOVLW     0x1            		x = text[i];                                                                   C:\fw\midicontroller\x011a\leds.c
002aac   50db     MOVF      0xdb,0x0,0x0                                                                                    
002aae   6ee7     MOVWF     0xe7,0x0                                                                                        
002ab0   0efd     MOVLW     0xfd                                                                                            
002ab2   cfdb     MOVFF     0xfdb,0xfe9                                                                                     
002ab4   ffe9                                                                                                               
002ab6   0efe     MOVLW     0xfe                                                                                            
002ab8   cfdb     MOVFF     0xfdb,0xfea                                                                                     
002aba   ffea                                                                                                               
002abc   50e7     MOVF      0xe7,0x0,0x0                                                                                    
002abe   26e9     ADDWF     0xe9,0x1,0x0                                                                                    
002ac0   0e00     MOVLW     0x0                                                                                             
002ac2   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002ac4   cfef     MOVFF     0xfef,0xfdf                                                                                     
002ac6   ffdf                                                                                                               
002ac8   cfdf     MOVFF     0xfdf,0xfe6    		DispSegData[i].byte = AsciiTo7Seg(x);                                          C:\fw\midicontroller\x011a\leds.c
002aca   ffe6                                                                                                               
002acc   d829     RCALL     0x2b20                                                                                          
002ace   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002ad0   6ee6     MOVWF     0xe6,0x0                                                                                        
002ad2   0e01     MOVLW     0x1                                                                                             
002ad4   50db     MOVF      0xdb,0x0,0x0                                                                                    
002ad6   6aea     CLRF      0xea,0x0                                                                                        
002ad8   0f62     ADDLW     0x62                                                                                            
002ada   6ee9     MOVWF     0xe9,0x0                                                                                        
002adc   0e00     MOVLW     0x0                                                                                             
002ade   22ea     ADDWFC    0xea,0x1,0x0                                                                                    
002ae0   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002ae2   50e7     MOVF      0xe7,0x0,0x0                                                                                    
002ae4   6eef     MOVWF     0xef,0x0                                                                                        
                                           	}                                                                               C:\fw\midicontroller\x011a\leds.c
002aec   0e02     MOVLW     0x2            }                                                                                C:\fw\midicontroller\x011a\leds.c
002aee   5ce1     SUBWF     0xe1,0x0,0x0                                                                                    
002af0   e202     BC        0x2af6                                                                                          
002af2   6ae1     CLRF      0xe1,0x0                                                                                        
002af4   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002af6   6ee1     MOVWF     0xe1,0x0                                                                                        
002af8   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002afa   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002afc   ffd9                                                                                                               
002afe   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
                                           /* show single digit on the single digit display */                              C:\fw\midicontroller\x011a\leds.c
002b00   cfd9     MOVFF     0xfd9,0xfe6    void leds_show_1digit(u8 value){                                                 C:\fw\midicontroller\x011a\leds.c
002b02   ffe6                                                                                                               
002b04   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002b06   ffd9                                                                                                               
002b08   0efe     MOVLW     0xfe           	DispSegData[4].byte = AsciiTo7Seg(value+'0');                                   C:\fw\midicontroller\x011a\leds.c
002b0a   50db     MOVF      0xdb,0x0,0x0                                                                                    
002b0c   0f30     ADDLW     0x30                                                                                            
002b0e   6ee6     MOVWF     0xe6,0x0                                                                                        
002b10   d807     RCALL     0x2b20                                                                                          
002b12   52e5     MOVF      0xe5,0x1,0x0                                                                                    
002b14   0100     MOVLB     0x0                                                                                             
002b16   6f66     MOVWF     0x66,0x1                                                                                        
002b18   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\leds.c
002b1a   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002b1c   ffd9                                                                                                               
002b1e   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
002b20   cfd9     MOVFF     0xfd9,0xfe6    unsigned char AsciiTo7Seg(unsigned char chr) {                                   C:\fw\midicontroller\x011a\leds.c
002b22   ffe6                                                                                                               
002b24   cfe1     MOVFF     0xfe1,0xfd9                                                                                     
002b26   ffd9                                                                                                               
                                           	                                                                                C:\fw\midicontroller\x011a\leds.c
002b28   0e41     MOVLW     0x41           	if (chr >= 'A') {                                                               C:\fw\midicontroller\x011a\leds.c
002b2a   6ef3     MOVWF     0xf3,0x0                                                                                        
002b2c   0efe     MOVLW     0xfe                                                                                            
002b2e   cfdb     MOVFF     0xfdb,0xff4                                                                                     
002b30   fff4                                                                                                               
002b32   50f3     MOVF      0xf3,0x0,0x0                                                                                    
002b34   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
002b36   e328     BNC       0x2b88                                                                                          
002b38   0e61     MOVLW     0x61           		if (chr >= 'a') chr -= 'a';	//lower case                                       C:\fw\midicontroller\x011a\leds.c
002b3a   6ef3     MOVWF     0xf3,0x0                                                                                        
002b3c   0efe     MOVLW     0xfe                                                                                            
002b3e   cfdb     MOVFF     0xfdb,0xff4                                                                                     
002b40   fff4                                                                                                               
002b42   50f3     MOVF      0xf3,0x0,0x0                                                                                    
002b44   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
002b46   e30b     BNC       0x2b5e                                                                                          
002b48   0e61     MOVLW     0x61                                                                                            
002b4a   6e10     MOVWF     0x10,0x0                                                                                        
002b4c   0efe     MOVLW     0xfe                                                                                            
002b4e   cfdb     MOVFF     0xfdb,0xfe7                                                                                     
002b50   ffe7                                                                                                               
002b52   5010     MOVF      0x10,0x0,0x0                                                                                    
002b54   5ee7     SUBWF     0xe7,0x1,0x0                                                                                    
002b56   0efe     MOVLW     0xfe                                                                                            
002b58   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
002b5a   ffdb                                                                                                               
002b5c   d00a     BRA       0x2b72         		else chr-='A';			//capital                                                     C:\fw\midicontroller\x011a\leds.c
002b5e   0e41     MOVLW     0x41                                                                                            
002b60   6e10     MOVWF     0x10,0x0                                                                                        
002b62   0efe     MOVLW     0xfe                                                                                            
002b64   cfdb     MOVFF     0xfdb,0xfe7                                                                                     
002b66   ffe7                                                                                                               
002b68   5010     MOVF      0x10,0x0,0x0                                                                                    
002b6a   5ee7     SUBWF     0xe7,0x1,0x0                                                                                    
002b6c   0efe     MOVLW     0xfe                                                                                            
002b6e   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
002b70   ffdb                                                                                                               
002b72   50db     MOVF      0xdb,0x0,0x0   		chr=LettersSegTable[chr];                                                      C:\fw\midicontroller\x011a\leds.c
002b74   6af7     CLRF      0xf7,0x0                                                                                        
002b76   0f34     ADDLW     0x34                                                                                            
002b78   6ef6     MOVWF     0xf6,0x0                                                                                        
002b7a   0e36     MOVLW     0x36                                                                                            
002b7c   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
002b7e   0008     TBLRD                                                                                                     
002b80   0efe     MOVLW     0xfe                                                                                            
002b82   cff5     MOVFF     0xff5,0xfdb                                                                                     
002b84   ffdb                                                                                                               
                                           	}                                                                               C:\fw\midicontroller\x011a\leds.c
002b86   d026     BRA       0x2bd4         	else if (chr >= '0') {                                                          C:\fw\midicontroller\x011a\leds.c
002b88   0e30     MOVLW     0x30                                                                                            
002b8a   6ef3     MOVWF     0xf3,0x0                                                                                        
002b8c   0efe     MOVLW     0xfe                                                                                            
002b8e   cfdb     MOVFF     0xfdb,0xff4                                                                                     
002b90   fff4                                                                                                               
002b92   50f3     MOVF      0xf3,0x0,0x0                                                                                    
002b94   5cf4     SUBWF     0xf4,0x0,0x0                                                                                    
002b96   e315     BNC       0x2bc2                                                                                          
002b98   0e30     MOVLW     0x30           		chr -= '0';	//numbers                                                          C:\fw\midicontroller\x011a\leds.c
002b9a   6e10     MOVWF     0x10,0x0                                                                                        
002b9c   0efe     MOVLW     0xfe                                                                                            
002b9e   cfdb     MOVFF     0xfdb,0xfe7                                                                                     
002ba0   ffe7                                                                                                               
002ba2   5010     MOVF      0x10,0x0,0x0                                                                                    
002ba4   5ee7     SUBWF     0xe7,0x1,0x0                                                                                    
002ba6   0efe     MOVLW     0xfe                                                                                            
002ba8   cfe7     MOVFF     0xfe7,0xfdb                                                                                     
002baa   ffdb                                                                                                               
002bac   50db     MOVF      0xdb,0x0,0x0   		chr=NumbersSegTable[chr];                                                      C:\fw\midicontroller\x011a\leds.c
002bae   6af7     CLRF      0xf7,0x0                                                                                        
002bb0   0f2a     ADDLW     0x2a                                                                                            
002bb2   6ef6     MOVWF     0xf6,0x0                                                                                        
002bb4   0e36     MOVLW     0x36                                                                                            
002bb6   22f7     ADDWFC    0xf7,0x1,0x0                                                                                    
002bb8   0008     TBLRD                                                                                                     
002bba   0efe     MOVLW     0xfe                                                                                            
002bbc   cff5     MOVFF     0xff5,0xfdb                                                                                     
002bbe   ffdb                                                                                                               
                                           	}                                                                               C:\fw\midicontroller\x011a\leds.c
002bc0   d009     BRA       0x2bd4         	else if (chr == ' ') chr = 0;		//space characters                               C:\fw\midicontroller\x011a\leds.c
002bc2   0efe     MOVLW     0xfe                                                                                            
002bc4   50db     MOVF      0xdb,0x0,0x0                                                                                    
002bc6   0820     SUBLW     0x20                                                                                            
002bc8   e103     BNZ       0x2bd0                                                                                          
002bca   0efe     MOVLW     0xfe                                                                                            
002bcc   6adb     CLRF      0xdb,0x0                                                                                        
002bce   d002     BRA       0x2bd4         	else chr = 0;				//all other characters are spaces                              C:\fw\midicontroller\x011a\leds.c
002bd0   0efe     MOVLW     0xfe                                                                                            
002bd2   6adb     CLRF      0xdb,0x0                                                                                        
002bd4   50db     MOVF      0xdb,0x0,0x0   	return chr;                                                                     C:\fw\midicontroller\x011a\leds.c
002bd6   d000     BRA       0x2bd8                                                                                          
002bd8   52e5     MOVF      0xe5,0x1,0x0   }                                                                                C:\fw\midicontroller\x011a\leds.c
002bda   cfe7     MOVFF     0xfe7,0xfd9                                                                                     
002bdc   ffd9                                                                                                               
002bde   0012     RETURN    0x0                                                                                             
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
                                           rom unsigned char NumbersSegTable[10] = {                                        C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<5)|(1<<1)|(1<<4)|(1<<2)|(1<<3),			//0                                C:\fw\midicontroller\x011a\leds.c
                                           	(1<<1)|(1<<2),										//1                                                     C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<1)|(1<<6)|(1<<4)|(1<<3),					//2                                     C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<1)|(1<<6)|(1<<2)|(1<<3),					//3                                     C:\fw\midicontroller\x011a\leds.c
                                           	(1<<5)|(1<<1)|(1<<6)|(1<<2),						//4                                           C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<5)|(1<<6)|(1<<2)|(1<<3),					//5                                     C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<5)|(1<<6)|(1<<4)|(1<<2)|(1<<3),			//6                                C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<1)|(1<<2),								//7                                                C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<1)|(1<<2)|(1<<3)|(1<<4)|(1<<5)|(1<<6),	//8                           C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<5)|(1<<1)|(1<<6)|(1<<2)					//9                                      C:\fw\midicontroller\x011a\leds.c
                                           };                                                                               C:\fw\midicontroller\x011a\leds.c
                                                                                                                            C:\fw\midicontroller\x011a\leds.c
                                           rom unsigned char LettersSegTable[26] = {                                        C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<1)|(1<<2)|(1<<4)|(1<<5)|(1<<6),	//A                                  C:\fw\midicontroller\x011a\leds.c
                                           	(1<<4)|(1<<6)|(1<<5)|(1<<2)|(1<<3),			//b                                       C:\fw\midicontroller\x011a\leds.c
                                           	(1<<6)|(1<<4)|(1<<3),						//c                                                  C:\fw\midicontroller\x011a\leds.c
                                           	(1<<6)|(1<<4)|(1<<3)|(1<<2)|(1<<1),			//d                                       C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<5)|(1<<6)|(1<<4)|(1<<3),			//E                                       C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<5)|(1<<6)|(1<<4),				//F                                             C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<5)|(1<<1)|(1<<6)|(1<<2)|(1<<3),	//g                                  C:\fw\midicontroller\x011a\leds.c
                                           	(1<<5)|(1<<6)|(1<<2)|(1<<4),				//h                                             C:\fw\midicontroller\x011a\leds.c
                                           	(1<<1)|(1<<2),								//I                                                       C:\fw\midicontroller\x011a\leds.c
                                           	(1<<1)|(1<<2)|(1<<3)|(1<<4),				//J                                             C:\fw\midicontroller\x011a\leds.c
                                           	0,											//K                                                                C:\fw\midicontroller\x011a\leds.c
                                           	(1<<5)|(1<<4)|(1<<3),						//L                                                  C:\fw\midicontroller\x011a\leds.c
                                           	0,											//m                                                                C:\fw\midicontroller\x011a\leds.c
                                           	(1<<4)|(1<<6)|(1<<2),						//n                                                  C:\fw\midicontroller\x011a\leds.c
                                           	(1<<6)|(1<<4)|(1<<2)|(1<<3),				//o                                             C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<5)|(1<<1)|(1<<6)|(1<<4),			//P                                       C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<5)|(1<<1)|(1<<6)|(1<<2),			//q                                       C:\fw\midicontroller\x011a\leds.c
                                           	(1<<4)|(1<<6),								//r                                                       C:\fw\midicontroller\x011a\leds.c
                                           	(1<<3)|(1<<2)|(1<<6)|(1<<5)|(1<<0),			//S                                       C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<1)|(1<<2),						//T                                                  C:\fw\midicontroller\x011a\leds.c
                                           	(1<<4)|(1<<3)|(1<<2),						//u                                                  C:\fw\midicontroller\x011a\leds.c
                                           	(1<<4)|(1<<3)|(1<<2),						//v                                                  C:\fw\midicontroller\x011a\leds.c
                                           	0,											//w                                                                C:\fw\midicontroller\x011a\leds.c
                                           	(1<<5)|(1<<6)|(1<<2)|(1<<4)|(1<<1),			//x                                       C:\fw\midicontroller\x011a\leds.c
                                           	(1<<5)|(1<<1)|(1<<6)|(1<<2)|(1<<3),			//y                                       C:\fw\midicontroller\x011a\leds.c
                                           	(1<<0)|(1<<1)|(1<<6)|(1<<4)|(1<<3)			//z                                        C:\fw\midicontroller\x011a\leds.c
                                           };                                                                               C:\fw\midicontroller\x011a\leds.c
                                           //*;###########################################################################  C:\fw\midicontroller\x011a\tables.c
                                           //;#			Author: Joe Dunne											  #                                           C:\fw\midicontroller\x011a\tables.c
                                           //;#			Date 5/28/07					      						  #                                          C:\fw\midicontroller\x011a\tables.c
                                           //;#			Tables in the code								  			  #                                        C:\fw\midicontroller\x011a\tables.c
                                           //;#			File Name: tables.c   										  #                                       C:\fw\midicontroller\x011a\tables.c
                                           //;#																		  #                                                        C:\fw\midicontroller\x011a\tables.c
                                           //;############################################################################  C:\fw\midicontroller\x011a\tables.c
                                                                                                                            C:\fw\midicontroller\x011a\tables.c
                                                                                                                            C:\fw\midicontroller\x011a\tables.c
                                           #include "c_system.h"                                                            C:\fw\midicontroller\x011a\tables.c
                                           #include "usb.h"                                                                 C:\fw\midicontroller\x011a\tables.c
                                           #include "hardware.h"                                                            C:\fw\midicontroller\x011a\tables.c
                                                                                                                            C:\fw\midicontroller\x011a\tables.c
                                           #pragma romdata                                                                  C:\fw\midicontroller\x011a\tables.c
                                                                                                                            C:\fw\midicontroller\x011a\tables.c
                                           rom unsigned char EXPP_PEDAL_LINEAR_CONV_TABLE[256] =                            C:\fw\midicontroller\x011a\tables.c
                                           {                                                                                C:\fw\midicontroller\x011a\tables.c
                                           	0                                                                               C:\fw\midicontroller\x011a\tables.c
                                           };                                                                               C:\fw\midicontroller\x011a\tables.c
                                                                                                                            C:\fw\midicontroller\x011a\tables.c
                                           #pragma romdata ROMSAVEDATA=0x4000                                               C:\fw\midicontroller\x011a\tables.c
                                           rom unsigned char ROM_SAVEDATA[8191] = {                                         C:\fw\midicontroller\x011a\tables.c
                                           	0                                                                               C:\fw\midicontroller\x011a\tables.c
                                           };                                                                               C:\fw\midicontroller\x011a\tables.c
                                                                                                                            C:\fw\midicontroller\x011a\tables.c
                                           #pragma code                                                                     C:\fw\midicontroller\x011a\tables.c
